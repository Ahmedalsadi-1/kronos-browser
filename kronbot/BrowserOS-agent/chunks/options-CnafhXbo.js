import{c as be,r as u,au as Ss,j as e,R as ya,f as ge,av as ba,e as Jt,C as ja,i as le,aw as wa,ax as Na,ay as Sa,az as Cs,P as Ca,O as ka,aA as Ea,a as W,aB as ks,q as _t,I as V,L as Pe,d as Vt,u as Ir,h as he,y as Ke,l as _a,aC as Es,x as Ta,m as Ia,p as Aa,n as Pa,o as Ra,F as Da,D as Ma,W as La,w as U,k as Oa,J as Fa,z as Tt,A as It,B as At,E as Pt,a9 as Rt,G as Ar,H as Zt,Z as Ue,aD as _s,aE as $e,_ as Ua,S as Va,aF as Ba,X as Ts,Y as za,aG as $a,at as Ha,K as Ka,a0 as Wa,a1 as qa,a2 as _e,a3 as Ga,a4 as Ya,a5 as Ja,a6 as Za,a7 as Xa,a8 as Qa}from"./product_logo-CblUR3bH.js";import{B as eo,P as Is,a as We,e as As,o as Xt,s as pe,n as vr,d as Ps,f as Oe,c as ct,I as ue,b as to,u as ro,g as ke,S as so,M as Rs,j as Jr,R as Ds,h as no}from"./storage-DaDrvY5F.js";import{B as Ms,c as Zr,L as xt,T as Pr,w as ao,I as oo,u as Rr,e as io,s as lo,m as xr,g as Xr,U as Lt,f as Ls,d as co,r as uo,a as mo,b as fo,R as ho}from"./textarea-C7ZwJ7bH.js";import{c as Os,u as po,R as xo,Z as go,A as vo,$ as yo,C as bo,a as jo,p as dt,a0 as Fs,Q as Dr,U as Bt,b as Us,t as Ne,a1 as wo,q as Qt,r as er,v as tr,a2 as No,a3 as So,M as Co,d as Vs,F as ko,a4 as Eo,T as _o,a5 as To,e as Io,a6 as Ao,a7 as Po,a8 as Ro,a9 as Do,aa as Mo,ab as Lo,ac as Oo,ad as Fo,ae as Uo}from"./mermaid-NA5CF7SZ-DoFU6Vfk.js";import{M as Bs,S as Vo}from"./settings-SYN6R1-B.js";import{d as Ze}from"./dayjs.min-RTqauz05.js";import{d as Bo}from"./duration-lGQN_MtO.js";import"./_arrayReduce-DA9huR5Z.js";import"./isArray-u3hEW1hi.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"850560cdfb5607663c662c646ed9e0458a773f78"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="6b366968-ff0a-4d07-832f-4a1401b34c18",t._sentryDebugIdIdentifier="sentry-dbid-6b366968-ff0a-4d07-832f-4a1401b34c18")})()}catch{}const zo=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],zs=be("calendar-clock",zo);const $o=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ho=be("chevron-up",$o);const Ko=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wo=be("earth",Ko);const qo=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$s=be("external-link",qo);const Go=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Yo=be("menu",Go);const Jo=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Zo=be("mic",Jo);const Xo=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Hs=be("palette",Xo);const Qo=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ei=be("pencil",Qo);const ti=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ri=be("play",ti);const si=[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]],ni=be("plug-zap",si);const ai=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Mr=be("rotate-ccw",ai);const oi=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],lt=be("server",oi);const ii=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ks=be("square",ii);const li=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rr=be("trash-2",li);const ci=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],di=be("wrench",ci);var Ws="AlertDialog",[ui]=Jt(Ws,[Ss]),Ve=Ss(),qs=t=>{const{__scopeAlertDialog:s,...r}=t,n=Ve(s);return e.jsx(ya,{...n,...r,modal:!0})};qs.displayName=Ws;var mi="AlertDialogTrigger",fi=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=Ve(r);return e.jsx(Ea,{...a,...n,ref:s})});fi.displayName=mi;var hi="AlertDialogPortal",Gs=t=>{const{__scopeAlertDialog:s,...r}=t,n=Ve(s);return e.jsx(Ca,{...n,...r})};Gs.displayName=hi;var pi="AlertDialogOverlay",Ys=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=Ve(r);return e.jsx(ka,{...a,...n,ref:s})});Ys.displayName=pi;var ot="AlertDialogContent",[xi,gi]=ui(ot),vi=wa("AlertDialogContent"),Js=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,o=Ve(r),i=u.useRef(null),l=ge(s,i),c=u.useRef(null);return e.jsx(ba,{contentName:ot,titleName:Zs,docsSlug:"alert-dialog",children:e.jsx(xi,{scope:r,cancelRef:c,children:e.jsxs(ja,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:le(a.onOpenAutoFocus,m=>{m.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(vi,{children:n}),e.jsx(bi,{contentRef:i})]})})})});Js.displayName=ot;var Zs="AlertDialogTitle",Xs=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=Ve(r);return e.jsx(Na,{...a,...n,ref:s})});Xs.displayName=Zs;var Qs="AlertDialogDescription",en=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=Ve(r);return e.jsx(Sa,{...a,...n,ref:s})});en.displayName=Qs;var yi="AlertDialogAction",tn=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=Ve(r);return e.jsx(Cs,{...a,...n,ref:s})});tn.displayName=yi;var rn="AlertDialogCancel",sn=u.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=gi(rn,r),o=Ve(r),i=ge(s,a);return e.jsx(Cs,{...o,...n,ref:i})});sn.displayName=rn;var bi=({contentRef:t})=>{const s=`\`${ot}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ot}\` by passing a \`${Qs}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ot}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},ji=qs,wi=Gs,Ni=Ys,Si=Js,Ci=tn,ki=sn,Ei=Xs,_i=en;function bt({...t}){return e.jsx(ji,{"data-slot":"alert-dialog",...t})}function Ti({...t}){return e.jsx(wi,{"data-slot":"alert-dialog-portal",...t})}function Ii({className:t,...s}){return e.jsx(Ni,{"data-slot":"alert-dialog-overlay",className:W("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur-[2px] data-[state=closed]:animate-out data-[state=open]:animate-in",t),...s})}function jt({className:t,...s}){return e.jsxs(Ti,{children:[e.jsx(Ii,{}),e.jsx(Si,{"data-slot":"alert-dialog-content",className:W("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border bg-background p-6 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=open]:animate-in sm:max-w-lg",t),...s})]})}function wt({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:W("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Nt({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:W("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function St({className:t,...s}){return e.jsx(Ei,{"data-slot":"alert-dialog-title",className:W("font-semibold text-lg",t),...s})}function Ct({className:t,...s}){return e.jsx(_i,{"data-slot":"alert-dialog-description",className:W("text-muted-foreground text-sm",t),...s})}function kt({className:t,...s}){return e.jsx(Ci,{className:W(ks(),t),...s})}function Et({className:t,...s}){return e.jsx(ki,{className:W(ks({variant:"outline"}),t),...s})}async function nn(t,s){const r=performance.now();try{const a=await(await fetch(`${s}/test-provider`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t.type,model:t.modelId,apiKey:t.apiKey,baseUrl:t.baseUrl,resourceName:t.resourceName,region:t.region,accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken})})).json();return a.responseTime||(a.responseTime=Math.round(performance.now()-r)),a}catch(n){const a=Math.round(performance.now()-r);return n instanceof Error?{success:!1,message:n.message,responseTime:a}:{success:!1,message:"An unexpected error occurred",responseTime:a}}}const Ai=({provider:t,isSelected:s,isBuiltIn:r,onSelect:n,onTest:a,onEdit:o,onDelete:i,isTesting:l=!1})=>{const c=`provider-${t.id}`;return e.jsxs("label",{htmlFor:c,className:W("group flex w-full cursor-pointer items-center gap-4 rounded-xl border p-4 text-left transition-all",s?"border-[var(--accent-orange)] bg-[var(--accent-orange)]/5 shadow-md":"border-border bg-card hover:border-[var(--accent-orange)]/50 hover:shadow-sm"),children:[e.jsx("input",{type:"radio",id:c,name:"default-provider",className:"sr-only",checked:s,onChange:()=>n()}),e.jsx("div",{className:W("flex h-5 w-5 shrink-0 items-center justify-center rounded-full border-2 transition-all",s?"border-[var(--accent-orange)] bg-[var(--accent-orange)]":"border-border"),children:s&&e.jsx(_t,{className:"h-3 w-3 text-white"})}),e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-[var(--accent-orange)]/10 text-[var(--accent-orange)]",children:r?e.jsx(eo,{size:24}):e.jsx(Is,{type:t.type,size:24})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:t.name}),s&&e.jsx(Ms,{variant:"secondary",className:"rounded bg-[var(--accent-orange)]/10 text-[var(--accent-orange)]",children:"DEFAULT"})]}),e.jsx("p",{className:"truncate text-muted-foreground text-sm",children:r?"Model hosted on the cloud by BrowserOS, has strict rate limits":`${t.modelId} • ${t.baseUrl}`})]}),!r&&e.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[e.jsxs(V,{variant:"outline",size:"sm",disabled:l,onClick:()=>a?.(),children:[l&&e.jsx(Pe,{className:"mr-1.5 h-4 w-4 animate-spin"}),l?"Testing...":"Test"]}),e.jsx(V,{variant:"outline",size:"sm",onClick:()=>o?.(),children:"Edit"}),e.jsx(V,{variant:"ghost",size:"icon-sm",className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive",onClick:()=>i?.(),children:e.jsx(rr,{className:"h-4 w-4"})})]})]})},Pi=({providers:t,selectedProviderId:s,testingProviderId:r,onSelectProvider:n,onTestProvider:a,onEditProvider:o,onDeleteProvider:i})=>e.jsx("div",{className:"space-y-3",children:t.map(l=>{const c=l.id==="browseros";return e.jsx(Ai,{provider:l,isSelected:s===l.id,isBuiltIn:c,isTesting:r===l.id,onSelect:()=>n(l.id),onTest:()=>a(l),onEdit:()=>o(l),onDelete:()=>i(l)},l.id)})});function Lr(t){const s=u.useRef({value:t,previous:t});return u.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Ri=[" ","Enter","ArrowUp","ArrowDown"],Di=[" ","Enter"],Xe="Select",[sr,nr,Mi]=go(Xe),[ut]=Jt(Xe,[Mi,Os]),ar=Os(),[Li,qe]=ut(Xe),[Oi,Fi]=ut(Xe),an=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:m,name:x,autoComplete:v,disabled:j,required:h,form:N}=t,b=ar(s),[k,w]=u.useState(null),[g,p]=u.useState(null),[S,C]=u.useState(!1),M=po(m),[T,$]=Vt({prop:n,defaultProp:a??!1,onChange:o,caller:Xe}),[Z,L]=Vt({prop:i,defaultProp:l,onChange:c,caller:Xe}),ne=u.useRef(null),D=k?N||!!k.closest("form"):!0,[O,z]=u.useState(new Set),q=Array.from(O).map(G=>G.props.value).join(";");return e.jsx(xo,{...b,children:e.jsxs(Li,{required:h,scope:s,trigger:k,onTriggerChange:w,valueNode:g,onValueNodeChange:p,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:Ir(),value:Z,onValueChange:L,open:T,onOpenChange:$,dir:M,triggerPointerDownPosRef:ne,disabled:j,children:[e.jsx(sr.Provider,{scope:s,children:e.jsx(Oi,{scope:t.__scopeSelect,onNativeOptionAdd:u.useCallback(G=>{z(X=>new Set(X).add(G))},[]),onNativeOptionRemove:u.useCallback(G=>{z(X=>{const E=new Set(X);return E.delete(G),E})},[]),children:r})}),D?e.jsxs(_n,{"aria-hidden":!0,required:h,tabIndex:-1,name:x,autoComplete:v,value:Z,onChange:G=>L(G.target.value),disabled:j,form:N,children:[Z===void 0?e.jsx("option",{value:""}):null,Array.from(O)]},q):null]})})};an.displayName=Xe;var on="SelectTrigger",ln=u.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,o=ar(r),i=qe(on,r),l=i.disabled||n,c=ge(s,i.onTriggerChange),m=nr(r),x=u.useRef("touch"),[v,j,h]=In(b=>{const k=m().filter(p=>!p.disabled),w=k.find(p=>p.value===i.value),g=An(k,b,w);g!==void 0&&i.onValueChange(g.value)}),N=b=>{l||(i.onOpenChange(!0),h()),b&&(i.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(vo,{asChild:!0,...o,children:e.jsx(he.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Tn(i.value)?"":void 0,...a,ref:c,onClick:le(a.onClick,b=>{b.currentTarget.focus(),x.current!=="mouse"&&N(b)}),onPointerDown:le(a.onPointerDown,b=>{x.current=b.pointerType;const k=b.target;k.hasPointerCapture(b.pointerId)&&k.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(N(b),b.preventDefault())}),onKeyDown:le(a.onKeyDown,b=>{const k=v.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&j(b.key),!(k&&b.key===" ")&&Ri.includes(b.key)&&(N(),b.preventDefault())})})})});ln.displayName=on;var cn="SelectValue",dn=u.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:i="",...l}=t,c=qe(cn,r),{onValueNodeHasChildrenChange:m}=c,x=o!==void 0,v=ge(s,c.onValueNodeChange);return Ke(()=>{m(x)},[m,x]),e.jsx(he.span,{...l,ref:v,style:{pointerEvents:"none"},children:Tn(c.value)?e.jsx(e.Fragment,{children:i}):o})});dn.displayName=cn;var Ui="SelectIcon",un=u.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(he.span,{"aria-hidden":!0,...a,ref:s,children:n||"▼"})});un.displayName=Ui;var Vi="SelectPortal",mn=t=>e.jsx(_a,{asChild:!0,...t});mn.displayName=Vi;var Qe="SelectContent",fn=u.forwardRef((t,s)=>{const r=qe(Qe,t.__scopeSelect),[n,a]=u.useState();if(Ke(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?Es.createPortal(e.jsx(hn,{scope:t.__scopeSelect,children:e.jsx(sr.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),o):null}return e.jsx(pn,{...t,ref:s})});fn.displayName=Qe;var Te=10,[hn,Ge]=ut(Qe),Bi="SelectContentImpl",zi=Ra("SelectContent.RemoveScroll"),pn=u.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:m,alignOffset:x,arrowPadding:v,collisionBoundary:j,collisionPadding:h,sticky:N,hideWhenDetached:b,avoidCollisions:k,...w}=t,g=qe(Qe,r),[p,S]=u.useState(null),[C,M]=u.useState(null),T=ge(s,F=>S(F)),[$,Z]=u.useState(null),[L,ne]=u.useState(null),D=nr(r),[O,z]=u.useState(!1),q=u.useRef(!1);u.useEffect(()=>{if(p)return Ia(p)},[p]),Aa();const G=u.useCallback(F=>{const[oe,...xe]=D().map(ce=>ce.ref.current),[Y]=xe.slice(-1),Q=document.activeElement;for(const ce of F)if(ce===Q||(ce?.scrollIntoView({block:"nearest"}),ce===oe&&C&&(C.scrollTop=0),ce===Y&&C&&(C.scrollTop=C.scrollHeight),ce?.focus(),document.activeElement!==Q))return},[D,C]),X=u.useCallback(()=>G([$,p]),[G,$,p]);u.useEffect(()=>{O&&X()},[O,X]);const{onOpenChange:E,triggerPointerDownPosRef:B}=g;u.useEffect(()=>{if(p){let F={x:0,y:0};const oe=Y=>{F={x:Math.abs(Math.round(Y.pageX)-(B.current?.x??0)),y:Math.abs(Math.round(Y.pageY)-(B.current?.y??0))}},xe=Y=>{F.x<=10&&F.y<=10?Y.preventDefault():p.contains(Y.target)||E(!1),document.removeEventListener("pointermove",oe),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",xe,{capture:!0})}}},[p,E,B]),u.useEffect(()=>{const F=()=>E(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[E]);const[Ee,Ye]=In(F=>{const oe=D().filter(Q=>!Q.disabled),xe=oe.find(Q=>Q.ref.current===document.activeElement),Y=An(oe,F,xe);Y&&setTimeout(()=>Y.ref.current.focus())}),et=u.useCallback((F,oe,xe)=>{const Y=!q.current&&!xe;(g.value!==void 0&&g.value===oe||Y)&&(Z(F),Y&&(q.current=!0))},[g.value]),mt=u.useCallback(()=>p?.focus(),[p]),De=u.useCallback((F,oe,xe)=>{const Y=!q.current&&!xe;(g.value!==void 0&&g.value===oe||Y)&&ne(F)},[g.value]),tt=n==="popper"?yr:xn,Be=tt===yr?{side:l,sideOffset:c,align:m,alignOffset:x,arrowPadding:v,collisionBoundary:j,collisionPadding:h,sticky:N,hideWhenDetached:b,avoidCollisions:k}:{};return e.jsx(hn,{scope:r,content:p,viewport:C,onViewportChange:M,itemRefCallback:et,selectedItem:$,onItemLeave:mt,itemTextRefCallback:De,focusSelectedItem:X,selectedItemText:L,position:n,isPositioned:O,searchRef:Ee,children:e.jsx(Pa,{as:zi,allowPinchZoom:!0,children:e.jsx(Da,{asChild:!0,trapped:g.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:le(a,F=>{g.trigger?.focus({preventScroll:!0}),F.preventDefault()}),children:e.jsx(Ma,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:e.jsx(tt,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:F=>F.preventDefault(),...w,...Be,onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:le(w.onKeyDown,F=>{const oe=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!oe&&F.key.length===1&&Ye(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let Y=D().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(F.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const Q=F.target,ce=Y.indexOf(Q);Y=Y.slice(ce+1)}setTimeout(()=>G(Y)),F.preventDefault()}})})})})})})});pn.displayName=Bi;var $i="SelectItemAlignedPosition",xn=u.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,o=qe(Qe,r),i=Ge(Qe,r),[l,c]=u.useState(null),[m,x]=u.useState(null),v=ge(s,T=>x(T)),j=nr(r),h=u.useRef(!1),N=u.useRef(!0),{viewport:b,selectedItem:k,selectedItemText:w,focusSelectedItem:g}=i,p=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&m&&b&&k&&w){const T=o.trigger.getBoundingClientRect(),$=m.getBoundingClientRect(),Z=o.valueNode.getBoundingClientRect(),L=w.getBoundingClientRect();if(o.dir!=="rtl"){const Q=L.left-$.left,ce=Z.left-Q,Re=T.left-ce,Me=T.width+Re,rt=Math.max(Me,$.width),st=window.innerWidth-Te,ft=Zr(ce,[Te,Math.max(Te,st-rt)]);l.style.minWidth=Me+"px",l.style.left=ft+"px"}else{const Q=$.right-L.right,ce=window.innerWidth-Z.right-Q,Re=window.innerWidth-T.right-ce,Me=T.width+Re,rt=Math.max(Me,$.width),st=window.innerWidth-Te,ft=Zr(ce,[Te,Math.max(Te,st-rt)]);l.style.minWidth=Me+"px",l.style.right=ft+"px"}const ne=j(),D=window.innerHeight-Te*2,O=b.scrollHeight,z=window.getComputedStyle(m),q=parseInt(z.borderTopWidth,10),G=parseInt(z.paddingTop,10),X=parseInt(z.borderBottomWidth,10),E=parseInt(z.paddingBottom,10),B=q+G+O+E+X,Ee=Math.min(k.offsetHeight*5,B),Ye=window.getComputedStyle(b),et=parseInt(Ye.paddingTop,10),mt=parseInt(Ye.paddingBottom,10),De=T.top+T.height/2-Te,tt=D-De,Be=k.offsetHeight/2,F=k.offsetTop+Be,oe=q+G+F,xe=B-oe;if(oe<=De){const Q=ne.length>0&&k===ne[ne.length-1].ref.current;l.style.bottom="0px";const ce=m.clientHeight-b.offsetTop-b.offsetHeight,Re=Math.max(tt,Be+(Q?mt:0)+ce+X),Me=oe+Re;l.style.height=Me+"px"}else{const Q=ne.length>0&&k===ne[0].ref.current;l.style.top="0px";const Re=Math.max(De,q+b.offsetTop+(Q?et:0)+Be)+xe;l.style.height=Re+"px",b.scrollTop=oe-De+b.offsetTop}l.style.margin=`${Te}px 0`,l.style.minHeight=Ee+"px",l.style.maxHeight=D+"px",n?.(),requestAnimationFrame(()=>h.current=!0)}},[j,o.trigger,o.valueNode,l,m,b,k,w,o.dir,n]);Ke(()=>p(),[p]);const[S,C]=u.useState();Ke(()=>{m&&C(window.getComputedStyle(m).zIndex)},[m]);const M=u.useCallback(T=>{T&&N.current===!0&&(p(),g?.(),N.current=!1)},[p,g]);return e.jsx(Ki,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:M,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:e.jsx(he.div,{...a,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});xn.displayName=$i;var Hi="SelectPopperPosition",yr=u.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Te,...o}=t,i=ar(r);return e.jsx(bo,{...i,...o,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});yr.displayName=Hi;var[Ki,Or]=ut(Qe,{}),br="SelectViewport",gn=u.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,o=Ge(br,r),i=Or(br,r),l=ge(s,o.onViewportChange),c=u.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(sr.Slot,{scope:r,children:e.jsx(he.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:le(a.onScroll,m=>{const x=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:j}=i;if(j?.current&&v){const h=Math.abs(c.current-x.scrollTop);if(h>0){const N=window.innerHeight-Te*2,b=parseFloat(v.style.minHeight),k=parseFloat(v.style.height),w=Math.max(b,k);if(w<N){const g=w+h,p=Math.min(N,g),S=g-p;v.style.height=p+"px",v.style.bottom==="0px"&&(x.scrollTop=S>0?S:0,v.style.justifyContent="flex-end")}}}c.current=x.scrollTop})})})]})});gn.displayName=br;var vn="SelectGroup",[Wi,qi]=ut(vn),Gi=u.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Ir();return e.jsx(Wi,{scope:r,id:a,children:e.jsx(he.div,{role:"group","aria-labelledby":a,...n,ref:s})})});Gi.displayName=vn;var yn="SelectLabel",Yi=u.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=qi(yn,r);return e.jsx(he.div,{id:a.id,...n,ref:s})});Yi.displayName=yn;var zt="SelectItem",[Ji,bn]=ut(zt),jn=u.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...i}=t,l=qe(zt,r),c=Ge(zt,r),m=l.value===n,[x,v]=u.useState(o??""),[j,h]=u.useState(!1),N=ge(s,g=>c.itemRefCallback?.(g,n,a)),b=Ir(),k=u.useRef("touch"),w=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ji,{scope:r,value:n,disabled:a,textId:b,isSelected:m,onItemTextChange:u.useCallback(g=>{v(p=>p||(g?.textContent??"").trim())},[]),children:e.jsx(sr.ItemSlot,{scope:r,value:n,disabled:a,textValue:x,children:e.jsx(he.div,{role:"option","aria-labelledby":b,"data-highlighted":j?"":void 0,"aria-selected":m&&j,"data-state":m?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:N,onFocus:le(i.onFocus,()=>h(!0)),onBlur:le(i.onBlur,()=>h(!1)),onClick:le(i.onClick,()=>{k.current!=="mouse"&&w()}),onPointerUp:le(i.onPointerUp,()=>{k.current==="mouse"&&w()}),onPointerDown:le(i.onPointerDown,g=>{k.current=g.pointerType}),onPointerMove:le(i.onPointerMove,g=>{k.current=g.pointerType,a?c.onItemLeave?.():k.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(i.onPointerLeave,g=>{g.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:le(i.onKeyDown,g=>{c.searchRef?.current!==""&&g.key===" "||(Di.includes(g.key)&&w(),g.key===" "&&g.preventDefault())})})})})});jn.displayName=zt;var pt="SelectItemText",wn=u.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...o}=t,i=qe(pt,r),l=Ge(pt,r),c=bn(pt,r),m=Fi(pt,r),[x,v]=u.useState(null),j=ge(s,w=>v(w),c.onItemTextChange,w=>l.itemTextRefCallback?.(w,c.value,c.disabled)),h=x?.textContent,N=u.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:b,onNativeOptionRemove:k}=m;return Ke(()=>(b(N),()=>k(N)),[b,k,N]),e.jsxs(e.Fragment,{children:[e.jsx(he.span,{id:c.textId,...o,ref:j}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Es.createPortal(o.children,i.valueNode):null]})});wn.displayName=pt;var Nn="SelectItemIndicator",Sn=u.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return bn(Nn,r).isSelected?e.jsx(he.span,{"aria-hidden":!0,...n,ref:s}):null});Sn.displayName=Nn;var jr="SelectScrollUpButton",Cn=u.forwardRef((t,s)=>{const r=Ge(jr,t.__scopeSelect),n=Or(jr,t.__scopeSelect),[a,o]=u.useState(!1),i=ge(s,n.onScrollButtonChange);return Ke(()=>{if(r.viewport&&r.isPositioned){let l=function(){const m=c.scrollTop>0;o(m)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(En,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Cn.displayName=jr;var wr="SelectScrollDownButton",kn=u.forwardRef((t,s)=>{const r=Ge(wr,t.__scopeSelect),n=Or(wr,t.__scopeSelect),[a,o]=u.useState(!1),i=ge(s,n.onScrollButtonChange);return Ke(()=>{if(r.viewport&&r.isPositioned){let l=function(){const m=c.scrollHeight-c.clientHeight,x=Math.ceil(c.scrollTop)<m;o(x)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(En,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});kn.displayName=wr;var En=u.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,o=Ge("SelectScrollButton",r),i=u.useRef(null),l=nr(r),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Ke(()=>{l().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(he.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:le(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:le(a.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:le(a.onPointerLeave,()=>{c()})})}),Zi="SelectSeparator",Xi=u.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(he.div,{"aria-hidden":!0,...n,ref:s})});Xi.displayName=Zi;var Nr="SelectArrow",Qi=u.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=ar(r),o=qe(Nr,r),i=Ge(Nr,r);return o.open&&i.position==="popper"?e.jsx(jo,{...a,...n,ref:s}):null});Qi.displayName=Nr;var el="SelectBubbleInput",_n=u.forwardRef(({__scopeSelect:t,value:s,...r},n)=>{const a=u.useRef(null),o=ge(n,a),i=Lr(s);return u.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==s&&x){const v=new Event("change",{bubbles:!0});x.call(l,s),l.dispatchEvent(v)}},[i,s]),e.jsx(he.select,{...r,style:{...yo,...r.style},ref:o,defaultValue:s})});_n.displayName=el;function Tn(t){return t===""||t===void 0}function In(t){const s=Ta(t),r=u.useRef(""),n=u.useRef(0),a=u.useCallback(i=>{const l=r.current+i;s(l),(function c(m){r.current=m,window.clearTimeout(n.current),m!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[s]),o=u.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function An(t,s,r){const a=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,o=r?t.indexOf(r):-1;let i=tl(t,Math.max(o,0));a.length===1&&(i=i.filter(m=>m!==r));const c=i.find(m=>m.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function tl(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var rl=an,sl=ln,nl=dn,al=un,ol=mn,il=fn,ll=gn,cl=jn,dl=wn,ul=Sn,ml=Cn,fl=kn;function $t({...t}){return e.jsx(rl,{"data-slot":"select",...t})}function Ht({...t}){return e.jsx(nl,{"data-slot":"select-value",...t})}function Kt({className:t,size:s="default",children:r,...n}){return e.jsxs(sl,{"data-slot":"select-trigger","data-size":s,className:W("flex w-fit items-center justify-between gap-2 whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[size=default]:h-9 data-[size=sm]:h-8 data-[placeholder]:text-muted-foreground *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:hover:bg-input/50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...n,children:[r,e.jsx(al,{asChild:!0,children:e.jsx(dt,{className:"size-4 opacity-50"})})]})}function Wt({className:t,children:s,position:r="popper",align:n="center",...a}){return e.jsx(ol,{children:e.jsxs(il,{"data-slot":"select-content",className:W("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=closed]:animate-out data-[state=open]:animate-in",r==="popper"&&"data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=bottom]:translate-y-1 data-[side=top]:-translate-y-1",t),position:r,align:n,...a,children:[e.jsx(hl,{}),e.jsx(ll,{className:W("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(pl,{})]})})}function it({className:t,children:s,...r}){return e.jsxs(cl,{"data-slot":"select-item",className:W("relative flex w-full cursor-default select-none items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ul,{children:e.jsx(_t,{className:"size-4"})})}),e.jsx(dl,{children:s})]})}function hl({className:t,...s}){return e.jsx(ml,{"data-slot":"select-scroll-up-button",className:W("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ho,{className:"size-4"})})}function pl({className:t,...s}){return e.jsx(fl,{"data-slot":"select-scroll-down-button",className:W("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(dt,{className:"size-4"})})}const xl=({providers:t,defaultProviderId:s,onDefaultProviderChange:r,onAddProvider:n})=>e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx("img",{src:La,alt:"BrowserOS",className:"h-8 w-8"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"LLM Providers"}),e.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Add your provider and choose the default LLM"}),e.jsxs("div",{className:"flex flex-col items-start gap-4 sm:flex-row sm:items-center",children:[e.jsx("label",{htmlFor:"provider-picker",className:"whitespace-nowrap font-medium text-sm",children:"Default Provider:"}),e.jsxs($t,{value:s,onValueChange:r,children:[e.jsx(Kt,{id:"provider-picker",className:"w-full flex-1 sm:max-w-xs",children:e.jsx(Ht,{placeholder:"Select a provider"})}),e.jsx(Wt,{children:t.map(a=>e.jsx(it,{value:a.id,children:a.name},a.id))})]}),e.jsxs(V,{variant:"outline",onClick:n,className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20 hover:text-[var(--accent-orange)]",children:[e.jsx(We,{className:"h-4 w-4"}),"Add custom provider"]})]})]})]})});var Dt=t=>t.type==="checkbox",Je=t=>t instanceof Date,je=t=>t==null;const Pn=t=>typeof t=="object";var me=t=>!je(t)&&!Array.isArray(t)&&Pn(t)&&!Je(t),Rn=t=>me(t)&&t.target?Dt(t.target)?t.target.checked:t.target.value:t,gl=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Dn=(t,s)=>t.has(gl(s)),vl=t=>{const s=t.constructor&&t.constructor.prototype;return me(s)&&s.hasOwnProperty("isPrototypeOf")},Fr=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function fe(t){if(t instanceof Date)return new Date(t);const s=typeof FileList<"u"&&t instanceof FileList;if(Fr&&(t instanceof Blob||s))return t;const r=Array.isArray(t);if(!r&&!(me(t)&&vl(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=fe(t[a]));return n}var or=t=>/^\w*$/.test(t),ie=t=>t===void 0,Ur=t=>Array.isArray(t)?t.filter(Boolean):[],Vr=t=>Ur(t.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(t,s,r)=>{if(!s||!me(t))return r;const n=(or(s)?[s]:Vr(s)).reduce((a,o)=>je(a)?a:a[o],t);return ie(n)||n===t?ie(t[s])?r:t[s]:n},we=t=>typeof t=="boolean",ye=t=>typeof t=="function",K=(t,s,r)=>{let n=-1;const a=or(s)?[s]:Vr(s),o=a.length,i=o-1;for(;++n<o;){const l=a[n];let c=r;if(n!==i){const m=t[l];c=me(m)||Array.isArray(m)?m:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const qt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ie={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Le={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Br=U.createContext(null);Br.displayName="HookFormContext";const ir=()=>U.useContext(Br),yl=t=>{const{children:s,...r}=t;return U.createElement(Br.Provider,{value:r},s)};var Mn=(t,s,r,n=!0)=>{const a={defaultValues:s._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const i=o;return s._proxyFormState[i]!==Ie.all&&(s._proxyFormState[i]=!n||Ie.all),r&&(r[i]=!0),t[i]}});return a};const zr=typeof window<"u"?U.useLayoutEffect:U.useEffect;function Ln(t){const s=ir(),{control:r=s.control,disabled:n,name:a,exact:o}=t||{},[i,l]=U.useState(r._formState),c=U.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return zr(()=>r._subscribe({name:a,formState:c.current,exact:o,callback:m=>{!n&&l({...r._formState,...m})}}),[a,n,o]),U.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),U.useMemo(()=>Mn(i,r,c.current,!1),[i,r])}var Se=t=>typeof t=="string",Sr=(t,s,r,n,a)=>Se(t)?(n&&s.watch.add(t),A(r,t,a)):Array.isArray(t)?t.map(o=>(n&&s.watch.add(o),A(r,o))):(n&&(s.watchAll=!0),r),Cr=t=>je(t)||!Pn(t);function Ae(t,s,r=new WeakSet){if(Cr(t)||Cr(s))return Object.is(t,s);if(Je(t)&&Je(s))return t.getTime()===s.getTime();const n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const o of n){const i=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const l=s[o];if(Je(i)&&Je(l)||me(i)&&me(l)||Array.isArray(i)&&Array.isArray(l)?!Ae(i,l,r):!Object.is(i,l))return!1}}return!0}function bl(t){const s=ir(),{control:r=s.control,name:n,defaultValue:a,disabled:o,exact:i,compute:l}=t||{},c=U.useRef(a),m=U.useRef(l),x=U.useRef(void 0),v=U.useRef(r),j=U.useRef(n);m.current=l;const[h,N]=U.useState(()=>{const S=r._getWatch(n,c.current);return m.current?m.current(S):S}),b=U.useCallback(S=>{const C=Sr(n,r._names,S||r._formValues,!1,c.current);return m.current?m.current(C):C},[r._formValues,r._names,n]),k=U.useCallback(S=>{if(!o){const C=Sr(n,r._names,S||r._formValues,!1,c.current);if(m.current){const M=m.current(C);Ae(M,x.current)||(N(M),x.current=M)}else N(C)}},[r._formValues,r._names,o,n]);zr(()=>((v.current!==r||!Ae(j.current,n))&&(v.current=r,j.current=n,k()),r._subscribe({name:n,formState:{values:!0},exact:i,callback:S=>{k(S.values)}})),[r,i,n,k]),U.useEffect(()=>r._removeUnmounted());const w=v.current!==r,g=j.current,p=U.useMemo(()=>{if(o)return null;const S=!w&&!Ae(g,n);return w||S?b():null},[o,w,n,g,b]);return p!==null?p:h}function jl(t){const s=ir(),{name:r,disabled:n,control:a=s.control,shouldUnregister:o,defaultValue:i,exact:l=!0}=t,c=Dn(a._names.array,r),m=U.useMemo(()=>A(a._formValues,r,A(a._defaultValues,r,i)),[a,r,i]),x=bl({control:a,name:r,defaultValue:m,exact:l}),v=Ln({control:a,name:r,exact:l}),j=U.useRef(t),h=U.useRef(void 0),N=U.useRef(a.register(r,{...t.rules,value:x,...we(t.disabled)?{disabled:t.disabled}:{}}));j.current=t;const b=U.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!A(v.errors,r)},isDirty:{enumerable:!0,get:()=>!!A(v.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!A(v.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!A(v.validatingFields,r)},error:{enumerable:!0,get:()=>A(v.errors,r)}}),[v,r]),k=U.useCallback(S=>N.current.onChange({target:{value:Rn(S),name:r},type:qt.CHANGE}),[r]),w=U.useCallback(()=>N.current.onBlur({target:{value:A(a._formValues,r),name:r},type:qt.BLUR}),[r,a._formValues]),g=U.useCallback(S=>{const C=A(a._fields,r);C&&C._f&&S&&(C._f.ref={focus:()=>ye(S.focus)&&S.focus(),select:()=>ye(S.select)&&S.select(),setCustomValidity:M=>ye(S.setCustomValidity)&&S.setCustomValidity(M),reportValidity:()=>ye(S.reportValidity)&&S.reportValidity()})},[a._fields,r]),p=U.useMemo(()=>({name:r,value:x,...we(n)||v.disabled?{disabled:v.disabled||n}:{},onChange:k,onBlur:w,ref:g}),[r,n,v.disabled,k,w,g,x]);return U.useEffect(()=>{const S=a._options.shouldUnregister||o,C=h.current;C&&C!==r&&!c&&a.unregister(C),a.register(r,{...j.current.rules,...we(j.current.disabled)?{disabled:j.current.disabled}:{}});const M=(T,$)=>{const Z=A(a._fields,T);Z&&Z._f&&(Z._f.mount=$)};if(M(r,!0),S){const T=fe(A(a._options.defaultValues,r,j.current.defaultValue));K(a._defaultValues,r,T),ie(A(a._formValues,r))&&K(a._formValues,r,T)}return!c&&a.register(r),h.current=r,()=>{(c?S&&!a._state.action:S)?a.unregister(r):M(r,!1)}},[r,a,c,o]),U.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),U.useMemo(()=>({field:p,formState:v,fieldState:b}),[p,v,b])}const wl=t=>t.render(jl(t));var $r=(t,s,r,n,a)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},gt=t=>Array.isArray(t)?t:[t],Qr=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}};function On(t,s){const r={};for(const n in t)if(t.hasOwnProperty(n)){const a=t[n],o=s[n];if(a&&me(a)&&o){const i=On(a,o);me(i)&&(r[n]=i)}else t[n]&&(r[n]=o)}return r}var ve=t=>me(t)&&!Object.keys(t).length,Hr=t=>t.type==="file",Gt=t=>{if(!Fr)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Fn=t=>t.type==="select-multiple",Kr=t=>t.type==="radio",Nl=t=>Kr(t)||Dt(t),gr=t=>Gt(t)&&t.isConnected;function Sl(t,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)t=ie(t)?n++:t[s[n++]];return t}function Cl(t){for(const s in t)if(t.hasOwnProperty(s)&&!ie(t[s]))return!1;return!0}function de(t,s){const r=Array.isArray(s)?s:or(s)?[s]:Vr(s),n=r.length===1?t:Sl(t,r),a=r.length-1,o=r[a];return n&&delete n[o],a!==0&&(me(n)&&ve(n)||Array.isArray(n)&&Cl(n))&&de(t,r.slice(0,-1)),t}var kl=t=>{for(const s in t)if(ye(t[s]))return!0;return!1};function Un(t){return Array.isArray(t)||me(t)&&!kl(t)}function kr(t,s={}){for(const r in t){const n=t[r];Un(n)?(s[r]=Array.isArray(n)?[]:{},kr(n,s[r])):ie(n)||(s[r]=!0)}return s}function at(t,s,r){r||(r=kr(s));for(const n in t){const a=t[n];if(Un(a))ie(s)||Cr(r[n])?r[n]=kr(a,Array.isArray(a)?[]:{}):at(a,je(s)?{}:s[n],r[n]);else{const o=s[n];r[n]=!Ae(a,o)}}return r}const es={value:!1,isValid:!1},ts={value:!0,isValid:!0};var Vn=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ie(t[0].attributes.value)?ie(t[0].value)||t[0].value===""?ts:{value:t[0].value,isValid:!0}:ts:es}return es},Bn=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>ie(t)?t:s?t===""?NaN:t&&+t:r&&Se(t)?new Date(t):n?n(t):t;const rs={isValid:!1,value:null};var zn=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,rs):rs;function ss(t){const s=t.ref;return Hr(s)?s.files:Kr(s)?zn(t.refs).value:Fn(s)?[...s.selectedOptions].map(({value:r})=>r):Dt(s)?Vn(t.refs).value:Bn(ie(s.value)?t.ref.value:s.value,t)}var El=(t,s,r,n)=>{const a={};for(const o of t){const i=A(s,o);i&&K(a,o,i._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},Yt=t=>t instanceof RegExp,ht=t=>ie(t)?t:Yt(t)?t.source:me(t)?Yt(t.value)?t.value.source:t.value:t,ns=t=>({isOnSubmit:!t||t===Ie.onSubmit,isOnBlur:t===Ie.onBlur,isOnChange:t===Ie.onChange,isOnAll:t===Ie.all,isOnTouch:t===Ie.onTouched});const as="AsyncFunction";var _l=t=>!!t&&!!t.validate&&!!(ye(t.validate)&&t.validate.constructor.name===as||me(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===as)),Tl=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),os=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const vt=(t,s,r,n)=>{for(const a of r||Object.keys(t)){const o=A(t,a);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&s(i.refs[0],a)&&!n)return!0;if(i.ref&&s(i.ref,i.name)&&!n)return!0;if(vt(l,s))break}else if(me(l)&&vt(l,s))break}}};function is(t,s,r){const n=A(t,r);if(n||or(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const o=a.join("."),i=A(s,o),l=A(t,o);if(i&&!Array.isArray(i)&&r!==o)return{name:r};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};a.pop()}return{name:r}}var Il=(t,s,r,n)=>{r(t);const{name:a,...o}=t;return ve(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(i=>s[i]===(!n||Ie.all))},Al=(t,s,r)=>!t||!s||t===s||gt(t).some(n=>n&&(r?n===s:n.startsWith(s)||s.startsWith(n))),Pl=(t,s,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(s||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,Rl=(t,s)=>!Ur(A(t,s)).length&&de(t,s),Dl=(t,s,r)=>{const n=gt(A(t,r));return K(n,"root",s[r]),K(t,r,n),t};function ls(t,s,r="validate"){if(Se(t)||Array.isArray(t)&&t.every(Se)||we(t)&&!t)return{type:r,message:Se(t)?t:"",ref:s}}var nt=t=>me(t)&&!Yt(t)?t:{value:t,message:""},cs=async(t,s,r,n,a,o)=>{const{ref:i,refs:l,required:c,maxLength:m,minLength:x,min:v,max:j,pattern:h,validate:N,name:b,valueAsNumber:k,mount:w}=t._f,g=A(r,b);if(!w||s.has(b))return{};const p=l?l[0]:i,S=D=>{a&&p.reportValidity&&(p.setCustomValidity(we(D)?"":D||""),p.reportValidity())},C={},M=Kr(i),T=Dt(i),$=M||T,Z=(k||Hr(i))&&ie(i.value)&&ie(g)||Gt(i)&&i.value===""||g===""||Array.isArray(g)&&!g.length,L=$r.bind(null,b,n,C),ne=(D,O,z,q=Le.maxLength,G=Le.minLength)=>{const X=D?O:z;C[b]={type:D?q:G,message:X,ref:i,...L(D?q:G,X)}};if(o?!Array.isArray(g)||!g.length:c&&(!$&&(Z||je(g))||we(g)&&!g||T&&!Vn(l).isValid||M&&!zn(l).isValid)){const{value:D,message:O}=Se(c)?{value:!!c,message:c}:nt(c);if(D&&(C[b]={type:Le.required,message:O,ref:p,...L(Le.required,O)},!n))return S(O),C}if(!Z&&(!je(v)||!je(j))){let D,O;const z=nt(j),q=nt(v);if(!je(g)&&!isNaN(g)){const G=i.valueAsNumber||g&&+g;je(z.value)||(D=G>z.value),je(q.value)||(O=G<q.value)}else{const G=i.valueAsDate||new Date(g),X=Ee=>new Date(new Date().toDateString()+" "+Ee),E=i.type=="time",B=i.type=="week";Se(z.value)&&g&&(D=E?X(g)>X(z.value):B?g>z.value:G>new Date(z.value)),Se(q.value)&&g&&(O=E?X(g)<X(q.value):B?g<q.value:G<new Date(q.value))}if((D||O)&&(ne(!!D,z.message,q.message,Le.max,Le.min),!n))return S(C[b].message),C}if((m||x)&&!Z&&(Se(g)||o&&Array.isArray(g))){const D=nt(m),O=nt(x),z=!je(D.value)&&g.length>+D.value,q=!je(O.value)&&g.length<+O.value;if((z||q)&&(ne(z,D.message,O.message),!n))return S(C[b].message),C}if(h&&!Z&&Se(g)){const{value:D,message:O}=nt(h);if(Yt(D)&&!g.match(D)&&(C[b]={type:Le.pattern,message:O,ref:i,...L(Le.pattern,O)},!n))return S(O),C}if(N){if(ye(N)){const D=await N(g,r),O=ls(D,p);if(O&&(C[b]={...O,...L(Le.validate,O.message)},!n))return S(O.message),C}else if(me(N)){let D={};for(const O in N){if(!ve(D)&&!n)break;const z=ls(await N[O](g,r),p,O);z&&(D={...z,...L(O,z.message)},S(z.message),n&&(C[b]=D))}if(!ve(D)&&(C[b]={ref:p,...D},!n))return C}}return S(!0),C};const Ml={mode:Ie.onSubmit,reValidateMode:Ie.onChange,shouldFocusError:!0};function Ll(t={}){let s={...Ml,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ye(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=me(s.defaultValues)||me(s.values)?fe(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:fe(a),i={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,m=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={...x};let j={...v};const h={array:Qr(),state:Qr()},N=s.criteriaMode===Ie.all,b=d=>f=>{clearTimeout(m),m=setTimeout(d,f)},k=async d=>{if(!i.keepIsValid&&!s.disabled&&(v.isValid||j.isValid||d)){let f;s.resolver?(f=ve((await $()).errors),w()):f=await L(n,!0),f!==r.isValid&&h.state.next({isValid:f})}},w=(d,f)=>{!s.disabled&&(v.isValidating||v.validatingFields||j.isValidating||j.validatingFields)&&((d||Array.from(l.mount)).forEach(y=>{y&&(f?K(r.validatingFields,y,f):de(r.validatingFields,y))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ve(r.validatingFields)}))},g=(d,f=[],y,P,I=!0,_=!0)=>{if(P&&y&&!s.disabled){if(i.action=!0,_&&Array.isArray(A(n,d))){const R=y(A(n,d),P.argA,P.argB);I&&K(n,d,R)}if(_&&Array.isArray(A(r.errors,d))){const R=y(A(r.errors,d),P.argA,P.argB);I&&K(r.errors,d,R),Rl(r.errors,d)}if((v.touchedFields||j.touchedFields)&&_&&Array.isArray(A(r.touchedFields,d))){const R=y(A(r.touchedFields,d),P.argA,P.argB);I&&K(r.touchedFields,d,R)}(v.dirtyFields||j.dirtyFields)&&(r.dirtyFields=at(a,o)),h.state.next({name:d,isDirty:D(d,f),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else K(o,d,f)},p=(d,f)=>{K(r.errors,d,f),h.state.next({errors:r.errors})},S=d=>{r.errors=d,h.state.next({errors:r.errors,isValid:!1})},C=(d,f,y,P)=>{const I=A(n,d);if(I){const _=A(o,d,ie(y)?A(a,d):y);ie(_)||P&&P.defaultChecked||f?K(o,d,f?_:ss(I._f)):q(d,_),i.mount&&!i.action&&k()}},M=(d,f,y,P,I)=>{let _=!1,R=!1;const H={name:d};if(!s.disabled){if(!y||P){(v.isDirty||j.isDirty)&&(R=r.isDirty,r.isDirty=H.isDirty=D(),_=R!==H.isDirty);const ee=Ae(A(a,d),f);R=!!A(r.dirtyFields,d),ee?de(r.dirtyFields,d):K(r.dirtyFields,d,!0),H.dirtyFields=r.dirtyFields,_=_||(v.dirtyFields||j.dirtyFields)&&R!==!ee}if(y){const ee=A(r.touchedFields,d);ee||(K(r.touchedFields,d,y),H.touchedFields=r.touchedFields,_=_||(v.touchedFields||j.touchedFields)&&ee!==y)}_&&I&&h.state.next(H)}return _?H:{}},T=(d,f,y,P)=>{const I=A(r.errors,d),_=(v.isValid||j.isValid)&&we(f)&&r.isValid!==f;if(s.delayError&&y?(c=b(()=>p(d,y)),c(s.delayError)):(clearTimeout(m),c=null,y?K(r.errors,d,y):de(r.errors,d)),(y?!Ae(I,y):I)||!ve(P)||_){const R={...P,..._&&we(f)?{isValid:f}:{},errors:r.errors,name:d};r={...r,...R},h.state.next(R)}},$=async d=>(w(d,!0),await s.resolver(o,s.context,El(d||l.mount,n,s.criteriaMode,s.shouldUseNativeValidation))),Z=async d=>{const{errors:f}=await $(d);if(w(d),d)for(const y of d){const P=A(f,y);P?K(r.errors,y,P):de(r.errors,y)}else r.errors=f;return f},L=async(d,f,y={valid:!0})=>{for(const P in d){const I=d[P];if(I){const{_f:_,...R}=I;if(_){const H=l.array.has(_.name),ee=I._f&&_l(I._f);ee&&v.validatingFields&&w([_.name],!0);const Ce=await cs(I,l.disabled,o,N,s.shouldUseNativeValidation&&!f,H);if(ee&&v.validatingFields&&w([_.name]),Ce[_.name]&&(y.valid=!1,f))break;!f&&(A(Ce,_.name)?H?Dl(r.errors,Ce,_.name):K(r.errors,_.name,Ce[_.name]):de(r.errors,_.name))}!ve(R)&&await L(R,f,y)}}return y.valid},ne=()=>{for(const d of l.unMount){const f=A(n,d);f&&(f._f.refs?f._f.refs.every(y=>!gr(y)):!gr(f._f.ref))&&oe(d)}l.unMount=new Set},D=(d,f)=>!s.disabled&&(d&&f&&K(o,d,f),!Ae(Ye(),a)),O=(d,f,y)=>Sr(d,l,{...i.mount?o:ie(f)?a:Se(d)?{[d]:f}:f},y,f),z=d=>Ur(A(i.mount?o:a,d,s.shouldUnregister?A(a,d,[]):[])),q=(d,f,y={})=>{const P=A(n,d);let I=f;if(P){const _=P._f;_&&(!_.disabled&&K(o,d,Bn(f,_)),I=Gt(_.ref)&&je(f)?"":f,Fn(_.ref)?[..._.ref.options].forEach(R=>R.selected=I.includes(R.value)):_.refs?Dt(_.ref)?_.refs.forEach(R=>{(!R.defaultChecked||!R.disabled)&&(Array.isArray(I)?R.checked=!!I.find(H=>H===R.value):R.checked=I===R.value||!!I)}):_.refs.forEach(R=>R.checked=R.value===I):Hr(_.ref)?_.ref.value="":(_.ref.value=I,_.ref.type||h.state.next({name:d,values:fe(o)})))}(y.shouldDirty||y.shouldTouch)&&M(d,I,y.shouldTouch,y.shouldDirty,!0),y.shouldValidate&&Ee(d)},G=(d,f,y)=>{for(const P in f){if(!f.hasOwnProperty(P))return;const I=f[P],_=d+"."+P,R=A(n,_);(l.array.has(d)||me(I)||R&&!R._f)&&!Je(I)?G(_,I,y):q(_,I,y)}},X=(d,f,y={})=>{const P=A(n,d),I=l.array.has(d),_=fe(f);K(o,d,_),I?(h.array.next({name:d,values:fe(o)}),(v.isDirty||v.dirtyFields||j.isDirty||j.dirtyFields)&&y.shouldDirty&&h.state.next({name:d,dirtyFields:at(a,o),isDirty:D(d,_)})):P&&!P._f&&!je(_)?G(d,_,y):q(d,_,y),os(d,l)&&h.state.next({...r,name:d}),h.state.next({name:i.mount?d:void 0,values:fe(o)})},E=async d=>{i.mount=!0;const f=d.target;let y=f.name,P=!0;const I=A(n,y),_=ee=>{P=Number.isNaN(ee)||Je(ee)&&isNaN(ee.getTime())||Ae(ee,A(o,y,ee))},R=ns(s.mode),H=ns(s.reValidateMode);if(I){let ee,Ce;const Mt=f.type?ss(I._f):Rn(d),ze=d.type===qt.BLUR||d.type===qt.FOCUS_OUT,xa=!Tl(I._f)&&!s.resolver&&!A(r.errors,y)&&!I._f.deps||Pl(ze,A(r.touchedFields,y),r.isSubmitted,H,R),hr=os(y,l,ze);K(o,y,Mt),ze?(!f||!f.readOnly)&&(I._f.onBlur&&I._f.onBlur(d),c&&c(0)):I._f.onChange&&I._f.onChange(d);const pr=M(y,Mt,ze),ga=!ve(pr)||hr;if(!ze&&h.state.next({name:y,type:d.type,values:fe(o)}),xa)return(v.isValid||j.isValid)&&(s.mode==="onBlur"?ze&&k():ze||k()),ga&&h.state.next({name:y,...hr?{}:pr});if(!ze&&hr&&h.state.next({...r}),s.resolver){const{errors:Gr}=await $([y]);if(w([y]),_(Mt),P){const va=is(r.errors,n,y),Yr=is(Gr,n,va.name||y);ee=Yr.error,y=Yr.name,Ce=ve(Gr)}}else w([y],!0),ee=(await cs(I,l.disabled,o,N,s.shouldUseNativeValidation))[y],w([y]),_(Mt),P&&(ee?Ce=!1:(v.isValid||j.isValid)&&(Ce=await L(n,!0)));P&&(I._f.deps&&(!Array.isArray(I._f.deps)||I._f.deps.length>0)&&Ee(I._f.deps),T(y,Ce,ee,pr))}},B=(d,f)=>{if(A(r.errors,f)&&d.focus)return d.focus(),1},Ee=async(d,f={})=>{let y,P;const I=gt(d);if(s.resolver){const _=await Z(ie(d)?d:I);y=ve(_),P=d?!I.some(R=>A(_,R)):y}else d?(P=(await Promise.all(I.map(async _=>{const R=A(n,_);return await L(R&&R._f?{[_]:R}:R)}))).every(Boolean),!(!P&&!r.isValid)&&k()):P=y=await L(n);return h.state.next({...!Se(d)||(v.isValid||j.isValid)&&y!==r.isValid?{}:{name:d},...s.resolver||!d?{isValid:y}:{},errors:r.errors}),f.shouldFocus&&!P&&vt(n,B,d?I:l.mount),P},Ye=(d,f)=>{let y={...i.mount?o:a};return f&&(y=On(f.dirtyFields?r.dirtyFields:r.touchedFields,y)),ie(d)?y:Se(d)?A(y,d):d.map(P=>A(y,P))},et=(d,f)=>({invalid:!!A((f||r).errors,d),isDirty:!!A((f||r).dirtyFields,d),error:A((f||r).errors,d),isValidating:!!A(r.validatingFields,d),isTouched:!!A((f||r).touchedFields,d)}),mt=d=>{d&&gt(d).forEach(f=>de(r.errors,f)),h.state.next({errors:d?r.errors:{}})},De=(d,f,y)=>{const P=(A(n,d,{_f:{}})._f||{}).ref,I=A(r.errors,d)||{},{ref:_,message:R,type:H,...ee}=I;K(r.errors,d,{...ee,...f,ref:P}),h.state.next({name:d,errors:r.errors,isValid:!1}),y&&y.shouldFocus&&P&&P.focus&&P.focus()},tt=(d,f)=>ye(d)?h.state.subscribe({next:y=>"values"in y&&d(O(void 0,f),y)}):O(d,f,!0),Be=d=>h.state.subscribe({next:f=>{Al(d.name,f.name,d.exact)&&Il(f,d.formState||v,pa,d.reRenderRoot)&&d.callback({values:{...o},...r,...f,defaultValues:a})}}).unsubscribe,F=d=>(i.mount=!0,j={...j,...d.formState},Be({...d,formState:{...x,...d.formState}})),oe=(d,f={})=>{for(const y of d?gt(d):l.mount)l.mount.delete(y),l.array.delete(y),f.keepValue||(de(n,y),de(o,y)),!f.keepError&&de(r.errors,y),!f.keepDirty&&de(r.dirtyFields,y),!f.keepTouched&&de(r.touchedFields,y),!f.keepIsValidating&&de(r.validatingFields,y),!s.shouldUnregister&&!f.keepDefaultValue&&de(a,y);h.state.next({values:fe(o)}),h.state.next({...r,...f.keepDirty?{isDirty:D()}:{}}),!f.keepIsValid&&k()},xe=({disabled:d,name:f})=>{(we(d)&&i.mount||d||l.disabled.has(f))&&(d?l.disabled.add(f):l.disabled.delete(f))},Y=(d,f={})=>{let y=A(n,d);const P=we(f.disabled)||we(s.disabled);return K(n,d,{...y||{},_f:{...y&&y._f?y._f:{ref:{name:d}},name:d,mount:!0,...f}}),l.mount.add(d),y?xe({disabled:we(f.disabled)?f.disabled:s.disabled,name:d}):C(d,!0,f.value),{...P?{disabled:f.disabled||s.disabled}:{},...s.progressive?{required:!!f.required,min:ht(f.min),max:ht(f.max),minLength:ht(f.minLength),maxLength:ht(f.maxLength),pattern:ht(f.pattern)}:{},name:d,onChange:E,onBlur:E,ref:I=>{if(I){Y(d,f),y=A(n,d);const _=ie(I.value)&&I.querySelectorAll&&I.querySelectorAll("input,select,textarea")[0]||I,R=Nl(_),H=y._f.refs||[];if(R?H.find(ee=>ee===_):_===y._f.ref)return;K(n,d,{_f:{...y._f,...R?{refs:[...H.filter(gr),_,...Array.isArray(A(a,d))?[{}]:[]],ref:{type:_.type,name:d}}:{ref:_}}}),C(d,!1,void 0,_)}else y=A(n,d,{}),y._f&&(y._f.mount=!1),(s.shouldUnregister||f.shouldUnregister)&&!(Dn(l.array,d)&&i.action)&&l.unMount.add(d)}}},Q=()=>s.shouldFocusError&&vt(n,B,l.mount),ce=d=>{we(d)&&(h.state.next({disabled:d}),vt(n,(f,y)=>{const P=A(n,y);P&&(f.disabled=P._f.disabled||d,Array.isArray(P._f.refs)&&P._f.refs.forEach(I=>{I.disabled=P._f.disabled||d}))},0,!1))},Re=(d,f)=>async y=>{let P;y&&(y.preventDefault&&y.preventDefault(),y.persist&&y.persist());let I=fe(o);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:_,values:R}=await $();w(),r.errors=_,I=fe(R)}else await L(n);if(l.disabled.size)for(const _ of l.disabled)de(I,_);if(de(r.errors,"root"),ve(r.errors)){h.state.next({errors:{}});try{await d(I,y)}catch(_){P=_}}else f&&await f({...r.errors},y),Q(),setTimeout(Q);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ve(r.errors)&&!P,submitCount:r.submitCount+1,errors:r.errors}),P)throw P},Me=(d,f={})=>{A(n,d)&&(ie(f.defaultValue)?X(d,fe(A(a,d))):(X(d,f.defaultValue),K(a,d,fe(f.defaultValue))),f.keepTouched||de(r.touchedFields,d),f.keepDirty||(de(r.dirtyFields,d),r.isDirty=f.defaultValue?D(d,fe(A(a,d))):D()),f.keepError||(de(r.errors,d),v.isValid&&k()),h.state.next({...r}))},rt=(d,f={})=>{const y=d?fe(d):a,P=fe(y),I=ve(d),_=I?a:P;if(f.keepDefaultValues||(a=y),!f.keepValues){if(f.keepDirtyValues){const R=new Set([...l.mount,...Object.keys(at(a,o))]);for(const H of Array.from(R))A(r.dirtyFields,H)?K(_,H,A(o,H)):X(H,A(_,H))}else{if(Fr&&ie(d))for(const R of l.mount){const H=A(n,R);if(H&&H._f){const ee=Array.isArray(H._f.refs)?H._f.refs[0]:H._f.ref;if(Gt(ee)){const Ce=ee.closest("form");if(Ce){Ce.reset();break}}}}if(f.keepFieldsRef)for(const R of l.mount)X(R,A(_,R));else n={}}o=s.shouldUnregister?f.keepDefaultValues?fe(a):{}:fe(_),h.array.next({values:{..._}}),h.state.next({values:{..._}})}l={mount:f.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!v.isValid||!!f.keepIsValid||!!f.keepDirtyValues||!s.shouldUnregister&&!ve(_),i.watch=!!s.shouldUnregister,i.keepIsValid=!!f.keepIsValid,i.action=!1,f.keepErrors||(r.errors={}),h.state.next({submitCount:f.keepSubmitCount?r.submitCount:0,isDirty:I?!1:f.keepDirty?r.isDirty:!!(f.keepDefaultValues&&!Ae(d,a)),isSubmitted:f.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:I?{}:f.keepDirtyValues?f.keepDefaultValues&&o?at(a,o):r.dirtyFields:f.keepDefaultValues&&d?at(a,d):f.keepDirty?r.dirtyFields:{},touchedFields:f.keepTouched?r.touchedFields:{},errors:f.keepErrors?r.errors:{},isSubmitSuccessful:f.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},st=(d,f)=>rt(ye(d)?d(o):d,{...s.resetOptions,...f}),ft=(d,f={})=>{const y=A(n,d),P=y&&y._f;if(P){const I=P.refs?P.refs[0]:P.ref;I.focus&&setTimeout(()=>{I.focus(),f.shouldSelect&&ye(I.select)&&I.select()})}},pa=d=>{r={...r,...d}},qr={control:{register:Y,unregister:oe,getFieldState:et,handleSubmit:Re,setError:De,_subscribe:Be,_runSchema:$,_updateIsValidating:w,_focusError:Q,_getWatch:O,_getDirty:D,_setValid:k,_setFieldArray:g,_setDisabledField:xe,_setErrors:S,_getFieldArray:z,_reset:rt,_resetDefaultValues:()=>ye(s.defaultValues)&&s.defaultValues().then(d=>{st(d,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:ne,_disableForm:ce,_subjects:h,_proxyFormState:v,get _fields(){return n},get _formValues(){return o},get _state(){return i},set _state(d){i=d},get _defaultValues(){return a},get _names(){return l},set _names(d){l=d},get _formState(){return r},get _options(){return s},set _options(d){s={...s,...d}}},subscribe:F,trigger:Ee,register:Y,handleSubmit:Re,watch:tt,setValue:X,getValues:Ye,reset:st,resetField:Me,clearErrors:mt,unregister:oe,setError:De,setFocus:ft,getFieldState:et};return{...qr,formControl:qr}}function lr(t={}){const s=U.useRef(void 0),r=U.useRef(void 0),[n,a]=U.useState({isDirty:!1,isValidating:!1,isLoading:ye(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ye(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:n},t.defaultValues&&!ye(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:i,...l}=Ll(t);s.current={...l,formState:n}}const o=s.current.control;return o._options=t,zr(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),U.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),U.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),U.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),U.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),U.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==n.isDirty&&o._subjects.state.next({isDirty:i})}},[o,n.isDirty]),U.useEffect(()=>{var i;t.values&&!Ae(t.values,r.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((i=o._options.resetOptions)===null||i===void 0)&&i.keepIsValid||o._setValid(),r.current=t.values,a(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),U.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),s.current.formState=Mn(n,o),s.current}const ds=(t,s,r)=>{if(t&&"reportValidity"in t){const n=A(r,s);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},Er=(t,s)=>{for(const r in s.fields){const n=s.fields[r];n&&n.ref&&"reportValidity"in n.ref?ds(n.ref,r,t):n&&n.refs&&n.refs.forEach(a=>ds(a,r,t))}},us=(t,s)=>{s.shouldUseNativeValidation&&Er(t,s);const r={};for(const n in t){const a=A(s.fields,n),o=Object.assign(t[n]||{},{ref:a&&a.ref});if(Ol(s.names||Object.keys(t),n)){const i=Object.assign({},A(r,n));K(i,"root",o),K(r,n,i)}else K(r,n,o)}return r},Ol=(t,s)=>{const r=ms(s);return t.some(n=>ms(n).match(`^${r}\\.\\d+`))};function ms(t){return t.replace(/\]|\[/g,"")}function $n(t,s,r){function n(l,c){var m;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(m=l._zod).traits??(m.traits=new Set),l._zod.traits.add(t),s(l,c);for(const x in i.prototype)x in l||Object.defineProperty(l,x,{value:i.prototype[x].bind(l)});l._zod.constr=i,l._zod.def=c}const a=r?.Parent??Object;class o extends a{}Object.defineProperty(o,"name",{value:t});function i(l){var c;const m=r?.Parent?new o:this;n(m,l),(c=m._zod).deferred??(c.deferred=[]);for(const x of m._zod.deferred)x();return m}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:l=>r?.Parent&&l instanceof r.Parent?!0:l?._zod?.traits?.has(t)}),Object.defineProperty(i,"name",{value:t}),i}class Fl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ul={};function Hn(t){return Ul}function Vl(t,s){return typeof s=="bigint"?s.toString():s}const Kn=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Ot(t){return typeof t=="string"?t:t?.message}function Wn(t,s,r){const n={...t,path:t.path??[]};if(!t.message){const a=Ot(t.inst?._zod.def?.error?.(t))??Ot(s?.error?.(t))??Ot(r.customError?.(t))??Ot(r.localeError?.(t))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,s?.reportInput||delete n.input,n}const qn=(t,s)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:s,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(s,Vl,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Bl=$n("$ZodError",qn),Gn=$n("$ZodError",qn,{Parent:Error}),zl=t=>(s,r,n,a)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=s._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new Fl;if(i.issues.length){const l=new(a?.Err??t)(i.issues.map(c=>Wn(c,o,Hn())));throw Kn(l,a?.callee),l}return i.value},$l=zl(Gn),Hl=t=>async(s,r,n,a)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=s._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const l=new(a?.Err??t)(i.issues.map(c=>Wn(c,o,Hn())));throw Kn(l,a?.callee),l}return i.value},Kl=Hl(Gn);function fs(t,s){try{var r=t()}catch(n){return s(n)}return r&&r.then?r.then(void 0,s):r}function Wl(t,s){for(var r={};t.length;){var n=t[0],a=n.code,o=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[i]={message:l.message,type:l.code}}else r[i]={message:o,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(x){return x.errors.forEach(function(v){return t.push(v)})}),s){var c=r[i].types,m=c&&c[n.code];r[i]=$r(i,s,r,a,m?[].concat(m,n.message):n.message)}t.shift()}return r}function ql(t,s){for(var r={};t.length;){var n=t[0],a=n.code,o=n.message,i=n.path.join(".");if(!r[i])if(n.code==="invalid_union"&&n.errors.length>0){var l=n.errors[0][0];r[i]={message:l.message,type:l.code}}else r[i]={message:o,type:a};if(n.code==="invalid_union"&&n.errors.forEach(function(x){return x.forEach(function(v){return t.push(v)})}),s){var c=r[i].types,m=c&&c[n.code];r[i]=$r(i,s,r,a,m?[].concat(m,n.message):n.message)}t.shift()}return r}function cr(t,s,r){if(r===void 0&&(r={}),(function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def})(t))return function(n,a,o){try{return Promise.resolve(fs(function(){return Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,s)).then(function(i){return o.shouldUseNativeValidation&&Er({},o),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if((function(l){return Array.isArray(l?.issues)})(i))return{values:{},errors:us(Wl(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};if((function(n){return"_zod"in n&&typeof n._zod=="object"})(t))return function(n,a,o){try{return Promise.resolve(fs(function(){return Promise.resolve((r.mode==="sync"?$l:Kl)(t,n,s)).then(function(i){return o.shouldUseNativeValidation&&Er({},o),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if((function(l){return l instanceof Bl})(i))return{values:{},errors:us(ql(i.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}var dr="Checkbox",[Gl]=Jt(dr),[Yl,Wr]=Gl(dr);function Jl(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:c,required:m,value:x="on",internal_do_not_use_render:v}=t,[j,h]=Vt({prop:r,defaultProp:a??!1,onChange:c,caller:dr}),[N,b]=u.useState(null),[k,w]=u.useState(null),g=u.useRef(!1),p=N?!!i||!!N.closest("form"):!0,S={checked:j,disabled:o,setChecked:h,control:N,setControl:b,name:l,form:i,value:x,hasConsumerStoppedPropagationRef:g,required:m,defaultChecked:He(a)?!1:a,isFormControl:p,bubbleInput:k,setBubbleInput:w};return e.jsx(Yl,{scope:s,...S,children:Zl(v)?v(S):n})}var Yn="CheckboxTrigger",Jn=u.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:o,value:i,disabled:l,checked:c,required:m,setControl:x,setChecked:v,hasConsumerStoppedPropagationRef:j,isFormControl:h,bubbleInput:N}=Wr(Yn,t),b=ge(a,x),k=u.useRef(c);return u.useEffect(()=>{const w=o?.form;if(w){const g=()=>v(k.current);return w.addEventListener("reset",g),()=>w.removeEventListener("reset",g)}},[o,v]),e.jsx(he.button,{type:"button",role:"checkbox","aria-checked":He(c)?"mixed":c,"aria-required":m,"data-state":ra(c),"data-disabled":l?"":void 0,disabled:l,value:i,...n,ref:b,onKeyDown:le(s,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:le(r,w=>{v(g=>He(g)?!0:!g),N&&h&&(j.current=w.isPropagationStopped(),j.current||w.stopPropagation())})})});Jn.displayName=Yn;var Zn=u.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:m,form:x,...v}=t;return e.jsx(Jl,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:m,name:n,form:x,value:c,internal_do_not_use_render:({isFormControl:j})=>e.jsxs(e.Fragment,{children:[e.jsx(Jn,{...v,ref:s,__scopeCheckbox:r}),j&&e.jsx(ta,{__scopeCheckbox:r})]})})});Zn.displayName=dr;var Xn="CheckboxIndicator",Qn=u.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,o=Wr(Xn,r);return e.jsx(Oa,{present:n||He(o.checked)||o.checked===!0,children:e.jsx(he.span,{"data-state":ra(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});Qn.displayName=Xn;var ea="CheckboxBubbleInput",ta=u.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:c,name:m,value:x,form:v,bubbleInput:j,setBubbleInput:h}=Wr(ea,t),N=ge(r,h),b=Lr(o),k=Fs(n);u.useEffect(()=>{const g=j;if(!g)return;const p=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(p,"checked").set,M=!a.current;if(b!==o&&C){const T=new Event("click",{bubbles:M});g.indeterminate=He(o),C.call(g,He(o)?!1:o),g.dispatchEvent(T)}},[j,b,o,a]);const w=u.useRef(He(o)?!1:o);return e.jsx(he.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:l,disabled:c,name:m,value:x,form:v,...s,tabIndex:-1,ref:N,style:{...s.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ta.displayName=ea;function Zl(t){return typeof t=="function"}function He(t){return t==="indeterminate"}function ra(t){return He(t)?"indeterminate":t?"checked":"unchecked"}function sa({className:t,...s}){return e.jsx(Zn,{"data-slot":"checkbox",className:W("peer size-4 shrink-0 rounded-[4px] border border-input shadow-xs outline-none transition-shadow focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[state=checked]:border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:bg-input/30 dark:data-[state=checked]:bg-primary dark:aria-invalid:ring-destructive/40",t),...s,children:e.jsx(Qn,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:e.jsx(_t,{className:"size-3.5"})})})}const ur=yl,na=u.createContext({}),te=({...t})=>e.jsx(na.Provider,{value:{name:t.name},children:e.jsx(wl,{...t})}),mr=()=>{const t=u.useContext(na),s=u.useContext(aa),{getFieldState:r}=ir(),n=Ln({name:t.name}),a=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=s;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},aa=u.createContext({});function re({className:t,...s}){const r=u.useId();return e.jsx(aa.Provider,{value:{id:r},children:e.jsx("div",{"data-slot":"form-item",className:W("grid gap-2",t),...s})})}function se({className:t,...s}){const{error:r,formItemId:n}=mr();return e.jsx(xt,{"data-slot":"form-label","data-error":!!r,className:W("data-[error=true]:text-destructive",t),htmlFor:n,...s})}function J({...t}){const{error:s,formItemId:r,formDescriptionId:n,formMessageId:a}=mr();return e.jsx(Fa,{"data-slot":"form-control",id:r,"aria-describedby":s?`${n} ${a}`:`${n}`,"aria-invalid":!!s,...t})}function Fe({className:t,...s}){const{formDescriptionId:r}=mr();return e.jsx("p",{"data-slot":"form-description",id:r,className:W("text-muted-foreground text-sm",t),...s})}function ae({className:t,...s}){const{error:r,formMessageId:n}=mr(),a=r?String(r?.message??""):s.children;return a?e.jsx("p",{"data-slot":"form-message",id:n,className:W("text-destructive text-sm",t),...s,children:a}):null}const oa=[{id:"openai",name:"OpenAI",defaultBaseUrl:"https://api.openai.com/v1",defaultModelId:"gpt-4",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://platform.openai.com/api-keys",setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#openai"},{id:"openai-compatible",name:"OpenAI Compatible",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:128e3},{id:"anthropic",name:"Anthropic",defaultBaseUrl:"https://api.anthropic.com/v1",defaultModelId:"claude-3-5-sonnet-20241022",supportsImages:!0,contextWindow:2e5,apiKeyUrl:"https://console.anthropic.com/settings/keys",setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#claude"},{id:"google",name:"Gemini",defaultBaseUrl:"https://generativelanguage.googleapis.com/v1beta",defaultModelId:"gemini-1.5-pro",supportsImages:!0,contextWindow:1e6,apiKeyUrl:"https://aistudio.google.com/app/apikey",setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#gemini"},{id:"ollama",name:"Ollama",defaultBaseUrl:"http://localhost:11434/v1",defaultModelId:"llama3.2",supportsImages:!1,contextWindow:128e3,setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#ollama"},{id:"openrouter",name:"OpenRouter",defaultBaseUrl:"https://openrouter.ai/api/v1",defaultModelId:"openai/gpt-4-turbo",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://openrouter.ai/keys",setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#openrouter"},{id:"lmstudio",name:"LM Studio",defaultBaseUrl:"http://localhost:1234/v1",defaultModelId:"local-model",supportsImages:!1,contextWindow:32e3,setupGuideUrl:"https://docs.browseros.com/features/bring-your-own-llm#lmstudio"},{id:"azure",name:"Azure",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/OpenAI"},{id:"bedrock",name:"AWS Bedrock",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:2e5,setupGuideUrl:"https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html"}],Xl=[{value:"anthropic",label:"Anthropic"},{value:"openai",label:"OpenAI"},{value:"openai-compatible",label:"OpenAI Compatible"},{value:"google",label:"Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"azure",label:"Azure"},{value:"ollama",label:"Ollama"},{value:"lmstudio",label:"LM Studio"},{value:"bedrock",label:"AWS Bedrock"},{value:"browseros",label:"BrowserOS"}],Ql=t=>oa.find(s=>s.id===t),ec={anthropic:"https://api.anthropic.com/v1",openai:"https://api.openai.com/v1","openai-compatible":"",google:"https://generativelanguage.googleapis.com/v1beta",openrouter:"https://openrouter.ai/api/v1",azure:"",ollama:"http://localhost:11434/v1",lmstudio:"http://localhost:1234/v1",bedrock:"",browseros:""},Ft=t=>ec[t]||"",tc={anthropic:[{modelId:"claude-opus-4-5-20251101",contextLength:2e5},{modelId:"claude-haiku-4-5-20251001",contextLength:2e5},{modelId:"claude-sonnet-4-5-20250929",contextLength:2e5},{modelId:"claude-sonnet-4-20250514",contextLength:2e5},{modelId:"claude-opus-4-20250514",contextLength:2e5},{modelId:"claude-3-7-sonnet-20250219",contextLength:2e5},{modelId:"claude-3-5-haiku-20241022",contextLength:2e5}],openai:[{modelId:"gpt-5.2",contextLength:4e5},{modelId:"gpt-5.2-pro",contextLength:4e5},{modelId:"gpt-5",contextLength:4e5},{modelId:"gpt-5-mini",contextLength:4e5},{modelId:"gpt-5-nano",contextLength:4e5},{modelId:"gpt-4.1",contextLength:1e6},{modelId:"gpt-4.1-mini",contextLength:1e6},{modelId:"o4-mini",contextLength:2e5},{modelId:"o3-mini",contextLength:2e5},{modelId:"gpt-4o",contextLength:128e3},{modelId:"gpt-4o-mini",contextLength:128e3}],"openai-compatible":[],google:[{modelId:"gemini-3-pro-preview",contextLength:1048576},{modelId:"gemini-3-flash-preview",contextLength:1048576},{modelId:"gemini-2.5-flash",contextLength:1048576},{modelId:"gemini-2.5-pro",contextLength:1048576}],openrouter:[{modelId:"google/gemini-3-pro-preview",contextLength:1048576},{modelId:"google/gemini-3-flash-preview",contextLength:1048576},{modelId:"google/gemini-2.5-flash",contextLength:1048576},{modelId:"anthropic/claude-opus-4.5",contextLength:2e5},{modelId:"anthropic/claude-haiku-4.5",contextLength:2e5},{modelId:"anthropic/claude-sonnet-4.5",contextLength:2e5},{modelId:"anthropic/claude-sonnet-4",contextLength:2e5},{modelId:"anthropic/claude-3.7-sonnet",contextLength:2e5},{modelId:"openai/gpt-4o",contextLength:128e3},{modelId:"openai/gpt-oss-120b",contextLength:128e3},{modelId:"openai/gpt-oss-20b",contextLength:128e3},{modelId:"qwen/qwen3-14b",contextLength:131072},{modelId:"qwen/qwen3-8b",contextLength:131072}],azure:[],ollama:[{modelId:"qwen3:4b",contextLength:262144},{modelId:"qwen3:8b",contextLength:40960},{modelId:"qwen3:14b",contextLength:40960},{modelId:"gpt-oss:20b",contextLength:128e3},{modelId:"gpt-oss:120b",contextLength:128e3}],lmstudio:[{modelId:"openai/gpt-oss-20b",contextLength:128e3},{modelId:"openai/gpt-oss-120b",contextLength:128e3},{modelId:"qwen/qwen3-vl-8b",contextLength:131072}],bedrock:[],browseros:[]};function ia(t){return tc[t]||[]}function rc(t){const r=ia(t).map(n=>n.modelId);return r.length>0?[...r,"custom"]:["custom"]}function sc(t,s){return ia(t).find(a=>a.modelId===s)?.contextLength}const nc=As(["anthropic","openai","openai-compatible","google","openrouter","azure","ollama","lmstudio","bedrock","browseros"]),ac=Xt({type:nc,name:pe().min(1,"Provider name is required").max(50),baseUrl:pe().optional(),modelId:pe().min(1,"Model ID is required"),apiKey:pe().optional(),supportsImages:Ps(),contextWindow:vr().int().min(1e3).max(2e6),temperature:vr().min(0).max(2),resourceName:pe().optional(),accessKeyId:pe().optional(),secretAccessKey:pe().optional(),region:pe().optional(),sessionToken:pe().optional()}).superRefine((t,s)=>{t.type==="azure"?(!t.resourceName&&!t.baseUrl&&s.addIssue({code:Oe.custom,message:"Either Resource Name or Base URL is required",path:["resourceName"]}),t.apiKey||s.addIssue({code:Oe.custom,message:"API Key is required for Azure",path:["apiKey"]})):t.type==="bedrock"?(t.accessKeyId||s.addIssue({code:Oe.custom,message:"Access Key ID is required",path:["accessKeyId"]}),t.secretAccessKey||s.addIssue({code:Oe.custom,message:"Secret Access Key is required",path:["secretAccessKey"]}),t.region||s.addIssue({code:Oe.custom,message:"Region is required",path:["region"]})):t.baseUrl?/^https?:\/\/.+/.test(t.baseUrl)||s.addIssue({code:Oe.custom,message:"Must be a valid URL",path:["baseUrl"]}):s.addIssue({code:Oe.custom,message:"Base URL is required",path:["baseUrl"]})}),hs=({open:t,onOpenChange:s,initialValues:r,onSave:n})=>{const[a,o]=u.useState(!1),[i,l]=u.useState(!1),[c,m]=u.useState(null),{supports:x}=Dr(),{baseUrl:v}=ct(),j=Xl.filter(E=>E.value==="openai-compatible"?x(Bt.OPENAI_COMPATIBLE_SUPPORT):!0),h=lr({resolver:cr(ac),defaultValues:{type:r?.type||"openai",name:r?.name||"",baseUrl:r?.baseUrl||Ft("openai"),modelId:r?.modelId||"",apiKey:r?.apiKey||"",supportsImages:r?.supportsImages??!1,contextWindow:r?.contextWindow||128e3,temperature:r?.temperature??.2,resourceName:r?.resourceName||"",accessKeyId:r?.accessKeyId||"",secretAccessKey:r?.secretAccessKey||"",region:r?.region||"",sessionToken:r?.sessionToken||""}}),N=h.watch("type"),b=h.watch("modelId"),k=h.watch("apiKey"),w=h.watch("baseUrl"),g=h.watch("resourceName"),p=h.watch("accessKeyId"),S=h.watch("secretAccessKey"),C=h.watch("region"),M=h.watch("sessionToken");u.useEffect(()=>{m(null)},[N,b,k,w,g,p,S,C,M]);const T=rc(N),$=E=>{h.setValue("type",E);const B=Ft(E);B&&h.setValue("baseUrl",B),h.setValue("modelId",""),o(!1)};u.useEffect(()=>{if(!r?.id&&b&&b!=="custom"){const E=sc(N,b);E&&h.setValue("contextWindow",E)}},[b,N,h,r?.id]);const Z=E=>{E==="custom"?(o(!0),h.setValue("modelId","")):(o(!1),h.setValue("modelId",E))};u.useEffect(()=>{r&&(h.reset({type:r.type||"openai",name:r.name||"",baseUrl:r.baseUrl||Ft(r.type||"openai"),modelId:r.modelId||"",apiKey:r.apiKey||"",supportsImages:r.supportsImages??!1,contextWindow:r.contextWindow||128e3,temperature:r.temperature??.2,resourceName:r.resourceName||"",accessKeyId:r.accessKeyId||"",secretAccessKey:r.secretAccessKey||"",region:r.region||"",sessionToken:r.sessionToken||""}),o(!1))},[r,h]),u.useEffect(()=>{if(t&&!r){const E="openai";h.reset({type:E,name:"",baseUrl:Ft(E),modelId:"",apiKey:"",supportsImages:!1,contextWindow:128e3,temperature:.2,resourceName:"",accessKeyId:"",secretAccessKey:"",region:"",sessionToken:""}),o(!1)}m(null)},[t,r,h]);const L=async E=>{const B=!r?.id,Ee={id:r?.id||crypto.randomUUID(),...E,createdAt:r?.createdAt||Date.now(),updatedAt:Date.now()};await n(Ee),B&&Ne(wo,{provider_type:E.type,model:E.modelId}),h.reset(),s(!1)},ne=()=>b?N==="azure"?!!(g||w)&&!!k:N==="bedrock"?!!p&&!!S&&!!C:!(!w||!["ollama","lmstudio"].includes(N)&&!k):!1,D=async()=>{if(!v){m({success:!1,message:"Server URL not available"});return}l(!0),m(null);try{const E=h.getValues(),B=await nn({id:"test",type:E.type,name:E.name||"Test",baseUrl:E.baseUrl,modelId:E.modelId,apiKey:E.apiKey,supportsImages:E.supportsImages,contextWindow:E.contextWindow,temperature:E.temperature,createdAt:Date.now(),updatedAt:Date.now(),resourceName:E.resourceName,accessKeyId:E.accessKeyId,secretAccessKey:E.secretAccessKey,region:E.region,sessionToken:E.sessionToken},v);m(B)}catch(E){m({success:!1,message:E instanceof Error?E.message:"Test failed"})}finally{l(!1)}},O=Ql(N),z=O?.setupGuideUrl,q=O?.name,G=E=>{E.preventDefault(),z&&chrome.tabs.create({url:z})},X=()=>N==="azure"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:h.control,name:"resourceName",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Resource Name *"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"your-resource-name",...E})}),e.jsx(Fe,{children:"Azure OpenAI resource name"}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"baseUrl",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Base URL Override"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"Optional custom URL",...E})}),e.jsx(Fe,{children:"Overrides resource name if set"}),e.jsx(ae,{})]})})]}),e.jsx(te,{control:h.control,name:"apiKey",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"API Key *"}),e.jsx(J,{children:e.jsx(ue,{type:"password",placeholder:"Enter your Azure API key",...E})}),e.jsx(ae,{})]})})]}):N==="bedrock"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:h.control,name:"accessKeyId",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Access Key ID *"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"AKIA...",...E})}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"secretAccessKey",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Secret Access Key *"}),e.jsx(J,{children:e.jsx(ue,{type:"password",placeholder:"Enter your secret access key",...E})}),e.jsx(ae,{})]})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:h.control,name:"region",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Region *"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"us-east-1",...E})}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"sessionToken",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Session Token"}),e.jsx(J,{children:e.jsx(ue,{type:"password",placeholder:"Optional (for STS credentials)",...E})}),e.jsx(Fe,{children:"Required for temporary credentials"}),e.jsx(ae,{})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{control:h.control,name:"baseUrl",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Base URL *"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"https://api.openai.com/v1",...E})}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"apiKey",render:({field:E})=>{const B=["ollama","lmstudio"].includes(N);return e.jsxs(re,{children:[e.jsxs(se,{children:["API Key",B?"":" *"]}),e.jsx(J,{children:e.jsx(ue,{type:"password",placeholder:B?"Enter your API key (optional)":"Enter your API key",...E})}),e.jsxs(Fe,{children:["Your API key is encrypted and stored locally."," ",z&&e.jsxs("a",{href:z,onClick:G,className:"inline-flex cursor-pointer items-center gap-1 text-primary hover:underline",children:[e.jsx($s,{className:"h-3 w-3"}),q," setup guide"]})]}),e.jsx(ae,{})]})}})]});return e.jsx(Tt,{open:t,onOpenChange:s,children:e.jsxs(It,{className:"sm:max-w-2xl",children:[e.jsxs(At,{children:[e.jsx(Pt,{children:r?.id?"Edit Provider":"Configure New Provider"}),e.jsx(Rt,{children:r?.id?"Update your LLM provider configuration.":"Add a new LLM provider configuration with API key and model settings."})]}),e.jsx(ur,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(L),className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:h.control,name:"type",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Provider Type *"}),e.jsxs($t,{onValueChange:B=>$(B),value:E.value,children:[e.jsx(J,{children:e.jsx(Kt,{className:"w-full",children:e.jsx(Ht,{placeholder:"Select provider type"})})}),e.jsx(Wt,{children:j.map(B=>e.jsx(it,{value:B.value,children:B.label},B.value))})]}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"name",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Provider Name *"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"e.g., Work OpenAI",...E})}),e.jsx(ae,{})]})})]}),X(),e.jsx(te,{control:h.control,name:"modelId",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Model *"}),a||T.length===1?e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx(ue,{placeholder:N==="azure"?"Enter your deployment name":N==="bedrock"?"e.g., anthropic.claude-3-5-sonnet-20241022-v2:0":"Enter custom model ID",...E})}),T.length>1&&e.jsx(V,{type:"button",variant:"link",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>o(!1),children:"← Back to model list"})]}):e.jsxs($t,{onValueChange:Z,value:E.value,children:[e.jsx(J,{children:e.jsx(Kt,{className:"w-full",children:e.jsx(Ht,{placeholder:"Select a model"})})}),e.jsx(Wt,{children:T.map(B=>e.jsx(it,{value:B,children:B==="custom"?"+ Custom model":B},B))})]}),e.jsx(ae,{})]})}),e.jsxs("div",{className:"space-y-4 border-border border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Model Configuration"}),e.jsx(te,{control:h.control,name:"supportsImages",render:({field:E})=>e.jsxs(re,{className:"flex items-center gap-2 space-y-0",children:[e.jsx(J,{children:e.jsx(sa,{checked:E.value,onCheckedChange:E.onChange})}),e.jsx(se,{className:"font-normal",children:"Supports Images"})]})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:h.control,name:"contextWindow",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Context Window Size"}),e.jsx(J,{children:e.jsx(ue,{type:"number",...E,onChange:B=>E.onChange(Number(B.target.value))})}),e.jsx(Fe,{children:"Auto-filled based on model"}),e.jsx(ae,{})]})}),e.jsx(te,{control:h.control,name:"temperature",render:({field:E})=>e.jsxs(re,{children:[e.jsx(se,{children:"Temperature (0-2)"}),e.jsx(J,{children:e.jsx(ue,{type:"number",step:"0.1",min:"0",max:"2",...E,onChange:B=>E.onChange(Number(B.target.value))})}),e.jsx(Fe,{children:"Controls response randomness"}),e.jsx(ae,{})]})})]})]}),c&&e.jsxs("div",{className:`flex items-center gap-2 rounded-lg border p-3 text-sm ${c.success?"border-green-200 bg-green-50 text-green-700 dark:border-green-800 dark:bg-green-950 dark:text-green-300":"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-950 dark:text-red-300"}`,children:[c.success?e.jsx(Ar,{className:"h-4 w-4 shrink-0"}):e.jsx(Us,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"flex-1",children:c.message}),c.responseTime&&e.jsxs("span",{className:"text-xs opacity-70",children:[c.responseTime,"ms"]})]}),e.jsxs(Zt,{className:"gap-3",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(V,{type:"button",variant:"outline",onClick:D,disabled:!ne()||i,children:[i&&e.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Testing...":"Test"]}),e.jsx(V,{type:"submit",disabled:i,children:r?.id?"Update":"Save"})]})]})})]})})},oc=({template:t,onUseTemplate:s})=>e.jsxs("button",{type:"button",onClick:()=>s(t),className:"group flex w-full items-center justify-between rounded-lg border border-border bg-background p-4 text-left transition-all hover:border-[var(--accent-orange)] hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 text-accent-orange/70 transition-colors group-hover:text-accent-orange",children:[e.jsx(Is,{type:t.id,size:28}),e.jsx("span",{className:"font-medium text-foreground",children:t.name})]}),e.jsx(Ms,{variant:"outline",className:"rounded-md px-3 py-1 transition-colors group-hover:border-[var(--accent-orange)] group-hover:text-[var(--accent-orange)]",children:"USE"})]}),ic=({onUseTemplate:t})=>{const{supports:s}=Dr(),r=oa.filter(n=>n.id==="openai-compatible"?s(Bt.OPENAI_COMPATIBLE_SUPPORT):!0);return e.jsx(Qt,{defaultOpen:!0,className:"group/collapsible",children:e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsxs(er,{className:"mb-4 flex w-full items-center justify-between text-left",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Quick provider templates"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[r.length," templates available"]})]}),e.jsx(dt,{className:W("h-5 w-5 transition-transform","group-data-[state=open]/collapsible:rotate-180")})]}),e.jsx(tr,{children:e.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:r.map(n=>e.jsx(oc,{template:n,onUseTemplate:t},n.id))})})]})})},ps=()=>{const{providers:t,defaultProviderId:s,saveProvider:r,setDefaultProvider:n,deleteProvider:a}=to(),{baseUrl:o}=ct(),[i,l]=u.useState(!1),[c,m]=u.useState(!1),[x,v]=u.useState(),[j,h]=u.useState(null),[N,b]=u.useState(null),[k,w]=u.useState(null),g=()=>{v(void 0),l(!0)},p=L=>{v({type:L.id,name:L.name,baseUrl:L.defaultBaseUrl,modelId:L.defaultModelId,supportsImages:L.supportsImages,contextWindow:L.contextWindow,temperature:.2}),l(!0)},S=L=>{h(L),m(!0)},C=L=>{b(L)},M=async()=>{N&&(await a(N.id),b(null))},T=async L=>{await r(L)},$=L=>{n(L)},Z=async L=>{if(!o){Ue.error("Test Failed",{description:e.jsx("span",{className:"text-red-600 text-sm dark:text-red-400",children:"Server URL not available"}),duration:3e3});return}w(L.id);try{const ne=await nn(L,o);ne.success?Ue.success("Test Successful",{description:e.jsx("span",{className:"text-green-600 text-sm dark:text-green-400",children:ne.message}),duration:3e3}):Ue.error("Test Failed",{description:e.jsx("span",{className:"text-red-600 text-sm dark:text-red-400",children:ne.message}),duration:3e3})}catch(ne){Ue.error("Test Failed",{description:e.jsx("span",{className:"text-red-600 text-sm dark:text-red-400",children:ne instanceof Error?ne.message:"Unknown error"}),duration:3e3})}w(null)};return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(xl,{providers:t,defaultProviderId:s,onDefaultProviderChange:n,onAddProvider:g}),e.jsx(ic,{onUseTemplate:p}),e.jsx(Pi,{providers:t,selectedProviderId:s,testingProviderId:k,onSelectProvider:$,onTestProvider:Z,onEditProvider:S,onDeleteProvider:C}),e.jsx(hs,{open:i,onOpenChange:l,initialValues:x,onSave:T}),e.jsx(hs,{open:c,onOpenChange:m,initialValues:j??void 0,onSave:T}),e.jsx(bt,{open:!!N,onOpenChange:L=>!L&&b(null),children:e.jsxs(jt,{children:[e.jsxs(wt,{children:[e.jsx(St,{children:"Delete Provider"}),e.jsxs(Ct,{children:['Are you sure you want to delete "',N?.name,'"? This action cannot be undone.']})]}),e.jsxs(Nt,{children:[e.jsx(Et,{children:"Cancel"}),e.jsx(kt,{onClick:M,children:"Delete"})]})]})})]})},lc=Xt({name:pe().min(1,"Server name is required"),url:pe().url("Please enter a valid URL"),description:pe().optional()}),cc=({open:t,onOpenChange:s,onAddServer:r})=>{const n=lr({resolver:cr(lc),defaultValues:{name:"",url:"",description:""}}),a=i=>{i||n.reset(),s(i)},o=i=>{r({name:i.name,url:i.url,description:i.description??""}),n.reset(),s(!1)};return e.jsx(Tt,{open:t,onOpenChange:a,children:e.jsxs(It,{className:"max-w-md",children:[e.jsxs(At,{children:[e.jsx(Pt,{children:"Add Custom MCP Server"}),e.jsx(Rt,{children:"Configure your custom MCP server connection"})]}),e.jsx(ur,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(o),className:"space-y-4",children:[e.jsx(te,{control:n.control,name:"name",render:({field:i})=>e.jsxs(re,{children:[e.jsx(se,{children:"Server Name"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"My Custom MCP",...i})}),e.jsx(ae,{})]})}),e.jsx(te,{control:n.control,name:"url",render:({field:i})=>e.jsxs(re,{children:[e.jsx(se,{children:"Server URL"}),e.jsx(Fe,{children:"(only supports HTTP)"}),e.jsx(J,{children:e.jsx(ue,{type:"url",placeholder:"http://mcp.example.com",...i})}),e.jsx(ae,{})]})}),e.jsx(te,{control:n.control,name:"description",render:({field:i})=>e.jsxs(re,{children:[e.jsx(se,{children:"Description (Optional)"}),e.jsx(J,{children:e.jsx(Pr,{placeholder:"Describe what this server does...",rows:3,className:"resize-none",...i})}),e.jsx(ae,{})]})}),e.jsxs(Zt,{children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(V,{type:"submit",className:"bg-[var(--accent-orange)] text-white hover:bg-[var(--accent-orange-bright)]",children:"Add Server"})]})]})})]})})},dc=({open:t,onOpenChange:s,serversList:r,onAddServer:n})=>{const a=o=>{n(o),s(!1)};return e.jsx(Tt,{open:t,onOpenChange:s,children:e.jsxs(It,{className:"max-w-md",children:[e.jsxs(At,{children:[e.jsx(Pt,{children:"Enable built-in MCP Server"}),e.jsx(Rt,{children:"Select a built-in MCP server to enable"})]}),e.jsx("div",{className:"styled-scrollbar max-h-[400px] w-full space-y-2 overflow-y-auto",children:r?.map(o=>{const{name:i,description:l}=o;return e.jsxs(V,{variant:"outline",onClick:()=>a(o),className:"group h-auto w-full items-center gap-3 p-3 hover:border-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/5",children:[e.jsx(lt,{className:"h-5 w-5 shrink-0 text-muted-foreground"}),e.jsxs("div",{className:"flex w-[calc(100%-64px)] flex-1 flex-col items-start gap-1",children:[e.jsx("span",{className:"font-medium",children:i}),l&&e.jsx("p",{className:"line-clamp-1 w-full text-ellipsis text-left text-muted-foreground text-xs",children:l})]}),e.jsx(We,{className:"h-4 w-4 shrink-0 text-muted-foreground"})]},i)})??null})]})})},uc=({availableServers:t,onAddServer:s,isLoading:r})=>{const[n,a]=u.useState(!1);return e.jsx(Qt,{open:n,onOpenChange:a,children:e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsxs(er,{className:"flex w-full cursor-pointer items-center justify-between hover:opacity-50",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Built-in Servers"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r?"Loading...":`${t?.length} servers available`})]}),e.jsx(dt,{className:`h-5 w-5 text-muted-foreground transition-transform duration-200 ${n?"rotate-180":""}`})]}),e.jsx(tr,{className:"pt-4",children:r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Pe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t?.map(o=>{const{name:i,description:l}=o;return e.jsxs(V,{variant:"outline",onClick:()=>s(o),className:"group h-auto flex-col items-start gap-2 p-4 hover:border-[var(--accent-orange)]",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:"h-5 w-5 text-muted-foreground transition-colors group-hover:text-[var(--accent-orange)]"}),e.jsx("span",{className:"font-medium",children:i})]}),e.jsx(We,{className:"h-4 w-4 text-muted-foreground transition-colors group-hover:text-[var(--accent-orange)]"})]}),l&&e.jsx("p",{className:"line-clamp-1 max-w-48 text-ellipsis text-left text-muted-foreground text-xs",children:l})]},i)})??null})})]})})},xs=oo?t=>{t()}:U.startTransition,mc=t=>{const[,s]=u.useState({}),r=u.useRef(!1),n=u.useRef(t),a=u.useRef({data:!1,error:!1,isValidating:!1}),o=u.useCallback(i=>{let l=!1;const c=n.current;for(const m in i)if(Object.prototype.hasOwnProperty.call(i,m)){const x=m;c[x]!==i[x]&&(c[x]=i[x],a.current[x]&&(l=!0))}l&&!r.current&&s({})},[]);return Ls(()=>(r.current=!1,()=>{r.current=!0})),[n,a.current,o]},fc=()=>(t,s,r={})=>{const{mutate:n}=io(),a=u.useRef(t),o=u.useRef(s),i=u.useRef(r),l=u.useRef(0),[c,m,x]=mc({data:Lt,error:Lt,isMutating:!1}),v=c.current,j=u.useCallback(async(N,b)=>{const[k,w]=lo(a.current);if(!o.current)throw new Error("Can’t trigger the mutation: missing fetcher.");if(!k)throw new Error("Can’t trigger the mutation: missing key.");const g=xr(xr({populateCache:!1,throwOnError:!0},i.current),b),p=Xr();l.current=p,x({isMutating:!0});try{const S=await n(k,o.current(w,{arg:N}),xr(g,{throwOnError:!0}));return l.current<=p&&(xs(()=>x({data:S,isMutating:!1,error:void 0})),g.onSuccess==null||g.onSuccess.call(g,S,k,g)),S}catch(S){if(l.current<=p&&(xs(()=>x({error:S,isMutating:!1})),g.onError==null||g.onError.call(g,S,k,g),g.throwOnError))throw S}},[]),h=u.useCallback(()=>{l.current=Xr(),x({data:Lt,error:Lt,isMutating:!1})},[]);return Ls(()=>{a.current=t,o.current=s,i.current=r}),{trigger:j,reset:h,get data(){return m.data=!0,v.data},get error(){return m.error=!0,v.error},get isMutating(){return m.isMutating=!0,v.isMutating}}},la=ao(Rr,fc),hc=async(t,{arg:s})=>{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverName:s.serverName})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to add server")}return r.json()},pc=()=>{const{baseUrl:t}=ct();return la(t?`${t}/klavis/servers/add`:null,hc)},xc=async([t])=>await(await fetch(`${t}/klavis/servers`)).json(),gc=()=>{const{baseUrl:t}=ct();return Rr(t?[t,"klavis/servers"]:null,xc,{keepPreviousData:!0})},vc=async([t])=>await(await fetch(`${t}/klavis/user-integrations`)).json(),yc=()=>{const{baseUrl:t}=ct();return Rr(t?[t,"klavis/user-integrations"]:null,vc,{keepPreviousData:!0,revalidateOnFocus:!0})},bc=async(t,{arg:s})=>{const r=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverName:s.serverName})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to remove server")}return r.json()},jc=()=>{const{baseUrl:t}=ct();return la(t?`${t}/klavis/servers/remove`:null,bc)},Ut=(t,s)=>{Ue.error(`Failed to add MCP Server: ${t}`),_s.captureException(s)},gs=(t,s)=>{Ue.error(`Failed to remove MCP Server: ${t}`),_s.captureException(s)},wc=()=>{const{servers:t,addServer:s,removeServer:r}=ro(),[n,a]=u.useState(!1),[o,i]=u.useState(!1),[l,c]=u.useState(null),{trigger:m}=pc(),{trigger:x}=jc(),{data:v}=gc(),{data:j,isLoading:h}=yc(),N=async p=>{try{const C=(await m({serverName:p})).oauthUrl;if(!C){Ut(p,"No auth URL returned");return}window.open(C,"_blank")?.focus()}catch(S){Ut(p,S)}},b=async({name:p,description:S})=>{try{const M=(await m({serverName:p})).oauthUrl;if(!M){Ut(p,"No auth URL returned");return}window.open(M,"_blank")?.focus(),s({id:Date.now().toString(),displayName:`${p} MCP`,type:"managed",managedServerName:p,managedServerDescription:S}),Ne(No,{server_name:p})}catch(C){Ut(p,C)}},k=async({id:p,name:S})=>{c(p);try{(await x({serverName:S})).success?r(p):gs(S,"Success not returned from server")}catch(C){gs(S,C)}finally{c(null)}},w=p=>{s({id:Date.now().toString(),displayName:p.name,type:"custom",config:{url:p.url,description:p.description}}),Ne(So)},g=v?.servers.filter(p=>{const S=p.name;return!t.find(C=>C.managedServerName===S)});return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(lt,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"MCP Servers"}),e.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Connect BrowserOS assistant to MCP servers to send email, schedule calendar events, write docs, and more"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(V,{variant:"outline",onClick:()=>a(!0),className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:"Enable built-in MCP"})]}),e.jsxs(V,{variant:"outline",onClick:()=>i(!0),children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Custom MCP"})]})]})]})]})}),t.length>0&&e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsx("h3",{className:"mb-4 font-semibold text-lg",children:"Your MCP Servers"}),e.jsx("div",{className:"space-y-3",children:t.map(p=>e.jsxs("div",{className:"flex items-center gap-4 rounded-lg border border-border bg-background p-4 transition-all hover:border-[var(--accent-orange)]/50 hover:shadow-sm",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-[var(--accent-orange)]/10",children:e.jsx(lt,{className:"h-5 w-5 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:p.displayName}),e.jsx("span",{className:`rounded px-2 py-0.5 font-medium text-xs ${p.type==="managed"?"bg-[var(--accent-orange)]/10 text-[var(--accent-orange)]":"bg-muted text-muted-foreground"}`,children:p.type==="managed"?"Built-in":"Custom"})]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:p.managedServerDescription||p.config?.description||p.config?.url})]}),p.type==="managed"&&(h?e.jsx(Pe,{className:"h-4 w-4 animate-spin text-muted-foreground"}):j?.integrations?.find(S=>S.name===p.managedServerName)?.is_authenticated?e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-green-500/10 px-2 py-1 font-medium text-green-600 text-xs",children:[e.jsx(_t,{className:"h-3 w-3"}),"Authenticated"]}):e.jsx(V,{variant:"outline",size:"sm",onClick:()=>p.managedServerName&&N(p.managedServerName),children:"Authenticate"})),e.jsx(V,{variant:"ghost",size:"icon",disabled:l===p.id,onClick:()=>{p.type==="managed"&&p.managedServerName?k({id:p.id,name:p.managedServerName}):r(p.id)},className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive",title:"Remove server",children:l===p.id?e.jsx(Pe,{className:"h-4 w-4 animate-spin"}):e.jsx(rr,{className:"h-4 w-4"})})]},p.id))})]}),e.jsx(uc,{availableServers:g,onAddServer:b,isLoading:!1}),e.jsx(dc,{open:n,onOpenChange:a,serversList:g,onAddServer:b}),e.jsx(cc,{open:o,onOpenChange:i,onAddServer:w})]})},Nc=()=>e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(Hs,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"Customization"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Personalize your toolbar and browser interface"})]})]})});var fr="Switch",[Sc]=Jt(fr),[Cc,kc]=Sc(fr),ca=u.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:m,form:x,...v}=t,[j,h]=u.useState(null),N=ge(s,p=>h(p)),b=u.useRef(!1),k=j?x||!!j.closest("form"):!0,[w,g]=Vt({prop:a,defaultProp:o??!1,onChange:m,caller:fr});return e.jsxs(Cc,{scope:r,checked:w,disabled:l,children:[e.jsx(he.button,{type:"button",role:"switch","aria-checked":w,"aria-required":i,"data-state":fa(w),"data-disabled":l?"":void 0,disabled:l,value:c,...v,ref:N,onClick:le(t.onClick,p=>{g(S=>!S),k&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})}),k&&e.jsx(ma,{control:j,bubbles:!b.current,name:n,value:c,checked:w,required:i,disabled:l,form:x,style:{transform:"translateX(-100%)"}})]})});ca.displayName=fr;var da="SwitchThumb",ua=u.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=kc(da,r);return e.jsx(he.span,{"data-state":fa(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});ua.displayName=da;var Ec="SwitchBubbleInput",ma=u.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const i=u.useRef(null),l=ge(i,o),c=Lr(r),m=Fs(s);return u.useEffect(()=>{const x=i.current;if(!x)return;const v=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(v,"checked").set;if(c!==r&&h){const N=new Event("click",{bubbles:n});h.call(x,r),x.dispatchEvent(N)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ma.displayName=Ec;function fa(t){return t?"checked":"unchecked"}var _c=ca,Tc=ua;function yt({className:t,...s}){return e.jsx(_c,{"data-slot":"switch",className:W("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-xs outline-none transition-colors focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,children:e.jsx(Tc,{"data-slot":"switch-thumb",className:W("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}const Ic=()=>{const[t,s]=u.useState(!0),[r,n]=u.useState(!0),[a,o]=u.useState(!0),[i,l]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const x=$e(),[v,j,h]=await Promise.all([x.getPref(ke.SHOW_LLM_CHAT),x.getPref(ke.SHOW_LLM_HUB),x.getPref(ke.SHOW_TOOLBAR_LABELS)]);s(v?.value!==!1),n(j?.value!==!1),o(h?.value!==!1)}catch{}finally{l(!1)}})()},[]);const c=async(m,x,v)=>{try{await $e().setPref(m,x),v(x)}catch{Ue.error("Failed to update setting")}};return e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsx("h3",{className:"mb-4 font-semibold text-lg",children:"Toolbar Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(xt,{htmlFor:"show-llm-chat",className:"font-medium text-sm",children:"Show Chat Button"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Display the Chat button in the browser toolbar"})]}),e.jsx(yt,{id:"show-llm-chat",checked:t,onCheckedChange:m=>c(ke.SHOW_LLM_CHAT,m,s),disabled:i})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(xt,{htmlFor:"show-llm-hub",className:"font-medium text-sm",children:"Show Hub Button"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Display the Hub button in the browser toolbar"})]}),e.jsx(yt,{id:"show-llm-hub",checked:r,onCheckedChange:m=>c(ke.SHOW_LLM_HUB,m,n),disabled:i})]}),e.jsxs("div",{className:"flex items-center justify-between border-border border-t pt-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(xt,{htmlFor:"show-toolbar-labels",className:"font-medium text-sm",children:"Show Button Labels"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Display text labels next to toolbar button icons"})]}),e.jsx(yt,{id:"show-toolbar-labels",checked:a,onCheckedChange:m=>c(ke.SHOW_TOOLBAR_LABELS,m,o),disabled:i})]})]})]})},Ac=()=>e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(Nc,{}),e.jsx(Ic,{})]}),Pc="https://llm.browseros.com";async function Rc(t){const s=new FormData;s.append("file",t,"recording.webm"),s.append("response_format","json");const r=await fetch(`${Pc}/api/transcribe`,{method:"POST",body:s});if(!r.ok){const a=await r.json().catch(()=>({error:"Transcription failed"}));throw new Error(a.error||`Transcription failed: ${r.status}`)}return(await r.json()).text||""}function Dc(){const[t,s]=u.useState(!1),[r,n]=u.useState(!1),[a,o]=u.useState(""),[i,l]=u.useState(0),[c,m]=u.useState(null),x=u.useRef(null),v=u.useRef(null),j=u.useRef([]),h=u.useRef(null),N=u.useRef(null),b=u.useRef(null),k=u.useCallback(()=>{b.current&&(cancelAnimationFrame(b.current),b.current=null),h.current?.state!=="closed"&&h.current?.close(),h.current=null,N.current=null,l(0)},[]);u.useEffect(()=>()=>{v.current?.getTracks().forEach(C=>{C.stop()}),x.current?.state==="recording"&&x.current.stop(),k()},[k]);const w=u.useCallback(C=>{const M=new AudioContext,T=M.createAnalyser();T.fftSize=256,M.createMediaStreamSource(C).connect(T),h.current=M,N.current=T;const Z=()=>{if(!N.current)return;const L=new Uint8Array(N.current.frequencyBinCount);N.current.getByteFrequencyData(L);const ne=L.reduce((O,z)=>O+z,0)/L.length,D=Math.min(100,ne/128*100);l(Math.round(D)),b.current=requestAnimationFrame(Z)};Z()},[]),g=u.useCallback(async()=>{try{m(null),o(""),j.current=[];const C=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0}});v.current=C,w(C);const M=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",T=new MediaRecorder(C,{mimeType:M});x.current=T,T.ondataavailable=$=>{$.data.size>0&&j.current.push($.data)},T.start(250),s(!0)}catch(C){C instanceof Error?C.name==="NotAllowedError"?m("Microphone permission denied"):C.name==="NotFoundError"?m("No microphone found"):m(C.message):m("Failed to start recording")}},[w]),p=u.useCallback(async()=>{const C=x.current;if(!C||C.state==="inactive")return;await new Promise(T=>{C.onstop=()=>T(),C.stop()}),v.current?.getTracks().forEach(T=>{T.stop()}),v.current=null,k(),s(!1);const M=new Blob(j.current,{type:"audio/webm"});if(j.current=[],M.size===0){m("No audio recorded");return}n(!0);try{const T=await Rc(M);T.trim()?o(T.trim()):m("No speech detected")}catch(T){m(T instanceof Error?T.message:"Transcription failed")}finally{n(!1)}},[k]),S=u.useCallback(()=>{o(""),m(null)},[]);return{isRecording:t,isTranscribing:r,transcript:a,audioLevel:i,error:c,startRecording:g,stopRecording:p,clearTranscript:S}}const Mc=({isRecording:t,isTranscribing:s,audioLevel:r,disabled:n,onStart:a,onStop:o})=>s?e.jsx(V,{variant:"outline",size:"icon",disabled:!0,children:e.jsx(Pe,{className:"h-4 w-4 animate-spin"})}):t?e.jsxs(V,{type:"button",variant:"destructive",size:"icon",onClick:o,className:"relative",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"absolute inset-0 animate-ping rounded-md bg-destructive/50",style:{opacity:Math.min(.7,r/100)}})]}):e.jsx(V,{type:"button",size:"icon",onClick:a,disabled:n,children:e.jsx(Zo,{className:"h-4 w-4"})}),Lc=({message:t})=>{const s=t.role==="user";return e.jsx("div",{className:W("flex",s?"justify-end":"justify-start"),children:e.jsx("div",{className:W("max-w-[80%] rounded-2xl px-4 py-3 text-sm",s?"bg-primary text-primary-foreground":"bg-muted/50 text-foreground"),children:t.content?e.jsx(Co,{children:t.content}):e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Pe,{className:"h-4 w-4 animate-spin"}),"Thinking..."]})})})},vs=[0,1,2,3,4],Oc=({level:t})=>e.jsx("div",{className:"flex items-center justify-center gap-1",children:vs.map(s=>{const r=Math.max(.2,Math.sin(s/vs.length*Math.PI)*(t/100));return e.jsx("div",{className:"w-1 rounded-full bg-destructive transition-all duration-75",style:{height:`${Math.max(4,r*20)}px`}},s)})}),Fc=({messages:t,isStreaming:s,onSendMessage:r,onStop:n})=>{const[a,o]=u.useState(""),i=u.useRef(null),l=Dc(),c=t.length;u.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[c]),u.useEffect(()=>{l.transcript&&!l.isTranscribing&&(o(j=>{const h=j.trim()?" ":"";return j+h+l.transcript}),l.clearTranscript())},[l.transcript,l.isTranscribing,l.clearTranscript]);const m=j=>{j.preventDefault(),!(!a.trim()||s||l.isRecording)&&(r(a.trim()),o(""))},x=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),m(j))},v=s||l.isRecording||l.isTranscribing;return e.jsxs("div",{className:"flex h-[calc(100vh-250px)] flex-col rounded-xl border border-border bg-card shadow-sm",children:[e.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto p-4",children:[t.map(j=>e.jsx(Lc,{message:j},j.id)),e.jsx("div",{ref:i})]}),e.jsxs("form",{onSubmit:m,className:"border-border border-t p-4",children:[l.error&&e.jsx("div",{className:"mb-2 text-destructive text-sm",children:l.error}),e.jsxs("div",{className:"flex gap-2",children:[l.isRecording?e.jsxs("div",{className:"flex flex-1 items-center justify-center gap-2 rounded-md border border-input bg-muted/50 px-3 py-2",children:[e.jsx(Oc,{level:l.audioLevel}),e.jsx("span",{className:"text-muted-foreground text-sm",children:"Listening..."})]}):e.jsx(Pr,{value:a,onChange:j=>o(j.target.value),onKeyDown:x,placeholder:l.isTranscribing?"Transcribing...":"Type your response...",disabled:v,className:"max-h-40 min-h-[44px] resize-none",rows:1}),e.jsx(Mc,{isRecording:l.isRecording,isTranscribing:l.isTranscribing,audioLevel:l.audioLevel,disabled:s,onStart:l.startRecording,onStop:l.stopRecording}),s?e.jsx(V,{type:"button",onClick:n,variant:"destructive",size:"icon",children:e.jsx(Ks,{className:"h-4 w-4"})}):e.jsx(V,{type:"submit",disabled:!a.trim()||l.isRecording||l.isTranscribing,size:"icon",children:e.jsx(so,{className:"h-4 w-4"})})]})]})]})},Uc=()=>e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(Rs,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"Product Survey"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"We'd love your honest feedback. All responses are anonymous."})]})]})}),ys="https://jtbd-agent.fly.dev",Vc="jtbd_jan26";async function Bc(){try{const s=await $e().getPref(ke.INSTALL_ID);if(s?.value)return String(s.value)}catch{}return""}const ha="__INTERVIEW_COMPLETE__";async function*bs(t){const s=t.body?.getReader();if(!s)throw new Error("Response body is not readable");const r=new TextDecoder;let n="";try{for(;;){const{done:a,value:o}=await s.read();if(a)break;n+=r.decode(o,{stream:!0});const i=n.split(`
`);n=i.pop()??"";for(const l of i){if(!l.startsWith("data: "))continue;const c=l.slice(6);if(c==="[DONE]")return;try{const m=JSON.parse(c);if(m.type==="text-delta"&&m.delta)yield m.delta;else if(m.type==="interview_complete")yield ha;else if(m.type==="error"&&m.errorText)throw new Error(m.errorText)}catch(m){if(m instanceof Error&&m.message!=="Unexpected end of JSON input")throw m}}}}finally{s.releaseLock()}}function zc(){const[t,s]=u.useState("idle"),[r,n]=u.useState([]),[a,o]=u.useState(!1),[i,l]=u.useState(null),c=u.useRef(null),m=u.useRef(null),x=k=>{n(w=>[...w,k])},v=k=>{n(w=>{if(w.length===0)return w;const g=[...w];return g[g.length-1]={...g[g.length-1],content:k},g})},j=async()=>{s("active"),l(null),o(!0);const k=crypto.randomUUID();x({id:k,role:"assistant",content:""}),m.current=new AbortController;try{const w=await Bc(),g=await fetch(`${ys}/api/interview/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({installId:w,experimentId:Vc}),signal:m.current.signal});if(!g.ok)throw new Error(`Failed to start interview: ${g.status}`);const p=g.headers.get("x-interview-session-id");if(p)c.current=p;else{const C=new Error("No session ID returned from server");l(C),s("error");return}let S="";for await(const C of bs(g))S+=C,v(S)}catch(w){if(w instanceof Error&&w.name==="AbortError")return;const g=w instanceof Error?w:new Error("Unknown error");l(g),s("error")}finally{o(!1),m.current=null}},h=async k=>{if(!c.current)return;const w=crypto.randomUUID();x({id:w,role:"user",content:k});const g=crypto.randomUUID();x({id:g,role:"assistant",content:""}),o(!0),l(null),m.current=new AbortController;try{const p=await fetch(`${ys}/api/interview/${c.current}/respond`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:k}),signal:m.current.signal});if(!p.ok)throw new Error(`Failed to respond: ${p.status}`);let S="",C=!1;for await(const M of bs(p)){if(M===ha){C=!0;continue}S+=M,v(S)}C&&s("completed")}catch(p){if(p instanceof Error&&p.name==="AbortError")return;const S=p instanceof Error?p:new Error("Unknown error");l(S),s("error")}finally{o(!1),m.current=null}},N=()=>{m.current?.abort(),o(!1)};return{phase:t,messages:r,isStreaming:a,error:i,start:j,respond:h,stop:N,reset:()=>{N(),n([]),l(null),c.current=null,s("idle")}}}const $c=({onStart:t,isLoading:s})=>e.jsxs("div",{className:"rounded-xl border border-border bg-card p-8 text-center shadow-sm",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[var(--accent-orange)]/10",children:e.jsx(Ua,{className:"h-8 w-8 text-[var(--accent-orange)]"})}),e.jsx("h3",{className:"mb-2 font-semibold text-lg",children:"Share Your Experience"}),e.jsx("p",{className:"mx-auto mb-6 max-w-md text-muted-foreground text-sm",children:"We'd love to learn about how you use browser automation. This quick conversation helps us build features that matter to you."}),e.jsx(V,{onClick:t,disabled:s,size:"lg",children:s?"Starting...":"Start Survey"})]}),Hc=({onReset:t})=>e.jsxs("div",{className:"rounded-xl border border-border bg-card p-8 text-center shadow-sm",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-500/10",children:e.jsx(Ar,{className:"h-8 w-8 text-green-500"})}),e.jsx("h3",{className:"mb-2 font-semibold text-lg",children:"Thank You!"}),e.jsx("p",{className:"mx-auto mb-6 max-w-md text-muted-foreground text-sm",children:"Your feedback helps us build better products. We appreciate you taking the time to share your experience."}),e.jsxs(V,{onClick:t,variant:"outline",children:[e.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Start Another Survey"]})]}),Kc=({error:t,onRetry:s})=>e.jsxs("div",{className:"rounded-xl border border-destructive/50 bg-destructive/10 p-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/20",children:e.jsx(Vs,{className:"h-6 w-6 text-destructive"})}),e.jsx("h3",{className:"mb-2 font-semibold text-destructive",children:"Something went wrong"}),e.jsx("p",{className:"mb-4 text-muted-foreground text-sm",children:t.message}),e.jsxs(V,{onClick:s,variant:"outline",children:[e.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Try Again"]})]}),Wc=()=>{const t=zc(),s=async()=>{const r=await Jr.getValue();await Jr.setValue({...r,surveyTaken:!0}),t.start()};return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(Uc,{}),t.phase==="idle"&&e.jsx($c,{onStart:s,isLoading:t.isStreaming}),t.phase==="active"&&e.jsx(Fc,{messages:t.messages,isStreaming:t.isStreaming,onSendMessage:t.respond,onStop:t.stop}),t.phase==="completed"&&e.jsx(Hc,{onReset:t.reset}),t.phase==="error"&&t.error&&e.jsx(Kc,{error:t.error,onRetry:t.reset})]})},qc=[{name:"BrowserOS AI",to:"/ai",icon:ko,enabled:!0},{name:"LLM Chat & Hub",to:"/chat",icon:Bs,enabled:!0},{name:"Connect to MCPs",to:"/connect-mcp",icon:ni,enabled:!0,feature:Bt.MANAGED_MCP_SUPPORT},{name:"BrowserOS as MCP",to:"/mcp",icon:lt,enabled:!0},{name:"Scheduled Tasks",to:"/scheduled",icon:zs,enabled:!0},{name:"Customization",to:"/customization",icon:Hs,enabled:!0,feature:Bt.CUSTOMIZATION_SUPPORT},{name:"Product Survey",to:"/jtbd-agent",icon:Rs,enabled:!1},{name:"Revisit Onboarding",to:chrome.runtime.getURL("onboarding.html"),icon:Mr,target:"_blank",enabled:!0},{name:"Search Engines",to:"/search",icon:Va,enabled:!1}],Gc=()=>{const t=Ba(),[s,r]=u.useState(!1),{supports:n}=Dr();return u.useEffect(()=>{Ne(Eo,{page:t.pathname})},[t.pathname]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-40 flex items-center justify-between border-border border-b bg-background px-4 py-3 lg:hidden",children:[e.jsx("h1",{className:"font-semibold text-lg",children:"Settings"}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{type:"button",onClick:()=>r(!s),className:"rounded-lg p-2 transition-colors hover:bg-accent","aria-label":"Toggle menu",children:s?e.jsx(Ts,{className:"h-5 w-5"}):e.jsx(Yo,{className:"h-5 w-5"})})})]}),s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>r(!1),"aria-label":"Close sidebar",role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),r(!1))}}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 transform border-border border-r bg-background transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-border border-b px-6 py-4",children:[e.jsx("h1",{className:"font-semibold text-xl",children:"Settings"}),e.jsx(_o,{})]}),e.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto px-3 py-4",children:qc.filter(a=>a.enabled&&(!a.feature||n(a.feature))).map(a=>{const o=t.pathname===a.to,i=a.icon;return e.jsxs(za,{to:a.to,onClick:()=>r(!1),target:a.target,rel:a.target?"noopener noreferrer":void 0,className:`flex items-center gap-3 rounded-lg px-3 py-2.5 font-medium text-sm transition-all ${o?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:bg-accent/50 hover:text-accent-foreground"}`,children:[e.jsx(i,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{children:a.name})]},a.to)})}),e.jsx("div",{className:"border-border border-t px-3 py-4",children:e.jsxs("a",{href:"https://docs.browseros.com/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-lg px-3 py-2.5 font-medium text-muted-foreground text-sm transition-colors hover:bg-accent/50 hover:text-accent-foreground",children:[e.jsx($a,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{children:"About BrowserOS"})]})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"mx-auto max-w-5xl overflow-hidden px-4 py-8 sm:px-6 lg:px-8",children:e.jsx(Ha,{})})})]})]})},_r=[{name:"ChatGPT",url:"https://chatgpt.com"},{name:"Claude",url:"https://claude.ai"},{name:"Grok",url:"https://grok.com"},{name:"Gemini",url:"https://gemini.google.com"},{name:"Perplexity",url:"https://www.perplexity.ai"}];async function Yc(){try{const r=(await $e().getPref(ke.THIRD_PARTY_LLM_PROVIDERS))?.value||[];return r.length===0?_r:r}catch{return _r}}async function js(t){try{return await $e().setPref(ke.THIRD_PARTY_LLM_PROVIDERS,t)}catch{return!1}}function Jc(t,s=128){try{const r=t.trim();return r?`https://www.google.com/s2/favicons?domain=${new URL(r.match(/^[a-zA-Z][a-zA-Z0-9+.-]*:/)?r:`https://${r}`).hostname}&sz=${s}`:void 0}catch{return}}function Zc(){const[t,s]=u.useState([]),[r,n]=u.useState(!0);u.useEffect(()=>{(async()=>{n(!0);try{const l=await Yc();s(l)}catch{s(_r)}finally{n(!1)}})()},[]);const a=u.useCallback(async(i,l)=>{const m=l!==void 0&&l>=0?t.map((j,h)=>h===l?i:j):[...t,i],x=t;s(m),await js(m)||s(x)},[t]),o=u.useCallback(async i=>{if(t.length<=1)return;const l=t.filter((x,v)=>v!==i),c=t;s(l),await js(l)||s(c)},[t]);return{providers:t,isLoading:r,saveProvider:a,deleteProvider:o}}const Xc=Xt({name:pe().min(1,"Provider name is required").max(50,"Name must be 50 characters or less"),url:pe().min(1,"URL is required").refine(t=>{try{return new URL(t.startsWith("http")?t:`https://${t}`),!0}catch{return!1}},{message:"Please enter a valid URL"})}),Qc=({open:t,onOpenChange:s,initialValues:r,onSave:n})=>{const a=!!r,o=lr({resolver:cr(Xc),defaultValues:{name:"",url:""}});u.useEffect(()=>{t&&o.reset(r?{name:r.name,url:r.url}:{name:"",url:""})},[t,r,o]);const i=l=>{let c=l.url.trim();!c.startsWith("http://")&&!c.startsWith("https://")&&(c=`https://${c}`),c.endsWith("/")&&(c=c.slice(0,-1)),n({name:l.name.trim(),url:c}),a||Ne(To,{name:l.name.trim(),url:c}),o.reset(),s(!1)};return e.jsx(Tt,{open:t,onOpenChange:s,children:e.jsxs(It,{className:"sm:max-w-md",children:[e.jsxs(At,{children:[e.jsx(Pt,{children:a?"Edit Provider":"Add Custom Provider"}),e.jsx(Rt,{children:a?"Update your custom AI chat provider.":"Add a new AI chat provider for quick access."})]}),e.jsx(ur,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(i),className:"space-y-4",children:[e.jsx(te,{control:o.control,name:"name",render:({field:l})=>e.jsxs(re,{children:[e.jsx(se,{children:"Provider Name"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"e.g., DeepSeek",...l})}),e.jsx(ae,{})]})}),e.jsx(te,{control:o.control,name:"url",render:({field:l})=>e.jsxs(re,{children:[e.jsx(se,{children:"URL"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"e.g., chat.deepseek.com",...l})}),e.jsx(Fe,{children:"The web address of the AI chat service"}),e.jsx(ae,{})]})}),e.jsxs(Zt,{className:"gap-2 pt-2",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(V,{type:"submit",children:a?"Update":"Add"})]})]})})]})})},ed=({provider:t,canDelete:s,onEdit:r,onDelete:n})=>{const a=u.useMemo(()=>Jc(t.url),[t.url]);return e.jsxs("div",{className:"group flex w-full items-center gap-4 rounded-xl border border-border bg-card p-4 transition-all hover:border-[var(--accent-orange)] hover:shadow-md",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center overflow-hidden rounded-lg bg-muted",children:a?e.jsx("img",{src:a,alt:`${t.name} icon`,className:"h-full w-full object-cover"}):e.jsx(Wo,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"mb-0.5 block truncate font-semibold",children:t.name}),e.jsx("p",{className:"truncate text-muted-foreground/70 text-xs",children:t.url})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[e.jsx(V,{variant:"outline",size:"sm",onClick:r,children:"Edit"}),e.jsx(V,{variant:"ghost",size:"icon-sm",disabled:!s,className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive disabled:opacity-30",onClick:n,"aria-label":`Remove ${t.name}`,children:e.jsx(rr,{className:"h-4 w-4"})})]})]})},td=({providers:t,isLoading:s=!1,onEditProvider:r,onDeleteProvider:n,onAddProvider:a})=>s?e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-muted-foreground",children:[e.jsx(Pe,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Loading providers..."})]})}):t.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"Configured Providers"}),e.jsxs(V,{variant:"outline",size:"sm",onClick:a,className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20 hover:text-[var(--accent-orange)]",children:[e.jsx(We,{className:"mr-1.5 h-4 w-4"}),"Add provider"]})]}),e.jsx("div",{className:"rounded-lg border border-border border-dashed py-8 text-center",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No providers configured yet."})})]}):e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"Configured Providers"}),e.jsxs(V,{variant:"outline",size:"sm",onClick:a,className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20 hover:text-[var(--accent-orange)]",children:[e.jsx(We,{className:"mr-1.5 h-4 w-4"}),"Add provider"]})]}),e.jsx("div",{className:"space-y-3",children:t.map((o,i)=>e.jsx(ed,{provider:o,canDelete:t.length>1,onEdit:()=>r(i),onDelete:()=>n(i)},o.url))})]}),rd=()=>e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(Bs,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"LLM Chat & Hub"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Curate and configure your favourite LLM chat providers"})]})]})}),sd=()=>{const{providers:t,isLoading:s,saveProvider:r,deleteProvider:n}=Zc(),[a,o]=u.useState(!1),[i,l]=u.useState(null),[c,m]=u.useState(null),x=()=>{l(null),o(!0)},v=w=>{l(w),o(!0)},j=w=>{m(w)},h=async()=>{c!==null&&(await n(c),m(null))},N=async w=>{await r(w,i??void 0)},b=c!==null?t[c]:null,k=i!==null?t[i]:null;return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(rd,{}),e.jsx(td,{providers:t,isLoading:s,onEditProvider:v,onDeleteProvider:j,onAddProvider:x}),e.jsx(Qc,{open:a,onOpenChange:o,initialValues:k,onSave:N}),e.jsx(bt,{open:c!==null,onOpenChange:w=>!w&&m(null),children:e.jsxs(jt,{children:[e.jsxs(wt,{children:[e.jsx(St,{children:"Remove Provider"}),e.jsxs(Ct,{children:["Remove ",b?.name," from your LLM chat providers?"]})]}),e.jsxs(Nt,{children:[e.jsx(Et,{children:"Cancel"}),e.jsx(kt,{onClick:h,children:"Remove"})]})]})})]})},{sendMessage:Tr}=co(),nd="https://docs.browseros.com/features/use-with-claude-code",ad=({serverUrl:t,isLoading:s,error:r})=>{const[n,a]=u.useState(!1),o=async()=>{if(t)try{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)}catch{}};return e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(lt,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold text-xl",children:"BrowserOS MCP Server"}),e.jsxs("a",{href:nd,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-muted-foreground text-sm transition-colors hover:text-[var(--accent-orange)]",children:["Setup a client",e.jsx($s,{className:"h-3.5 w-3.5"})]})]}),e.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Connect BrowserOS to MCP clients like claude code, gemini and others."}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsx("span",{className:"whitespace-nowrap font-medium text-sm",children:"Server URL:"}),e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsx("div",{className:"flex-1 rounded-lg border border-border bg-background px-3 py-2 font-mono text-sm sm:max-w-md",children:s?e.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):r?e.jsx("span",{className:"text-destructive",children:r}):t}),e.jsx(V,{variant:"outline",size:"icon",onClick:o,disabled:!t||s,className:"shrink-0",children:n?e.jsx(_t,{className:"h-4 w-4 text-green-600"}):e.jsx(Io,{className:"h-4 w-4"})})]})]})]})]})})},od=({tools:t,isLoading:s,error:r,onRefresh:n})=>{const[a,o]=u.useState(!1);return e.jsx(Qt,{open:a,onOpenChange:o,className:"group/collapsible",children:e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs(er,{className:"flex flex-1 items-center justify-between text-left",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Available Tools"}),t.length>0&&e.jsxs("p",{className:"text-muted-foreground text-sm",children:[t.length," tools available"]})]}),e.jsx(dt,{className:`h-5 w-5 text-muted-foreground transition-transform duration-200 ${a?"rotate-180":""}`})]}),e.jsx(V,{variant:"outline",size:"icon",onClick:n,disabled:s,className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20 hover:text-[var(--accent-orange)]",title:"Refresh tools",children:s?e.jsx(Pe,{className:"h-4 w-4 animate-spin"}):e.jsx(Ds,{className:"h-4 w-4"})})]}),r&&e.jsx("div",{className:"mt-4 rounded-lg border border-destructive/20 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:r}),e.jsx(tr,{className:"pt-4",children:t.length>0&&e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t.map(i=>e.jsxs("div",{className:"rounded-lg border border-border bg-background p-4 transition-all hover:border-[var(--accent-orange)]/50 hover:shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(di,{className:"h-4 w-4 text-[var(--accent-orange)]"}),e.jsx("span",{className:"font-medium text-sm",children:i.name})]}),i.description&&e.jsx("p",{className:"line-clamp-2 text-muted-foreground text-xs",children:i.description})]},i.name))})})]})})},id=Ka("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ld({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:W(id({variant:s}),t),...r})}function cd({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:W("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function dd({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:W("col-start-2 grid justify-items-start gap-1 text-muted-foreground text-sm [&_p]:leading-relaxed",t),...s})}const ud=6e4,ws=2e3,md=15e3,fd=({onServerRestart:t})=>{const[s,r]=u.useState(!1),[n,a]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState("Restarting server..."),[m,x]=u.useState(null),[v,j]=u.useState(null);u.useEffect(()=>{(async()=>{try{const C=await $e().getPref(ke.ALLOW_REMOTE_MCP);r(C?.value===!0)}catch{}finally{a(!1)}})()},[]);const h=u.useCallback(async()=>{try{return(await Tr("checkHealth",void 0)).healthy}catch{return!1}},[]),N=u.useCallback(async()=>{const p=Date.now();return new Promise(S=>{const C=async()=>{const M=Date.now()-p;if(M>=ud){S(!1);return}if(M>=md&&c("Taking longer than expected..."),await h()){S(!0);return}setTimeout(C,ws)};setTimeout(C,ws)})},[h]),b=p=>{p?x("enable-remote"):k(!1)},k=async p=>{i(!0),c("Restarting server..."),x(null),j(null);try{if(!await $e().setPref(ke.ALLOW_REMOTE_MCP,p))throw new Error("Failed to update setting");await N()?(r(p),Ne(p?Ao:Po),Ue.success("Server restarted successfully",{description:p?"Remote connections are now enabled":"Remote connections are now disabled"}),t?.()):j("Server did not respond. Please quit and restart the browser, then try again.")}catch(S){j(S instanceof Error?S.message:"Failed to update setting")}finally{i(!1)}},w=()=>{x("restart")},g=async()=>{i(!0),c("Restarting server..."),x(null),j(null);try{await $e().setPref(ke.RESTART_SERVER,!0),await N()?(Ne(Ro),Ue.success("Server restarted successfully"),t?.()):j("Server did not respond. Please quit and restart the browser, then try again.")}catch(p){j(p instanceof Error?p.message:"Failed to restart server")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[o&&e.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center rounded-xl bg-card/80 backdrop-blur-sm",children:[e.jsx(Pe,{className:"h-8 w-8 animate-spin text-[var(--accent-orange)]"}),e.jsx("p",{className:"mt-3 font-medium text-sm",children:l})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(Vo,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"MCP Server Settings"}),e.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Configure local MCP server options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(xt,{htmlFor:"allow-remote",className:"font-medium text-sm",children:"Allow External Access"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Allow MCP clients from other devices to connect"})]}),e.jsx(yt,{id:"allow-remote",checked:s,onCheckedChange:b,disabled:n||o})]}),e.jsxs("div",{className:"flex items-center justify-between border-border border-t pt-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:"font-medium text-sm",children:"Restart MCP Server"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Restart local MCP server"})]}),e.jsxs(V,{variant:"outline",size:"sm",onClick:w,disabled:n||o,children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Restart"]})]}),v&&e.jsxs(ld,{variant:"destructive",className:"mt-4 border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950",children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsxs(cd,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Server Error"}),e.jsx("button",{type:"button",onClick:()=>j(null),className:"-mt-1 -mr-1 rounded-sm p-1 opacity-70 transition-opacity hover:opacity-100",children:e.jsx(Ts,{className:"h-4 w-4"})})]}),e.jsx(dd,{children:v})]})]})]})]})]}),e.jsx(bt,{open:m==="enable-remote",onOpenChange:p=>!p&&x(null),children:e.jsxs(jt,{children:[e.jsxs(wt,{children:[e.jsx(St,{children:"Allow External Access?"}),e.jsx(Ct,{children:"By default, the MCP server only accepts connections from localhost (127.0.0.1). Enabling this will allow any device on your network to connect. Only enable if you need to connect from another machine and trust your network."})]}),e.jsxs(Nt,{children:[e.jsx(Et,{children:"Cancel"}),e.jsx(kt,{onClick:()=>k(!0),children:"Enable"})]})]})}),e.jsx(bt,{open:m==="restart",onOpenChange:p=>!p&&x(null),children:e.jsxs(jt,{children:[e.jsxs(wt,{children:[e.jsx(St,{children:"Restart MCP Server?"}),e.jsx(Ct,{children:"This will restart the local MCP server. It may take 10-30 seconds to complete. Any active connections will be temporarily interrupted."})]}),e.jsxs(Nt,{children:[e.jsx(Et,{children:"Cancel"}),e.jsx(kt,{onClick:g,children:"Restart"})]})]})})]})},hd=()=>{const[t,s]=u.useState(null),[r,n]=u.useState(!0),[a,o]=u.useState(null),[i,l]=u.useState([]),[c,m]=u.useState(!1),[x,v]=u.useState(null),j=u.useCallback(async()=>{let N=null;n(!0),o(null),v(null);try{N=await no(),s(N),n(!1),m(!0);const b=await Tr("fetchMcpTools",void 0);b.error?v(b.error):l(b.tools)}catch(b){const k=b instanceof Error?b.message:"Failed to load";N?v(k):o(k)}finally{n(!1),m(!1)}},[]);u.useEffect(()=>{j()},[j]);const h=async()=>{if(t){m(!0),v(null),l([]);try{const N=await Tr("fetchMcpTools",void 0);N.error?v(N.error):l(N.tools)}catch(N){v(N instanceof Error?N.message:"Failed to fetch tools")}finally{m(!1)}}};return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(ad,{serverUrl:t,isLoading:r,error:a}),e.jsx(fd,{onServerRestart:j}),e.jsx(od,{tools:i,isLoading:c,error:x,onRefresh:h})]})},pd=Xt({name:pe().min(1,"Name is required").max(100,"Name must be 100 characters or less"),query:pe().min(1,"Prompt is required"),scheduleType:As(["daily","hourly","minutes"]),scheduleTime:pe().optional(),scheduleInterval:vr().int().min(1).max(60).optional(),enabled:Ps()}).superRefine((t,s)=>{t.scheduleType==="daily"&&!t.scheduleTime&&s.addIssue({code:Oe.custom,message:"Time is required for daily schedule",path:["scheduleTime"]}),(t.scheduleType==="hourly"||t.scheduleType==="minutes")&&(!t.scheduleInterval||t.scheduleInterval<1)&&s.addIssue({code:Oe.custom,message:"Interval must be at least 1",path:["scheduleInterval"]})}),xd=({open:t,onOpenChange:s,initialValues:r,onSave:n})=>{const a=!!r,o=lr({resolver:cr(pd),defaultValues:{name:"",query:"",scheduleType:"daily",scheduleTime:"09:00",scheduleInterval:1,enabled:!0}}),i=o.watch("scheduleType");u.useEffect(()=>{t&&(r?o.reset({name:r.name,query:r.query,scheduleType:r.scheduleType,scheduleTime:r.scheduleTime||"09:00",scheduleInterval:r.scheduleInterval||1,enabled:r.enabled}):o.reset({name:"",query:"",scheduleType:"daily",scheduleTime:"09:00",scheduleInterval:1,enabled:!0}))},[t,r,o]);const l=c=>{n({name:c.name.trim(),query:c.query.trim(),scheduleType:c.scheduleType,scheduleTime:c.scheduleType==="daily"?c.scheduleTime:void 0,scheduleInterval:c.scheduleType!=="daily"?c.scheduleInterval:void 0,enabled:c.enabled}),o.reset(),s(!1)};return e.jsx(Tt,{open:t,onOpenChange:s,children:e.jsxs(It,{className:"sm:max-w-lg",children:[e.jsxs(At,{children:[e.jsx(Pt,{children:a?"Edit Scheduled Task":"Create Scheduled Task"}),e.jsx(Rt,{children:a?"Update your scheduled task configuration.":"Create a new task that runs automatically on a schedule."})]}),e.jsx(ur,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[e.jsx(te,{control:o.control,name:"name",render:({field:c})=>e.jsxs(re,{children:[e.jsx(se,{children:"Name"}),e.jsx(J,{children:e.jsx(ue,{placeholder:"e.g., Morning Briefing",...c})}),e.jsx(ae,{})]})}),e.jsx(te,{control:o.control,name:"query",render:({field:c})=>e.jsxs(re,{children:[e.jsx(se,{children:"Prompt"}),e.jsx(J,{children:e.jsx(Pr,{placeholder:"What should the agent do? e.g., Check my email and summarize important messages",className:"min-h-[100px] resize-none",...c})}),e.jsx(Fe,{children:"The instruction that will be sent to the agent"}),e.jsx(ae,{})]})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(te,{control:o.control,name:"scheduleType",render:({field:c})=>e.jsxs(re,{children:[e.jsx(se,{children:"Schedule"}),e.jsxs($t,{onValueChange:c.onChange,defaultValue:c.value,value:c.value,children:[e.jsx(J,{children:e.jsx(Kt,{children:e.jsx(Ht,{placeholder:"Select schedule type"})})}),e.jsxs(Wt,{children:[e.jsx(it,{value:"daily",children:"Daily at time"}),e.jsx(it,{value:"hourly",children:"Every N hours"}),e.jsx(it,{value:"minutes",children:"Every N minutes"})]})]}),e.jsx(ae,{})]})}),i==="daily"?e.jsx(te,{control:o.control,name:"scheduleTime",render:({field:c})=>e.jsxs(re,{children:[e.jsx(se,{children:"Time"}),e.jsx(J,{children:e.jsx(ue,{type:"time",...c})}),e.jsx(ae,{})]})}):e.jsx(te,{control:o.control,name:"scheduleInterval",render:({field:c})=>e.jsxs(re,{children:[e.jsxs(se,{children:["Interval (",i==="hourly"?"hours":"minutes",")"]}),e.jsx(J,{children:e.jsx(ue,{type:"number",min:1,max:i==="hourly"?24:60,value:c.value??"",onChange:m=>c.onChange(m.target.value?Number(m.target.value):void 0)})}),e.jsx(ae,{})]})})]}),e.jsx(te,{control:o.control,name:"enabled",render:({field:c})=>e.jsxs(re,{className:"flex flex-row items-center gap-3 space-y-0",children:[e.jsx(J,{children:e.jsx(sa,{checked:c.value,onCheckedChange:c.onChange})}),e.jsx(se,{className:"font-normal",children:"Enable this task"})]})}),e.jsxs(Zt,{className:"gap-2 pt-2",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(V,{type:"submit",children:a?"Update":"Create"})]})]})})]})})},gd=({onAddClick:t})=>e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-orange)]/10",children:e.jsx(zs,{className:"h-6 w-6 text-[var(--accent-orange)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"Scheduled Tasks"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Automate recurring browser tasks"})]}),e.jsxs(V,{onClick:t,className:"border-[var(--accent-orange)] bg-[var(--accent-orange)]/10 text-[var(--accent-orange)] hover:bg-[var(--accent-orange)]/20 hover:text-[var(--accent-orange)]",variant:"outline",children:[e.jsx(We,{className:"mr-1.5 h-4 w-4"}),"New Task"]})]})});Ze.extend(uo);Ze.extend(Bo);function vd(t){return t.scheduleType==="daily"&&t.scheduleTime?`Daily at ${t.scheduleTime}`:t.scheduleType==="hourly"&&t.scheduleInterval?t.scheduleInterval===1?"Every hour":`Every ${t.scheduleInterval} hours`:t.scheduleType==="minutes"&&t.scheduleInterval?t.scheduleInterval===1?"Every minute":`Every ${t.scheduleInterval} minutes`:"Not scheduled"}const yd=t=>Ze(t).fromNow();function bd(t,s){if(!s)return"Running...";const r=Ze(s).diff(Ze(t)),n=Ze.duration(r),a=Math.floor(n.asMinutes()),o=n.seconds();return a===0?`${o}s`:`${a}m ${o}s`}const jd=t=>Ze(t).format("MMM D, h:mm A"),wd=({job:t,onEdit:s,onDelete:r,onToggle:n,onRun:a,onViewRun:o})=>{const[i,l]=u.useState(!1),{jobRuns:c}=mo(),m=u.useMemo(()=>c.filter(x=>x.jobId===t.id).sort((x,v)=>new Date(v.startedAt).getTime()-new Date(x.startedAt).getTime()),[c,t.id]);return e.jsxs("div",{className:"rounded-xl border border-border bg-card p-4 shadow-sm transition-all hover:border-[var(--accent-orange)]/50 hover:shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(yt,{checked:t.enabled,onCheckedChange:n,"aria-label":`${t.enabled?"Disable":"Enable"} ${t.name}`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx("span",{className:"truncate font-semibold",children:t.name}),!t.enabled&&e.jsx("span",{className:"rounded bg-muted px-1.5 py-0.5 text-muted-foreground text-xs",children:"Disabled"})]}),e.jsxs("p",{className:"mb-2 line-clamp-1 text-muted-foreground text-sm",children:['"',t.query,'"']}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs",children:[e.jsx("span",{children:vd(t)}),t.lastRunAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last run: ",yd(t.lastRunAt)]})]})]})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[e.jsxs(V,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(ri,{className:"mr-1.5 h-3 w-3"}),"Test"]}),e.jsxs(V,{variant:"outline",size:"sm",onClick:s,children:[e.jsx(ei,{className:"mr-1.5 h-3 w-3"}),"Edit"]}),e.jsx(V,{variant:"ghost",size:"icon-sm",onClick:r,className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive","aria-label":`Delete ${t.name}`,children:e.jsx(rr,{className:"h-4 w-4"})})]})]}),m.length>0&&e.jsxs(Qt,{open:i,onOpenChange:l,className:"mt-4",children:[e.jsxs(er,{className:"flex w-full items-center gap-2 text-muted-foreground text-sm hover:text-foreground",children:[e.jsx(dt,{className:`h-4 w-4 transition-transform duration-200 ${i?"rotate-180":""}`}),e.jsxs("span",{children:["Run History (",m.length,")"]})]}),e.jsx(tr,{className:"pt-3",children:e.jsx("div",{className:"space-y-2",children:m.map(x=>e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-background p-3",children:[x.status==="completed"?e.jsx(Ar,{className:"h-4 w-4 shrink-0 text-green-500"}):x.status==="failed"?e.jsx(Us,{className:"h-4 w-4 shrink-0 text-destructive"}):e.jsx(Pe,{className:"h-4 w-4 shrink-0 animate-spin text-accent-orange"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:jd(x.startedAt)}),e.jsx("span",{className:"text-muted-foreground text-xs",children:bd(x.startedAt,x.completedAt)})]}),x.status==="failed"&&x.result&&e.jsx("p",{className:"mt-1 line-clamp-1 text-destructive text-xs",children:x.result})]}),e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>o(x),className:"shrink-0 text-muted-foreground hover:text-foreground",children:"View"})]},x.id))})})]})]})},Nd=({jobs:t,onEdit:s,onDelete:r,onToggle:n,onRun:a,onViewRun:o})=>t.length===0?e.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:e.jsx("div",{className:"rounded-lg border border-border border-dashed py-8 text-center",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No scheduled tasks yet. Create one to automate recurring workflows."})})}):e.jsx("div",{className:"space-y-3",children:t.map(i=>e.jsx(wd,{job:i,onEdit:()=>s(i),onDelete:()=>r(i.id),onToggle:l=>n(i.id,l),onRun:()=>a(i.id),onViewRun:o},i.id))}),Sd=()=>{const{jobs:t,addJob:s,editJob:r,toggleJob:n,removeJob:a,runJob:o}=fo(),[i,l]=u.useState(!1),[c,m]=u.useState(null),[x,v]=u.useState(null),[j,h]=u.useState(null),N=()=>{m(null),l(!0)},b=T=>{m(T),l(!0)},k=T=>{v(T)},w=async()=>{x&&(await a(x),v(null),Ne(Uo))},g=async T=>{c?(await r(c.id,T),Ne(Oo,{scheduleType:T.scheduleType,interval:T.scheduleInterval,time:T.scheduleTime})):(await s(T),Ne(Fo,{scheduleType:T.scheduleType,interval:T.scheduleInterval,time:T.scheduleTime}))},p=async(T,$)=>{await n(T,$),Ne(Lo)},S=async T=>{await o(T),Ne(Mo)},C=T=>{h(T),Ne(Do)},M=x?t.find(T=>T.id===x):null;return e.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[e.jsx(gd,{onAddClick:N}),e.jsx(Nd,{jobs:t,onEdit:b,onDelete:k,onToggle:p,onRun:S,onViewRun:C}),e.jsx(xd,{open:i,onOpenChange:l,initialValues:c,onSave:g}),e.jsx(ho,{run:j,jobName:j?t.find(T=>T.id===j.jobId)?.name:void 0,onOpenChange:T=>!T&&h(null)}),e.jsx(bt,{open:x!==null,onOpenChange:T=>!T&&v(null),children:e.jsxs(jt,{children:[e.jsxs(wt,{children:[e.jsx(St,{children:"Delete Scheduled Task"}),e.jsxs(Ct,{children:['Delete "',M?.name,'"? This will also remove all run history for this task.']})]}),e.jsxs(Nt,{children:[e.jsx(Et,{children:"Cancel"}),e.jsx(kt,{onClick:w,children:"Delete"})]})]})})]})};function Cd(){return new URLSearchParams(window.location.search).get("page")==="survey"?"/jtbd-agent":"/ai"}const kd=()=>{const t=Cd();return e.jsx(Wa,{children:e.jsx(qa,{children:e.jsxs(_e,{element:e.jsx(Gc,{}),children:[e.jsx(_e,{index:!0,element:e.jsx(Ga,{to:t,replace:!0})}),e.jsx(_e,{path:"ai",element:e.jsx(ps,{},"ai")}),e.jsx(_e,{path:"chat",element:e.jsx(sd,{})}),e.jsx(_e,{path:"search",element:null}),e.jsx(_e,{path:"connect-mcp",element:e.jsx(wc,{})}),e.jsx(_e,{path:"mcp",element:e.jsx(hd,{})}),e.jsx(_e,{path:"customization",element:e.jsx(Ac,{})}),e.jsx(_e,{path:"onboarding",element:e.jsx(ps,{},"onboarding")}),e.jsx(_e,{path:"scheduled",element:e.jsx(Sd,{})}),e.jsx(_e,{path:"jtbd-agent",element:e.jsx(Wc,{})})]})})})},Ns=document.getElementById("root");Ns&&Ya.createRoot(Ns,Ja).render(e.jsx(U.StrictMode,{children:e.jsx(Za,{children:e.jsxs(Xa,{children:[e.jsx(kd,{}),e.jsx(Qa,{})]})})}));
