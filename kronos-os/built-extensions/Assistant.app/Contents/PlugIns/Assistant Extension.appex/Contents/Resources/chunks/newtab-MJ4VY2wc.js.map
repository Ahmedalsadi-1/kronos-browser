{"version":3,"file":"newtab-MJ4VY2wc.js","sources":["../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/calendar.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/file.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/image.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/messages-square.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/scale.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/tags.js","../../../../../node_modules/.bun/lucide-react@0.554.0+83d5fd7b249dbeef/node_modules/lucide-react/dist/esm/icons/user-pen.js","../../../../../node_modules/.bun/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../../node_modules/.bun/prop-types@15.8.1/node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../../../node_modules/.bun/prop-types@15.8.1/node_modules/prop-types/factoryWithThrowingShims.js","../../../../../node_modules/.bun/prop-types@15.8.1/node_modules/prop-types/index.js","../../../../../node_modules/.bun/react-is@18.2.0/node_modules/react-is/cjs/react-is.production.min.js","../../../../../node_modules/.bun/react-is@18.2.0/node_modules/react-is/index.js","../../../../../node_modules/.bun/compute-scroll-into-view@3.1.1/node_modules/compute-scroll-into-view/dist/index.js","../../../../../node_modules/.bun/downshift@9.0.13+83d5fd7b249dbeef/node_modules/downshift/dist/downshift.esm.js","../../../../../node_modules/.bun/motion-dom@12.23.23/node_modules/motion-dom/dist/es/utils/transform.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/context/DeprecatedLayoutGroupContext.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/utils/use-is-mounted.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/utils/use-force-update.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/projection/node/group.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/components/LayoutGroup/index.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/value/use-motion-value.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/value/use-combine-values.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/value/use-motion-template.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/value/use-computed.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/value/use-transform.mjs","../../../../../node_modules/.bun/framer-motion@12.23.26+67f6792bdf102c28/node_modules/framer-motion/dist/es/utils/use-animation-frame.mjs","../../../components/elements/glowing-border.tsx","../../../lib/messaging/sidepanel/openSidepanelWithSearch.ts","../../../entrypoints/newtab/index/FooterLinks.tsx","../../../../../node_modules/.bun/es-toolkit@1.43.0/node_modules/es-toolkit/dist/compat/predicate/isSymbol.mjs","../../../../../node_modules/.bun/es-toolkit@1.43.0/node_modules/es-toolkit/dist/compat/util/toNumber.mjs","../../../../../node_modules/.bun/es-toolkit@1.43.0/node_modules/es-toolkit/dist/compat/util/toFinite.mjs","../../../../../node_modules/.bun/es-toolkit@1.43.0/node_modules/es-toolkit/dist/compat/util/toInteger.mjs","../../../../../node_modules/.bun/es-toolkit@1.43.0/node_modules/es-toolkit/dist/array/take.mjs","../../../entrypoints/newtab/index/lib/aiTabSuggestions/useAITabSuggestions.ts","../../../entrypoints/newtab/index/lib/browserOSSuggestions/useBrowserOSSuggestions.ts","../../../entrypoints/newtab/index/lib/searchSuggestions/getSearchSuggestions.ts","../../../entrypoints/newtab/index/lib/searchSuggestions/useSearchSuggestions.ts","../../../entrypoints/newtab/index/lib/suggestions/useSuggestions.ts","../../../entrypoints/newtab/index/NewTabBranding.tsx","../../../entrypoints/newtab/index/ScheduleResults.tsx","../../../entrypoints/newtab/index/SearchSuggestions.tsx","../../../lib/constants/shortcuts.ts","../../../lib/useIsMac.ts","../../../entrypoints/newtab/index/ShortcutsDialog.tsx","../../../lib/getFavicons.ts","../../../entrypoints/newtab/index/useTopSites.ts","../../../entrypoints/newtab/index/TopSites.tsx","../../../entrypoints/newtab/index/NewTab.tsx","../../../entrypoints/newtab/layout/NewTabFocusGrid.tsx","../../../entrypoints/newtab/layout/NewTabLayout.tsx","../../../entrypoints/newtab/personalize/templates.ts","../../../entrypoints/newtab/personalize/Personalize.tsx","../../../entrypoints/newtab/App.tsx","../../../entrypoints/newtab/main.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n];\nconst Calendar = createLucideIcon(\"calendar\", __iconNode);\n\nexport { __iconNode, Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }]\n];\nconst File = createLucideIcon(\"file\", __iconNode);\n\nexport { __iconNode, File as default };\n//# sourceMappingURL=file.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\",\n      key: \"1n2ejm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1\",\n      key: \"1qfcsi\"\n    }\n  ]\n];\nconst MessagesSquare = createLucideIcon(\"messages-square\", __iconNode);\n\nexport { __iconNode, MessagesSquare as default };\n//# sourceMappingURL=messages-square.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z\", key: \"7g6ntu\" }],\n  [\"path\", { d: \"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z\", key: \"ijws7r\" }],\n  [\"path\", { d: \"M7 21h10\", key: \"1b0cd5\" }],\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"path\", { d: \"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2\", key: \"3gwbw2\" }]\n];\nconst Scale = createLucideIcon(\"scale\", __iconNode);\n\nexport { __iconNode, Scale as default };\n//# sourceMappingURL=scale.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z\",\n      key: \"16rjxf\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193\", key: \"178nd4\" }\n  ],\n  [\"circle\", { cx: \"10.5\", cy: \"6.5\", r: \".5\", fill: \"currentColor\", key: \"12ikhr\" }]\n];\nconst Tags = createLucideIcon(\"tags\", __iconNode);\n\nexport { __iconNode, Tags as default };\n//# sourceMappingURL=tags.js.map\n","/**\n * @license lucide-react v0.554.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11.5 15H7a4 4 0 0 0-4 4v2\", key: \"15lzij\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z\",\n      key: \"1817ys\"\n    }\n  ],\n  [\"circle\", { cx: \"10\", cy: \"7\", r: \"4\", key: \"e45bow\" }]\n];\nconst UserPen = createLucideIcon(\"user-pen\", __iconNode);\n\nexport { __iconNode, UserPen as default };\n//# sourceMappingURL=user-pen.js.map\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * @license React\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var b=Symbol.for(\"react.element\"),c=Symbol.for(\"react.portal\"),d=Symbol.for(\"react.fragment\"),e=Symbol.for(\"react.strict_mode\"),f=Symbol.for(\"react.profiler\"),g=Symbol.for(\"react.provider\"),h=Symbol.for(\"react.context\"),k=Symbol.for(\"react.server_context\"),l=Symbol.for(\"react.forward_ref\"),m=Symbol.for(\"react.suspense\"),n=Symbol.for(\"react.suspense_list\"),p=Symbol.for(\"react.memo\"),q=Symbol.for(\"react.lazy\"),t=Symbol.for(\"react.offscreen\"),u;u=Symbol.for(\"react.module.reference\");\nfunction v(a){if(\"object\"===typeof a&&null!==a){var r=a.$$typeof;switch(r){case b:switch(a=a.type,a){case d:case f:case e:case m:case n:return a;default:switch(a=a&&a.$$typeof,a){case k:case h:case l:case q:case p:case g:return a;default:return r}}case c:return r}}}exports.ContextConsumer=h;exports.ContextProvider=g;exports.Element=b;exports.ForwardRef=l;exports.Fragment=d;exports.Lazy=q;exports.Memo=p;exports.Portal=c;exports.Profiler=f;exports.StrictMode=e;exports.Suspense=m;\nexports.SuspenseList=n;exports.isAsyncMode=function(){return!1};exports.isConcurrentMode=function(){return!1};exports.isContextConsumer=function(a){return v(a)===h};exports.isContextProvider=function(a){return v(a)===g};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===b};exports.isForwardRef=function(a){return v(a)===l};exports.isFragment=function(a){return v(a)===d};exports.isLazy=function(a){return v(a)===q};exports.isMemo=function(a){return v(a)===p};\nexports.isPortal=function(a){return v(a)===c};exports.isProfiler=function(a){return v(a)===f};exports.isStrictMode=function(a){return v(a)===e};exports.isSuspense=function(a){return v(a)===m};exports.isSuspenseList=function(a){return v(a)===n};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===d||a===f||a===e||a===m||a===n||a===t||\"object\"===typeof a&&null!==a&&(a.$$typeof===q||a.$$typeof===p||a.$$typeof===g||a.$$typeof===h||a.$$typeof===l||a.$$typeof===u||void 0!==a.getModuleId)?!0:!1};exports.typeOf=v;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","const t=t=>\"object\"==typeof t&&null!=t&&1===t.nodeType,e=(t,e)=>(!e||\"hidden\"!==t)&&(\"visible\"!==t&&\"clip\"!==t),n=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const o=getComputedStyle(t,null);return e(o.overflowY,n)||e(o.overflowX,n)||(t=>{const e=(t=>{if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}})(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)})(t)}return!1},o=(t,e,n,o,l,r,i,s)=>r<t&&i>e||r>t&&i<e?0:r<=t&&s<=n||i>=e&&s>=n?r-t-o:i>e&&s<n||r<t&&s>n?i-e+l:0,l=t=>{const e=t.parentElement;return null==e?t.getRootNode().host||null:e},r=(e,r)=>{var i,s,d,h;if(\"undefined\"==typeof document)return[];const{scrollMode:c,block:f,inline:u,boundary:a,skipOverflowHiddenElements:g}=r,p=\"function\"==typeof a?a:t=>t!==a;if(!t(e))throw new TypeError(\"Invalid target\");const m=document.scrollingElement||document.documentElement,w=[];let W=e;for(;t(W)&&p(W);){if(W=l(W),W===m){w.push(W);break}null!=W&&W===document.body&&n(W)&&!n(document.documentElement)||null!=W&&n(W,g)&&w.push(W)}const b=null!=(s=null==(i=window.visualViewport)?void 0:i.width)?s:innerWidth,H=null!=(h=null==(d=window.visualViewport)?void 0:d.height)?h:innerHeight,{scrollX:y,scrollY:M}=window,{height:v,width:E,top:x,right:C,bottom:I,left:R}=e.getBoundingClientRect(),{top:T,right:B,bottom:F,left:V}=(t=>{const e=window.getComputedStyle(t);return{top:parseFloat(e.scrollMarginTop)||0,right:parseFloat(e.scrollMarginRight)||0,bottom:parseFloat(e.scrollMarginBottom)||0,left:parseFloat(e.scrollMarginLeft)||0}})(e);let k=\"start\"===f||\"nearest\"===f?x-T:\"end\"===f?I+F:x+v/2-T+F,D=\"center\"===u?R+E/2-V+B:\"end\"===u?C+B:R-V;const L=[];for(let t=0;t<w.length;t++){const e=w[t],{height:l,width:r,top:i,right:s,bottom:d,left:h}=e.getBoundingClientRect();if(\"if-needed\"===c&&x>=0&&R>=0&&I<=H&&C<=b&&(e===m&&!n(e)||x>=i&&I<=d&&R>=h&&C<=s))return L;const a=getComputedStyle(e),g=parseInt(a.borderLeftWidth,10),p=parseInt(a.borderTopWidth,10),W=parseInt(a.borderRightWidth,10),T=parseInt(a.borderBottomWidth,10);let B=0,F=0;const V=\"offsetWidth\"in e?e.offsetWidth-e.clientWidth-g-W:0,S=\"offsetHeight\"in e?e.offsetHeight-e.clientHeight-p-T:0,X=\"offsetWidth\"in e?0===e.offsetWidth?0:r/e.offsetWidth:0,Y=\"offsetHeight\"in e?0===e.offsetHeight?0:l/e.offsetHeight:0;if(m===e)B=\"start\"===f?k:\"end\"===f?k-H:\"nearest\"===f?o(M,M+H,H,p,T,M+k,M+k+v,v):k-H/2,F=\"start\"===u?D:\"center\"===u?D-b/2:\"end\"===u?D-b:o(y,y+b,b,g,W,y+D,y+D+E,E),B=Math.max(0,B+M),F=Math.max(0,F+y);else{B=\"start\"===f?k-i-p:\"end\"===f?k-d+T+S:\"nearest\"===f?o(i,d,l,p,T+S,k,k+v,v):k-(i+l/2)+S/2,F=\"start\"===u?D-h-g:\"center\"===u?D-(h+r/2)+V/2:\"end\"===u?D-s+W+V:o(h,s,r,g,W+V,D,D+E,E);const{scrollLeft:t,scrollTop:n}=e;B=0===Y?0:Math.max(0,Math.min(n+B/Y,e.scrollHeight-l/Y+S)),F=0===X?0:Math.max(0,Math.min(t+F/X,e.scrollWidth-r/X+V)),k+=n-B,D+=t-F}L.push({el:e,top:B,left:F})}return L};export{r as compute};//# sourceMappingURL=index.js.map\n","import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { cloneElement, Component, useMemo, useRef, useEffect, useLayoutEffect, useCallback, useReducer } from 'react';\nimport { isForwardRef } from 'react-is';\nimport { compute } from 'compute-scroll-into-view';\nimport { __assign } from 'tslib';\n\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n  var actions = compute(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @param {Window} environment The window context where downshift renders.\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child, environment) {\n  var result = parent === child || child instanceof environment.Node && parent.contains && parent.contains(child);\n  return result;\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId;\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  // istanbul ignore next\n  if ('useId' in React) {\n    console.warn(\"It is not necessary to call resetIdCounter when using React 18+\");\n    return;\n  }\n  idCounter = 0;\n}\n\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specify if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n    resultCount = _ref2.resultCount,\n    previousResultCount = _ref2.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n  return '';\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  return element.props;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\nfunction getState(state, props) {\n  if (!state || !props) {\n    return state;\n  }\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n    keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {number} offset The offset from the current highlightedIndex to start searching.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean?} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next highlightedIndex.\n */\nfunction getHighlightedIndex(start, offset, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (count === 0) {\n    return -1;\n  }\n  var itemsLastIndex = count - 1;\n  if (typeof start !== 'number' || start < 0 || start > itemsLastIndex) {\n    start = offset > 0 ? -1 : itemsLastIndex + 1;\n  }\n  var current = start + offset;\n  if (current < 0) {\n    current = circular ? itemsLastIndex : 0;\n  } else if (current > itemsLastIndex) {\n    current = circular ? 0 : itemsLastIndex;\n  }\n  var highlightedIndex = getNonDisabledIndex(current, offset < 0, items, isItemDisabled, circular);\n  if (highlightedIndex === -1) {\n    return start >= count ? -1 : start;\n  }\n  return highlightedIndex;\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {boolean} backwards If true, it will search backwards from the start.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next non-disabled index.\n */\nfunction getNonDisabledIndex(start, backwards, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (backwards) {\n    for (var index = start; index >= 0; index--) {\n      if (!isItemDisabled(items[index], index)) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = start; _index < count; _index++) {\n      if (!isItemDisabled(items[_index], _index)) {\n        return _index;\n      }\n    }\n  }\n  if (circular) {\n    return getNonDisabledIndex(backwards ? count - 1 : 0, backwards, items, isItemDisabled);\n  }\n  return -1;\n}\n\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Window} environment The window context where downshift renders.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\nfunction targetWithinDownshift(target, downshiftElements, environment, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n  return environment && downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target, environment) || checkActiveElement && isOrContainsNode(contextNode, environment.document.activeElement, environment));\n  });\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\nfunction getStatusDiv(documentProp) {\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\nfunction setStatus(status, documentProp) {\n  if (!status || !documentProp) {\n    return;\n  }\n  var div = getStatusDiv(documentProp);\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n\n/**\n * Removes the status element from the DOM\n * @param {Document} documentProp \n */\nfunction cleanupStatusDiv(documentProp) {\n  var statusDiv = documentProp == null ? void 0 : documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    statusDiv.remove();\n  }\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  blurButton: blurButton,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  clickButton: clickButton,\n  clickItem: clickItem,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownEnd: keyDownEnd,\n  keyDownEnter: keyDownEnter,\n  keyDownEscape: keyDownEscape,\n  keyDownHome: keyDownHome,\n  keyDownSpaceButton: keyDownSpaceButton,\n  mouseUp: mouseUp,\n  touchEnd: touchEnd,\n  unknown: unknown\n});\n\nvar _excluded$3 = [\"refKey\", \"ref\"],\n  _excluded2$3 = [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"],\n  _excluded3$2 = [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"],\n  _excluded4$2 = [\"refKey\", \"ref\"],\n  _excluded5 = [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"];\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    function Downshift(_props) {\n      var _this;\n      _this = _Component.call(this, _props) || this;\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n      _this.items = [];\n      // itemCount can be changed asynchronously\n      // from within downshift (so it can't come from a prop)\n      // this is why we store it as an instance and use\n      // getItemCount rather than just use items.length\n      // (to support windowing + async)\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      /**\n       * @param {Function} fn the function to call after the time\n       * @param {Number} time the time to wait\n       */\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n        _this.timeoutIds.push(id);\n      };\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n      _this.isItemDisabled = function (_item, index) {\n        var currentElementNode = _this.getItemNodeFromIndex(index);\n        return currentElementNode && currentElementNode.hasAttribute('disabled');\n      };\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n        if (item == null) {\n          return;\n        }\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n      // any piece of our state can live in two places:\n      // 1. Uncontrolled: it's internal (this.state)\n      //    We will call this.setState to update that state\n      // 2. Controlled: it's external (this.props)\n      //    We will call this.props.onStateChange to update that state\n      //\n      // In addition, we'll call this.props.onChange if the\n      // selectedItem is changed.\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function';\n\n        // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n        return _this.setState(function (state) {\n          var _newStateToSet;\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n          // Your own function that could modify the state that will be set.\n          newStateToSet = _this.props.stateReducer(state, newStateToSet);\n\n          // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n          // this keeps track of the object we want to call with setState\n          var nextState = {};\n          // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n          (_newStateToSet = newStateToSet).type || (_newStateToSet.type = unknown);\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            }\n            // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n            if (key === 'type') {\n              return;\n            }\n            newStateToSet[key];\n            // if it's coming from props, then we don't care to set it internally\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          });\n\n          // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)();\n\n          // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          }\n          // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n      //////////////////////////// ROOT\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n        var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, _excluded$3);\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n        var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : undefined, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                  highlightedIndex = _this2$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, 1, {\n                  length: itemCount\n                }, _this2.isItemDisabled, true);\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                  highlightedIndex = _this3$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, -1, {\n                  length: itemCount\n                }, _this3.isItemDisabled, true);\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n          var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      //////////////////////////// BUTTON\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this$getState3 = this.getState(),\n            isOpen = _this$getState3.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting downwards from 0 if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(0, false, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this$getState4 = this.getState(),\n            isOpen = _this$getState4.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting upwards from last index if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(itemCount - 1, true, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick;\n          _ref3.onPress;\n          var onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$3);\n        var _this$getState5 = _this.getState(),\n          isOpen = _this$getState5.isOpen;\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_this, event);\n        }\n      };\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault();\n        // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n        /* istanbul ignore if (can't reasonably test this) */\n        if (_this.props.environment) {\n          var _this$props$environme = _this.props.environment.document,\n            body = _this$props$environme.body,\n            activeElement = _this$props$environme.activeElement;\n          if (body && body === activeElement) {\n            event.target.focus();\n          }\n        }\n        // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n        _this.internalSetTimeout(function () {\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          if ((activeElement == null || activeElement.id !== _this.inputId) && activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n      /////////////////////////////// LABEL\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n      /////////////////////////////// INPUT\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput;\n          _ref4.onChangeText;\n          var rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$2);\n        var onChangeKey;\n        var eventHandlers = {};\n\n        /* istanbul ignore next (preact) */\n        {\n          onChangeKey = 'onChange';\n        }\n        var _this$getState6 = _this.getState(),\n          inputValue = _this$getState6.inputValue,\n          isOpen = _this$getState6.isOpen,\n          highlightedIndex = _this$getState6.highlightedIndex;\n        if (!rest.disabled) {\n          var _eventHandlers;\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : undefined,\n          'aria-controls': isOpen ? _this.menuId : undefined,\n          'aria-labelledby': rest && rest['aria-label'] ? undefined : _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_this, event);\n        }\n      };\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var _activeElement$datase;\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          var downshiftButtonIsActive = (activeElement == null || (_activeElement$datase = activeElement.dataset) == null ? void 0 : _activeElement$datase.toggle) && _this._rootNode && _this._rootNode.contains(activeElement);\n          if (!downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n      /////////////////////////////// MENU\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, _excluded4$2);\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? undefined : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ MENU\n      /////////////////////////////// ITEM\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick;\n          _ref7.onPress;\n          var index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ? /* istanbul ignore next */undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, _excluded5);\n        if (index === undefined) {\n          _this.items.push(item);\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            });\n\n            // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n            _this.avoidScrolling = true;\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers);\n\n        // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n            isOpen = _this$getState7.isOpen,\n            highlightedIndex = _this$getState7.highlightedIndex;\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n          cbToCb(cb)();\n        });\n      };\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n      _this.updateStatus = debounce(function () {\n        var _this$props;\n        if (!((_this$props = _this.props) != null && (_this$props = _this$props.environment) != null && _this$props.document)) {\n          return;\n        }\n        var state = _this.getState();\n        var item = _this.items[state.highlightedIndex];\n        var resultCount = _this.getItemCount();\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n      var _this$props2 = _this.props,\n        defaultHighlightedIndex = _this$props2.defaultHighlightedIndex,\n        _this$props2$initialH = _this$props2.initialHighlightedIndex,\n        _highlightedIndex = _this$props2$initialH === void 0 ? defaultHighlightedIndex : _this$props2$initialH,\n        defaultIsOpen = _this$props2.defaultIsOpen,\n        _this$props2$initialI = _this$props2.initialIsOpen,\n        _isOpen = _this$props2$initialI === void 0 ? defaultIsOpen : _this$props2$initialI,\n        _this$props2$initialI2 = _this$props2.initialInputValue,\n        _inputValue = _this$props2$initialI2 === void 0 ? '' : _this$props2$initialI2,\n        _this$props2$initialS = _this$props2.initialSelectedItem,\n        _selectedItem = _this$props2$initialS === void 0 ? null : _this$props2$initialS;\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n      _this.state = _state;\n      return _this;\n    }\n    _inheritsLoose(Downshift, _Component);\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */;\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n      return getState(stateToMerge, this.props);\n    };\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n      return itemCount;\n    };\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment ? this.props.environment.document.getElementById(this.getItemId(index)) : null;\n    };\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var itemCount = this.getItemCount();\n      var _this$getState8 = this.getState(),\n        highlightedIndex = _this$getState8.highlightedIndex;\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, amount, {\n          length: itemCount\n        }, this.isItemDisabled, true);\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n        highlightedIndex = _this$getState9.highlightedIndex,\n        inputValue = _this$getState9.inputValue,\n        selectedItem = _this$getState9.selectedItem,\n        isOpen = _this$getState9.isOpen;\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    };\n    _proto.componentDidMount = function componentDidMount() {\n      var _this4 = this;\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && true && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n\n      /* istanbul ignore if (react-native or SSR) */\n      if (!this.props.environment) {\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n        };\n      } else {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this4.isMouseDown = true;\n        };\n        var onMouseUp = function onMouseUp(event) {\n          _this4.isMouseDown = false;\n          // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment);\n          if (!contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: mouseUp\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n        var onTouchStart = function onTouchStart() {\n          _this4.isTouchMove = false;\n        };\n        var onTouchMove = function onTouchMove() {\n          _this4.isTouchMove = true;\n        };\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment, false);\n          if (!_this4.isTouchMove && !contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: touchEnd\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n          _this4.updateStatus.cancel();\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref0 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref0.highlightedIndex;\n      var _ref1 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref1.highlightedIndex;\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n\n      /* istanbul ignore else (react-native) */\n      {\n        this.updateStatus();\n      }\n    };\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop);\n      // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n      this.clearItems();\n      // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined;\n      // we do something similar for getMenuProps\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined;\n      // we do something similar for getLabelProps\n      this.getLabelProps.called = false;\n      // and something similar for getInputProps\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n      if (!element) {\n        return null;\n      }\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n\n      /* istanbul ignore next */\n      return undefined;\n    };\n    return Downshift;\n  }(Component);\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: /* istanbul ignore next (ssr) */\n    typeof window === 'undefined' || false ? undefined : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n} : void 0;\nfunction validateGetMenuPropsCalledCorrectly(node, _ref10) {\n  var refKey = _ref10.refKey;\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\nfunction validateGetRootPropsCalledCorrectly(element, _ref11) {\n  var refKey = _ref11.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n\n/**\n * Debounced call for updating the a11y message.\n */\nvar updateA11yStatus = debounce(function (status, document) {\n  setStatus(status, document);\n}, 200);\n\n// istanbul ignore next\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\n// istanbul ignore next\nvar useElementIds = 'useId' in React // Avoid conditional useId call\n? function useElementIds(_ref) {\n  var id = _ref.id,\n    labelId = _ref.labelId,\n    menuId = _ref.menuId,\n    getItemId = _ref.getItemId,\n    toggleButtonId = _ref.toggleButtonId,\n    inputId = _ref.inputId;\n  // Avoid conditional useId call\n  var reactId = \"downshift-\" + React.useId();\n  if (!id) {\n    id = reactId;\n  }\n  var elementIds = useMemo(function () {\n    return {\n      labelId: labelId || id + \"-label\",\n      menuId: menuId || id + \"-menu\",\n      getItemId: getItemId || function (index) {\n        return id + \"-item-\" + index;\n      },\n      toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n      inputId: inputId || id + \"-input\"\n    };\n  }, [getItemId, id, inputId, labelId, menuId, toggleButtonId]);\n  return elementIds;\n} : function useElementIds(_ref2) {\n  var _ref2$id = _ref2.id,\n    id = _ref2$id === void 0 ? \"downshift-\" + generateId() : _ref2$id,\n    labelId = _ref2.labelId,\n    menuId = _ref2.menuId,\n    getItemId = _ref2.getItemId,\n    toggleButtonId = _ref2.toggleButtonId,\n    inputId = _ref2.inputId;\n  var elementIds = useMemo(function () {\n    return {\n      labelId: labelId || id + \"-label\",\n      menuId: menuId || id + \"-menu\",\n      getItemId: getItemId || function (index) {\n        return id + \"-item-\" + index;\n      },\n      toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n      inputId: inputId || id + \"-input\"\n    };\n  }, [getItemId, id, inputId, labelId, menuId, toggleButtonId]);\n  return elementIds;\n};\nfunction getItemAndIndex(itemProp, indexProp, items, errorMessage) {\n  var item, index;\n  if (itemProp === undefined) {\n    if (indexProp === undefined) {\n      throw new Error(errorMessage);\n    }\n    item = items[indexProp];\n    index = indexProp;\n  } else {\n    index = indexProp === undefined ? items.indexOf(itemProp) : indexProp;\n    item = itemProp;\n  }\n  return [item, index];\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val);\n  // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n  ref.current = val;\n  return ref;\n}\n\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useEnhancedReducer(reducer, props, createInitialState, isStateEqual) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n  var _useReducer = useReducer(enhancedReducer, props, createInitialState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    var prevState = getState(prevStateRef.current, action == null ? void 0 : action.props);\n    var shouldCallOnChangeProps = action && prevStateRef.current && !isStateEqual(prevState, state);\n    if (shouldCallOnChangeProps) {\n      callOnChangeProps(action, prevState, state);\n    }\n    prevStateRef.current = state;\n  }, [state, action, isStateEqual]);\n  return [state, dispatchWithProps];\n}\n\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer$1(reducer, props, createInitialState, isStateEqual) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$3 = {\n  itemToString: function itemToString(item) {\n    return item ? String(item) : '';\n  },\n  itemToKey: function itemToKey(item) {\n    return item;\n  },\n  stateReducer: stateReducer,\n  scrollIntoView: scrollIntoView,\n  environment: /* istanbul ignore next (ssr) */\n  typeof window === 'undefined' || false ? undefined : window\n};\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var defaultValue = props[\"default\" + capitalizeString(propKey)];\n  if (defaultValue !== undefined) {\n    return defaultValue;\n  }\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var value = props[propKey];\n  if (value !== undefined) {\n    return value;\n  }\n  var initialValue = props[\"initial\" + capitalizeString(propKey)];\n  if (initialValue !== undefined) {\n    return initialValue;\n  }\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialHighlightedIndex(props);\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.findIndex(function (item) {\n      return props.itemToKey(item) === props.itemToKey(selectedItem);\n    }) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n    initialHighlightedIndex = props.initialHighlightedIndex,\n    defaultHighlightedIndex = props.defaultHighlightedIndex,\n    isItemDisabled = props.isItemDisabled,\n    itemToKey = props.itemToKey;\n  var selectedItem = state.selectedItem,\n    highlightedIndex = state.highlightedIndex;\n  if (items.length === 0) {\n    return -1;\n  }\n\n  // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex && !isItemDisabled(items[initialHighlightedIndex], initialHighlightedIndex)) {\n    return initialHighlightedIndex;\n  }\n  if (defaultHighlightedIndex !== undefined && !isItemDisabled(items[defaultHighlightedIndex], defaultHighlightedIndex)) {\n    return defaultHighlightedIndex;\n  }\n  if (selectedItem) {\n    return items.findIndex(function (item) {\n      return itemToKey(selectedItem) === itemToKey(item);\n    });\n  }\n  if (offset < 0 && !isItemDisabled(items[items.length - 1], items.length - 1)) {\n    return items.length - 1;\n  }\n  if (offset > 0 && !isItemDisabled(items[0], 0)) {\n    return 0;\n  }\n  return -1;\n}\n/**\n * Tracks mouse and touch events, such as mouseDown, touchMove and touchEnd.\n *\n * @param {Window} environment The environment to add the event listeners to, for instance window.\n * @param {() => void} handleBlur The function that is called if mouseDown or touchEnd occured outside the downshiftElements.\n * @param {Array<{current: HTMLElement}>} downshiftElementsRefs The refs for the elements that should not trigger a blur action from mouseDown or touchEnd.\n * @returns {{isMouseDown: boolean, isTouchMove: boolean, isTouchEnd: boolean}} The mouse and touch events information, if any of are happening.\n */\nfunction useMouseAndTouchTracker(environment, handleBlur, downshiftRefs) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false,\n    isTouchEnd: false\n  });\n  var getDownshiftElements = useCallback(function () {\n    return downshiftRefs.map(function (ref) {\n      return ref.current;\n    });\n  }, [downshiftRefs]);\n  useEffect(function () {\n    if (!environment) {\n      return noop;\n    }\n    function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false; // reset this one.\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    }\n    function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n      if (!targetWithinDownshift(event.target, getDownshiftElements(), environment)) {\n        handleBlur();\n      }\n    }\n    function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false;\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    }\n    function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    }\n    function onTouchEnd(event) {\n      mouseAndTouchTrackersRef.current.isTouchEnd = true;\n      if (!mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, getDownshiftElements(), environment, false)) {\n        handleBlur();\n      }\n    }\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n  }, [environment, getDownshiftElements, handleBlur]);\n  return mouseAndTouchTrackersRef.current;\n}\n\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n        if (!Object.keys(propCallInfo).length) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n          return;\n        }\n        var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n        if (suppressRefError) {\n          return;\n        }\n        if (!(elementRef != null && elementRef.current)) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n    }, []);\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\n\n/**\n * Adds an a11y aria live status message if getA11yStatusMessage is passed.\n * @param {(options: Object) => string} getA11yStatusMessage The function that builds the status message.\n * @param {Object} options The options to be passed to getA11yStatusMessage if called.\n * @param {Array<unknown>} dependencyArray The dependency array that triggers the status message setter via useEffect.\n * @param {{document: Document}} environment The environment object containing the document.\n */\nfunction useA11yMessageStatus(getA11yStatusMessage, options, dependencyArray, environment) {\n  if (environment === void 0) {\n    environment = {};\n  }\n  var document = environment.document;\n  var isInitialMount = useIsInitialMount();\n\n  // Adds an a11y aria live status message if getA11yStatusMessage is passed.\n  useEffect(function () {\n    if (!getA11yStatusMessage || isInitialMount || false || !document) {\n      return;\n    }\n    var status = getA11yStatusMessage(options);\n    updateA11yStatus(status, document);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n\n  // Cleanup the status message container.\n  useEffect(function () {\n    return function () {\n      updateA11yStatus.cancel();\n      cleanupStatusDiv(document);\n    };\n  }, [document]);\n}\nfunction useScrollIntoView(_ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n    isOpen = _ref3.isOpen,\n    itemRefs = _ref3.itemRefs,\n    getItemNodeFromIndex = _ref3.getItemNodeFromIndex,\n    menuElement = _ref3.menuElement,\n    scrollIntoViewProp = _ref3.scrollIntoView;\n  // used not to scroll on highlight by mouse.\n  var shouldScrollRef = useRef(true);\n  // Scroll on highlighted item if change comes from keyboard.\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref4) {\n    var props = _ref4.props,\n      state = _ref4.state;\n    // used for checking when props are moving from controlled to uncontrolled.\n    var prevPropsRef = useRef(props);\n    var isInitialMount = useIsInitialMount();\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n\n/**\n * Handles selection on Enter / Alt + ArrowUp. Closes the menu and resets the highlighted index, unless there is a highlighted.\n * In that case, selects the item and resets to defaults for open state and highlighted idex.\n * @param {Object} props The useCombobox props.\n * @param {number} highlightedIndex The index from the state.\n * @param {boolean} inputValue Also return the input value for state.\n * @returns The changes for the state.\n */\nfunction getChangesOnSelection(props, highlightedIndex, inputValue) {\n  var _props$items;\n  if (inputValue === void 0) {\n    inputValue = true;\n  }\n  var shouldSelect = ((_props$items = props.items) == null ? void 0 : _props$items.length) && highlightedIndex >= 0;\n  return _extends({\n    isOpen: false,\n    highlightedIndex: -1\n  }, shouldSelect && _extends({\n    selectedItem: props.items[highlightedIndex],\n    isOpen: getDefaultValue$1(props, 'isOpen'),\n    highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n  }, inputValue && {\n    inputValue: props.itemToString(props.items[highlightedIndex])\n  }));\n}\n\n/**\n * Check if a state is equal for dropdowns, by comparing isOpen, inputValue, highlightedIndex and selected item.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isDropdownsStateEqual(prevState, newState) {\n  return prevState.isOpen === newState.isOpen && prevState.inputValue === newState.inputValue && prevState.highlightedIndex === newState.highlightedIndex && prevState.selectedItem === newState.selectedItem;\n}\n\n/**\n * Tracks if it's the first render.\n */\nfunction useIsInitialMount() {\n  var isInitialMountRef = React.useRef(true);\n  React.useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n  return isInitialMountRef.current;\n}\n\n/**\n * Returns the new highlightedIndex based on the defaultHighlightedIndex prop, if it's not disabled.\n *\n * @param {Object} props Props from useCombobox or useSelect.\n * @returns {number} The highlighted index.\n */\nfunction getDefaultHighlightedIndex(props) {\n  var highlightedIndex = getDefaultValue$1(props, 'highlightedIndex');\n  if (highlightedIndex > -1 && props.isItemDisabled(props.items[highlightedIndex], highlightedIndex)) {\n    return -1;\n  }\n  return highlightedIndex;\n}\n\n/**\n * Returns the new highlightedIndex based on the initialHighlightedIndex prop, if not disabled.\n *\n * @param {Object} props Props from useCombobox or useSelect.\n * @returns {number} The highlighted index.\n */\nfunction getInitialHighlightedIndex(props) {\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  if (highlightedIndex > -1 && props.isItemDisabled(props.items[highlightedIndex], highlightedIndex)) {\n    return -1;\n  }\n  return highlightedIndex;\n}\n\n// Shared between all exports.\nvar commonPropTypes = {\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  itemToString: PropTypes.func,\n  itemToKey: PropTypes.func,\n  stateReducer: PropTypes.func\n};\n\n// Shared between useSelect, useCombobox, Downshift.\nvar commonDropdownPropTypes = _extends({}, commonPropTypes, {\n  getA11yStatusMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  scrollIntoView: PropTypes.func\n});\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n    props = action.props;\n  var changes;\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.disabled ? -1 : action.index\n      };\n      break;\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: props.isItemDisabled(props.items[action.highlightedIndex], action.highlightedIndex) ? -1 : action.highlightedIndex\n      };\n      break;\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultHighlightedIndex(props),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nfunction getItemIndexByCharacterKey(_a) {\n    var keysSoFar = _a.keysSoFar, highlightedIndex = _a.highlightedIndex, items = _a.items, itemToString = _a.itemToString, isItemDisabled = _a.isItemDisabled;\n    var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n    for (var index = 0; index < items.length; index++) {\n        // if we already have a search query in progress, we also consider the current highlighted item.\n        var offsetIndex = (index + highlightedIndex + (keysSoFar.length < 2 ? 1 : 0)) % items.length;\n        var item = items[offsetIndex];\n        if (item !== undefined &&\n            itemToString(item).toLowerCase().startsWith(lowerCasedKeysSoFar) &&\n            !isItemDisabled(item, offsetIndex)) {\n            return offsetIndex;\n        }\n    }\n    return highlightedIndex;\n}\nvar propTypes$2 = __assign(__assign({}, commonDropdownPropTypes), { items: PropTypes.array.isRequired, isItemDisabled: PropTypes.func });\nvar defaultProps$2 = __assign(__assign({}, defaultProps$3), { isItemDisabled: function () {\n        return false;\n    } });\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$2 = function (options, caller) {\n        PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n    };\n}\n\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 0;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 1;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 2;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 3;\nvar ToggleButtonKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_escape__' : 4;\nvar ToggleButtonKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_home__' : 5;\nvar ToggleButtonKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_end__' : 6;\nvar ToggleButtonKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_enter__' : 7;\nvar ToggleButtonKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_space_button__' : 8;\nvar ToggleButtonKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_up__' : 9;\nvar ToggleButtonKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_down__' : 10;\nvar ToggleButtonBlur = process.env.NODE_ENV !== \"production\" ? '__togglebutton_blur__' : 11;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 12;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 13;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 14;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionReset: FunctionReset$2,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  ItemClick: ItemClick$1,\n  ItemMouseMove: ItemMouseMove$1,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ToggleButtonBlur: ToggleButtonBlur,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownEnd: ToggleButtonKeyDownEnd,\n  ToggleButtonKeyDownEnter: ToggleButtonKeyDownEnter,\n  ToggleButtonKeyDownEscape: ToggleButtonKeyDownEscape,\n  ToggleButtonKeyDownHome: ToggleButtonKeyDownHome,\n  ToggleButtonKeyDownPageDown: ToggleButtonKeyDownPageDown,\n  ToggleButtonKeyDownPageUp: ToggleButtonKeyDownPageUp,\n  ToggleButtonKeyDownSpaceButton: ToggleButtonKeyDownSpaceButton\n});\n\n/* eslint-disable complexity */\nfunction downshiftSelectReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultHighlightedIndex(props),\n        selectedItem: props.items[action.index]\n      };\n      break;\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var prevHighlightedIndex = !state.isOpen && state.selectedItem ? props.items.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(state.selectedItem);\n        }) : state.highlightedIndex;\n        var highlightedIndex = getItemIndexByCharacterKey({\n          keysSoFar: inputValue,\n          highlightedIndex: prevHighlightedIndex,\n          items: props.items,\n          itemToString: props.itemToString,\n          isItemDisabled: props.isItemDisabled\n        });\n        changes = {\n          inputValue: inputValue,\n          highlightedIndex: highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowDown:\n      {\n        var _highlightedIndex = state.isOpen ? getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled) : altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1);\n        changes = {\n          highlightedIndex: _highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowUp:\n      if (state.isOpen && altKey) {\n        changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      } else {\n        var _highlightedIndex2 = state.isOpen ? getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled) : getHighlightedIndexOnOpen(props, state, -1);\n        changes = {\n          highlightedIndex: _highlightedIndex2,\n          isOpen: true\n        };\n      }\n      break;\n    // only triggered when menu is open.\n    case ToggleButtonKeyDownEnter:\n    case ToggleButtonKeyDownSpaceButton:\n      changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      break;\n    case ToggleButtonKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$2 = [\"onClick\"],\n  _excluded2$2 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded3$1 = [\"onBlur\", \"onClick\", \"onPress\", \"onKeyDown\", \"refKey\", \"ref\"],\n  _excluded4$1 = [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"onMouseDown\", \"onPress\", \"refKey\", \"disabled\", \"ref\"];\nuseSelect.stateChangeTypes = stateChangeTypes$2;\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$2(userProps, useSelect);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$2, userProps);\n  var scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, props, getInitialState$2, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n  // Element efs.\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n\n  // used to keep the inputValue clearTimeout object between renders.\n  var clearTimeoutRef = useRef(null);\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Some utils.\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Adds an a11y aria live status message if getA11yStatusMessage is passed.\n  useA11yMessageStatus(getA11yStatusMessage, state, [isOpen, highlightedIndex, selectedItem, inputValue], environment);\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500);\n\n    // Cancel any pending debounced calls on mount\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []);\n  // Invokes the keysSoFar callback set up above.\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  // Focus the toggle button on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && toggleButtonRef.current) {\n      toggleButtonRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var handleBlurInTracker = useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: ToggleButtonBlur\n      });\n    }\n  }, [dispatch, latest]);\n  var downshiftRefs = useMemo(function () {\n    return [menuRef, toggleButtonRef];\n  }, []);\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, handleBlurInTracker, downshiftRefs);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n\n  // Event handler functions.\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownHome\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownEnd\n        });\n      },\n      Escape: function Escape() {\n        if (latest.current.state.isOpen) {\n          dispatch({\n            type: ToggleButtonKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: latest.current.state.isOpen ? ToggleButtonKeyDownEnter : ToggleButtonClick$1\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageDown\n          });\n        }\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        var currentState = latest.current.state;\n        if (!currentState.isOpen) {\n          dispatch({\n            type: ToggleButtonClick$1\n          });\n          return;\n        }\n        if (currentState.inputValue) {\n          dispatch({\n            type: ToggleButtonKeyDownCharacter,\n            key: ' '\n          });\n        } else {\n          dispatch({\n            type: ToggleButtonKeyDownSpaceButton\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Action functions.\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  // Getter functions.\n  var getLabelProps = useCallback(function (_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      onClick = _ref.onClick,\n      labelProps = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n    var labelHandleClick = function labelHandleClick() {\n      var _toggleButtonRef$curr;\n      (_toggleButtonRef$curr = toggleButtonRef.current) == null || _toggleButtonRef$curr.focus();\n    };\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId,\n      onClick: callAllEventHandlers(onClick, labelHandleClick)\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp2, _temp3) {\n    var _extends2;\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      onMouseLeave = _ref2.onMouseLeave,\n      _ref2$refKey = _ref2.refKey,\n      refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n      ref = _ref2.ref,\n      rest = _objectWithoutPropertiesLoose(_ref2, _excluded2$2);\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      _ref3$suppressRefErro = _ref3.suppressRefError,\n      suppressRefError = _ref3$suppressRefErro === void 0 ? false : _ref3$suppressRefErro;\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4, _temp5) {\n    var _extends3;\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n      onBlur = _ref4.onBlur,\n      onClick = _ref4.onClick;\n      _ref4.onPress;\n      var onKeyDown = _ref4.onKeyDown,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$1);\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n    var toggleButtonHandleBlur = function toggleButtonHandleBlur() {\n      if (latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        dispatch({\n          type: ToggleButtonBlur\n        });\n      }\n    };\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key\n        });\n      }\n    };\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends3['aria-controls'] = elementIds.menuId, _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends3.id = elementIds.toggleButtonId, _extends3.role = 'combobox', _extends3.tabIndex = 0, _extends3.onBlur = callAllEventHandlers(onBlur, toggleButtonHandleBlur), _extends3), rest);\n    if (!rest.disabled) {\n      /* istanbul ignore if (react-native) */\n      {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n    }\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, setGetterPropCallInfo, toggleButtonKeyDownHandlers]);\n  var getItemProps = useCallback(function (_temp6) {\n    var _extends4;\n    var _ref6 = _temp6 === void 0 ? {} : _temp6,\n      itemProp = _ref6.item,\n      indexProp = _ref6.index,\n      onMouseMove = _ref6.onMouseMove,\n      onClick = _ref6.onClick,\n      onMouseDown = _ref6.onMouseDown;\n      _ref6.onPress;\n      var _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      disabledProp = _ref6.disabled,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useSelect.');\n    }\n    var _latest$current = latest.current,\n      latestState = _latest$current.state,\n      latestProps = _latest$current.props;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the toggle after item click select.\n\n    var itemProps = _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends4['aria-disabled'] = disabled, _extends4['aria-selected'] = item === latestState.selectedItem, _extends4.id = elementIds.getItemId(index), _extends4.role = 'option', _extends4), rest);\n    if (!disabled) {\n      /* istanbul ignore next (react-native) */\n      {\n        itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n      }\n    }\n    itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n    itemProps.onMouseDown = callAllEventHandlers(onMouseDown, itemHandleMouseDown);\n    return itemProps;\n  }, [latest, elementIds, mouseAndTouchTrackers, shouldScrollRef, dispatch]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_up__' : 5;\nvar InputKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_down__' : 6;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 7;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 8;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 9;\nvar InputClick = process.env.NODE_ENV !== \"production\" ? '__input_click__' : 10;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 11;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 12;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionReset: FunctionReset$1,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionToggleMenu: FunctionToggleMenu,\n  InputBlur: InputBlur,\n  InputChange: InputChange,\n  InputClick: InputClick,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownPageDown: InputKeyDownPageDown,\n  InputKeyDownPageUp: InputKeyDownPageUp,\n  ItemClick: ItemClick,\n  ItemMouseMove: ItemMouseMove,\n  MenuMouseLeave: MenuMouseLeave,\n  ToggleButtonClick: ToggleButtonClick\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = _extends({}, commonDropdownPropTypes, {\n  items: PropTypes.array.isRequired,\n  isItemDisabled: PropTypes.func,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  inputId: PropTypes.string,\n  onInputValueChange: PropTypes.func\n});\n\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer(reducer, props, createInitialState, isStateEqual) {\n  var previousSelectedItemRef = useRef();\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  var isInitialMount = useIsInitialMount();\n  useEffect(function () {\n    if (!isControlledProp(props, 'selectedItem')) {\n      return;\n    }\n    if (!isInitialMount // on first mount we already have the proper inputValue for a initial selected item.\n    ) {\n      var shouldCallDispatch = props.itemToKey(props.selectedItem) !== props.itemToKey(previousSelectedItemRef.current);\n      if (shouldCallDispatch) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n    }\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.selectedItem, props.selectedItem]);\n  return [getState(state, props), dispatch];\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  isItemDisabled: function isItemDisabled() {\n    return false;\n  }\n});\n\n/* eslint-disable complexity */\nfunction downshiftUseComboboxReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultHighlightedIndex(props),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled, true)\n        };\n      } else {\n        changes = {\n          highlightedIndex: altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        if (altKey) {\n          changes = getChangesOnSelection(props, state.highlightedIndex);\n        } else {\n          changes = {\n            highlightedIndex: getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled, true)\n          };\n        }\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownEnter:\n      changes = getChangesOnSelection(props, state.highlightedIndex);\n      break;\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n    case InputKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultHighlightedIndex(props),\n        inputValue: action.inputValue\n      };\n      break;\n    case InputClick:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$1 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded2$1 = [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"disabled\"],\n  _excluded3 = [\"onClick\", \"onPress\", \"refKey\", \"ref\"],\n  _excluded4 = [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"onClick\", \"refKey\", \"ref\"];\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$1(userProps, useCombobox);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$1, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, props, getInitialState$1, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n\n  // Element refs.\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var isInitialMount = useIsInitialMount();\n\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Adds an a11y aria live status message if getA11yStatusMessage is passed.\n  useA11yMessageStatus(getA11yStatusMessage, state, [isOpen, highlightedIndex, selectedItem, inputValue], environment);\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  // Focus the input on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (!isInitialMount) {\n      previousResultCountRef.current = items.length;\n    }\n  });\n  var handleBlurInTracker = useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: InputBlur\n      });\n    }\n  }, [dispatch, latest]);\n  var downshiftRefs = useMemo(function () {\n    return [menuRef, toggleButtonRef, inputRef];\n  }, []);\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, handleBlurInTracker, downshiftRefs);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getMenuProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n  // Reset itemRefs on close.\n  useEffect(function () {\n    var _inputRef$current;\n    if (!isOpen || !(environment != null && environment.document) || !(inputRef != null && (_inputRef$current = inputRef.current) != null && _inputRef$current.focus)) {\n      return;\n    }\n    if (environment.document.activeElement !== inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isOpen, environment]);\n\n  /* Event handler functions */\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd\n        });\n      },\n      Escape: function Escape(event) {\n        var latestState = latest.current.state;\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state;\n        // if closed or no highlighted index, do nothing.\n        if (!latestState.isOpen || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageDown\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Getter props.\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      itemProp = _ref3.item,\n      indexProp = _ref3.index,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onMouseMove = _ref3.onMouseMove,\n      onMouseDown = _ref3.onMouseDown,\n      onClick = _ref3.onClick;\n      _ref3.onPress;\n      var disabledProp = _ref3.disabled,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');\n    }\n    var _latest$current = latest.current,\n      latestProps = _latest$current.props,\n      latestState = _latest$current.state;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the input after item click select.\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends3['aria-disabled'] = disabled, _extends3['aria-selected'] = index === latestState.highlightedIndex, _extends3.id = elementIds.getItemId(index), _extends3.role = 'option', _extends3), !disabled && (_ref4 = {}, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove),\n      onMouseDown: callAllEventHandlers(onMouseDown, itemHandleMouseDown)\n    }, rest);\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, shouldScrollRef]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n      onClick = _ref5.onClick;\n      _ref5.onPress;\n      var _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4['aria-controls'] = elementIds.menuId, _extends4['aria-expanded'] = latestState.isOpen, _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n      onKeyDown = _ref6.onKeyDown,\n      onChange = _ref6.onChange,\n      onInput = _ref6.onInput,\n      onBlur = _ref6.onBlur;\n      _ref6.onChangeText;\n      var onClick = _ref6.onClick,\n      _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4);\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n      _ref7$suppressRefErro = _ref7.suppressRefError,\n      suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n    var inputHandleBlur = function inputHandleBlur(event) {\n      /* istanbul ignore else */\n      if (environment != null && environment.document && latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        var isBlurByTabChange = event.relatedTarget === null && environment.document.activeElement !== environment.document.body;\n        dispatch({\n          type: InputBlur,\n          selectItem: !isBlurByTabChange\n        });\n      }\n    };\n    var inputHandleClick = function inputHandleClick() {\n      dispatch({\n        type: InputClick\n      });\n    };\n\n    /* istanbul ignore next (preact) */\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n    if (!rest.disabled) {\n      var _eventHandlers;\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers.onClick = callAllEventHandlers(onClick, inputHandleClick), _eventHandlers);\n    }\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5['aria-expanded'] = latestState.isOpen, _extends5['aria-labelledby'] = rest && rest['aria-label'] ? undefined : elementIds.labelId, _extends5.autoComplete = 'off', _extends5.id = elementIds.inputId, _extends5.role = 'combobox', _extends5.value = latestState.inputValue, _extends5), eventHandlers, rest);\n  }, [dispatch, elementIds, environment, inputKeyDownHandlers, latest, mouseAndTouchTrackers, setGetterPropCallInfo]);\n\n  // returns\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n  var element = event.target;\n  if (element instanceof HTMLInputElement &&\n  // if element is a text input\n  element.value !== '' && (\n  // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Check if a state is equal for taglist, by comparing active index and selected items.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isStateEqual(prevState, newState) {\n  return prevState.selectedItems === newState.selectedItems && prevState.activeIndex === newState.activeIndex;\n}\nvar propTypes = {\n  stateReducer: commonPropTypes.stateReducer,\n  itemToKey: commonPropTypes.itemToKey,\n  environment: commonPropTypes.environment,\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  getA11yStatusMessage: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string\n};\nvar defaultProps = {\n  itemToKey: defaultProps$3.itemToKey,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DropdownClick: DropdownClick,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionReset: FunctionReset,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious\n});\n\n/* eslint-disable complexity */\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n    index = action.index,\n    props = action.props,\n    selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n  var changes;\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        if (activeIndex < 0) {\n          break;\n        }\n        var newActiveIndex = activeIndex;\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(selectedItem);\n        });\n        if (selectedItemIndex < 0) {\n          break;\n        }\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n        changes = {\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1)),\n          activeIndex: _newActiveIndex\n        };\n        break;\n      }\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n\nvar _excluded = [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"],\n  _excluded2 = [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"];\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes(userProps, useMultipleSelection);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps, userProps);\n  var getA11yStatusMessage = props.getA11yStatusMessage,\n    environment = props.environment,\n    keyNavigationNext = props.keyNavigationNext,\n    keyNavigationPrevious = props.keyNavigationPrevious;\n\n  // Reducer init.\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, props, getInitialState, isStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n\n  // Refs.\n  var isInitialMount = useIsInitialMount();\n  var dropdownRef = useRef(null);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Effects.\n  // Adds an a11y aria live status message if getA11yStatusMessage is passed.\n  useA11yMessageStatus(getA11yStatusMessage, state, [activeIndex, selectedItems], environment);\n  // Sets focus on active item.\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeIndex]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps');\n\n  // Event handler functions.\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]);\n\n  // Getter props.\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n    var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      selectedItemProp = _ref3.selectedItem,\n      indexProp = _ref3.index,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n    var latestState = latest.current.state;\n    var _getItemAndIndex = getItemAndIndex(selectedItemProp, indexProp, latestState.selectedItems, 'Pass either item or index to getSelectedItemProps!'),\n      index = _getItemAndIndex[1];\n    var isFocusable = index > -1 && index === latestState.activeIndex;\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = isFocusable ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      onKeyDown = _ref4.onKeyDown,\n      onClick = _ref4.onClick,\n      _ref4$preventKeyActio = _ref4.preventKeyAction,\n      preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]);\n\n  // returns\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport { Downshift as default, resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n","import { interpolate } from './interpolate.mjs';\n\nfunction transform(...args) {\n    const useImmediate = !Array.isArray(args[0]);\n    const argOffset = useImmediate ? 0 : -1;\n    const inputValue = args[0 + argOffset];\n    const inputRange = args[1 + argOffset];\n    const outputRange = args[2 + argOffset];\n    const options = args[3 + argOffset];\n    const interpolator = interpolate(inputRange, outputRange, options);\n    return useImmediate ? interpolator(inputValue) : interpolator;\n}\n\nexport { transform };\n","\"use client\";\nimport { createContext } from 'react';\n\n/**\n * Note: Still used by components generated by old versions of Framer\n *\n * @deprecated\n */\nconst DeprecatedLayoutGroupContext = createContext(null);\n\nexport { DeprecatedLayoutGroupContext };\n","\"use client\";\nimport { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-effect.mjs';\n\nfunction useIsMounted() {\n    const isMounted = useRef(false);\n    useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n\nexport { useIsMounted };\n","\"use client\";\nimport { frame } from 'motion-dom';\nimport { useState, useCallback } from 'react';\nimport { useIsMounted } from './use-is-mounted.mjs';\n\nfunction useForceUpdate() {\n    const isMounted = useIsMounted();\n    const [forcedRenderCount, setForcedRenderCount] = useState(0);\n    const forceRender = useCallback(() => {\n        isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n    /**\n     * Defer this to the end of the next animation frame in case there are multiple\n     * synchronous calls.\n     */\n    const deferredForceRender = useCallback(() => frame.postRender(forceRender), [forceRender]);\n    return [deferredForceRender, forcedRenderCount];\n}\n\nexport { useForceUpdate };\n","const notify = (node) => !node.isLayoutDirty && node.willUpdate(false);\nfunction nodeGroup() {\n    const nodes = new Set();\n    const subscriptions = new WeakMap();\n    const dirtyAll = () => nodes.forEach(notify);\n    return {\n        add: (node) => {\n            nodes.add(node);\n            subscriptions.set(node, node.addEventListener(\"willUpdate\", dirtyAll));\n        },\n        remove: (node) => {\n            nodes.delete(node);\n            const unsubscribe = subscriptions.get(node);\n            if (unsubscribe) {\n                unsubscribe();\n                subscriptions.delete(node);\n            }\n            dirtyAll();\n        },\n        dirty: dirtyAll,\n    };\n}\n\nexport { nodeGroup };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport { useContext, useRef, useMemo } from 'react';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { DeprecatedLayoutGroupContext } from '../../context/DeprecatedLayoutGroupContext.mjs';\nimport { useForceUpdate } from '../../utils/use-force-update.mjs';\nimport { nodeGroup } from '../../projection/node/group.mjs';\n\nconst shouldInheritGroup = (inherit) => inherit === true;\nconst shouldInheritId = (inherit) => shouldInheritGroup(inherit === true) || inherit === \"id\";\nconst LayoutGroup = ({ children, id, inherit = true }) => {\n    const layoutGroupContext = useContext(LayoutGroupContext);\n    const deprecatedLayoutGroupContext = useContext(DeprecatedLayoutGroupContext);\n    const [forceRender, key] = useForceUpdate();\n    const context = useRef(null);\n    const upstreamId = layoutGroupContext.id || deprecatedLayoutGroupContext;\n    if (context.current === null) {\n        if (shouldInheritId(inherit) && upstreamId) {\n            id = id ? upstreamId + \"-\" + id : upstreamId;\n        }\n        context.current = {\n            id,\n            group: shouldInheritGroup(inherit)\n                ? layoutGroupContext.group || nodeGroup()\n                : nodeGroup(),\n        };\n    }\n    const memoizedContext = useMemo(() => ({ ...context.current, forceRender }), [key]);\n    return (jsx(LayoutGroupContext.Provider, { value: memoizedContext, children: children }));\n};\n\nexport { LayoutGroup };\n","\"use client\";\nimport { motionValue } from 'motion-dom';\nimport { useContext, useState, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n    const value = useConstant(() => motionValue(initial));\n    /**\n     * If this motion value is being used in static mode, like on\n     * the Framer canvas, force components to rerender when the motion\n     * value is updated.\n     */\n    const { isStatic } = useContext(MotionConfigContext);\n    if (isStatic) {\n        const [, setLatest] = useState(initial);\n        useEffect(() => value.on(\"change\", setLatest), []);\n    }\n    return value;\n}\n\nexport { useMotionValue };\n","\"use client\";\nimport { cancelFrame, frame } from 'motion-dom';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { useMotionValue } from './use-motion-value.mjs';\n\nfunction useCombineMotionValues(values, combineValues) {\n    /**\n     * Initialise the returned motion value. This remains the same between renders.\n     */\n    const value = useMotionValue(combineValues());\n    /**\n     * Create a function that will update the template motion value with the latest values.\n     * This is pre-bound so whenever a motion value updates it can schedule its\n     * execution in Framesync. If it's already been scheduled it won't be fired twice\n     * in a single frame.\n     */\n    const updateValue = () => value.set(combineValues());\n    /**\n     * Synchronously update the motion value with the latest values during the render.\n     * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n     */\n    updateValue();\n    /**\n     * Subscribe to all motion values found within the template. Whenever any of them change,\n     * schedule an update.\n     */\n    useIsomorphicLayoutEffect(() => {\n        const scheduleUpdate = () => frame.preRender(updateValue, false, true);\n        const subscriptions = values.map((v) => v.on(\"change\", scheduleUpdate));\n        return () => {\n            subscriptions.forEach((unsubscribe) => unsubscribe());\n            cancelFrame(updateValue);\n        };\n    });\n    return value;\n}\n\nexport { useCombineMotionValues };\n","\"use client\";\nimport { isMotionValue } from 'motion-dom';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\n\n/**\n * Combine multiple motion values into a new one using a string template literal.\n *\n * ```jsx\n * import {\n *   motion,\n *   useSpring,\n *   useMotionValue,\n *   useMotionTemplate\n * } from \"framer-motion\"\n *\n * function Component() {\n *   const shadowX = useSpring(0)\n *   const shadowY = useMotionValue(0)\n *   const shadow = useMotionTemplate`drop-shadow(${shadowX}px ${shadowY}px 20px rgba(0,0,0,0.3))`\n *\n *   return <motion.div style={{ filter: shadow }} />\n * }\n * ```\n *\n * @public\n */\nfunction useMotionTemplate(fragments, ...values) {\n    /**\n     * Create a function that will build a string from the latest motion values.\n     */\n    const numFragments = fragments.length;\n    function buildValue() {\n        let output = ``;\n        for (let i = 0; i < numFragments; i++) {\n            output += fragments[i];\n            const value = values[i];\n            if (value) {\n                output += isMotionValue(value) ? value.get() : value;\n            }\n        }\n        return output;\n    }\n    return useCombineMotionValues(values.filter(isMotionValue), buildValue);\n}\n\nexport { useMotionTemplate };\n","\"use client\";\nimport { collectMotionValues } from 'motion-dom';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\n\nfunction useComputed(compute) {\n    /**\n     * Open session of collectMotionValues. Any MotionValue that calls get()\n     * will be saved into this array.\n     */\n    collectMotionValues.current = [];\n    compute();\n    const value = useCombineMotionValues(collectMotionValues.current, compute);\n    /**\n     * Synchronously close session of collectMotionValues.\n     */\n    collectMotionValues.current = undefined;\n    return value;\n}\n\nexport { useComputed };\n","\"use client\";\nimport { transform } from 'motion-dom';\nimport { useConstant } from '../utils/use-constant.mjs';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\nimport { useComputed } from './use-computed.mjs';\n\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n    if (typeof input === \"function\") {\n        return useComputed(input);\n    }\n    const transformer = typeof inputRangeOrTransformer === \"function\"\n        ? inputRangeOrTransformer\n        : transform(inputRangeOrTransformer, outputRange, options);\n    return Array.isArray(input)\n        ? useListTransform(input, transformer)\n        : useListTransform([input], ([latest]) => transformer(latest));\n}\nfunction useListTransform(values, transformer) {\n    const latest = useConstant(() => []);\n    return useCombineMotionValues(values, () => {\n        latest.length = 0;\n        const numValues = values.length;\n        for (let i = 0; i < numValues; i++) {\n            latest[i] = values[i].get();\n        }\n        return transformer(latest);\n    });\n}\n\nexport { useTransform };\n","\"use client\";\nimport { frame, cancelFrame } from 'motion-dom';\nimport { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\n\nfunction useAnimationFrame(callback) {\n    const initialTimestamp = useRef(0);\n    const { isStatic } = useContext(MotionConfigContext);\n    useEffect(() => {\n        if (isStatic)\n            return;\n        const provideTimeSinceStart = ({ timestamp, delta }) => {\n            if (!initialTimestamp.current)\n                initialTimestamp.current = timestamp;\n            callback(timestamp - initialTimestamp.current, delta);\n        };\n        frame.update(provideTimeSinceStart, true);\n        return () => cancelFrame(provideTimeSinceStart);\n    }, [callback]);\n}\n\nexport { useAnimationFrame };\n","import {\n  motion,\n  useAnimationFrame,\n  useMotionTemplate,\n  useMotionValue,\n  useTransform,\n} from 'motion/react'\nimport React, { type FC, type SVGProps, useRef } from 'react'\n\ninterface GlowingBorderProps extends SVGProps<SVGSVGElement> {\n  duration?: number\n  rx?: string\n  ry?: string\n  delay?: number\n}\n\n/**\n * @public\n */\nexport const GlowingBorder: FC<GlowingBorderProps> = ({\n  children,\n  duration = 3000,\n  rx,\n  ry,\n  delay = 0,\n  ...otherProps\n}) => {\n  const pathRef = useRef<SVGRectElement>(null)\n  const progress = useMotionValue<number>(-1) // -1: pre-animation, 0-1: animation\n  const startTime = useRef<number | null>(null)\n  const isFinished = useRef(false)\n  const startOffset = useRef<number>(0)\n  const lengthRef = useRef<number>(0)\n\n  useAnimationFrame((time) => {\n    if (isFinished.current) return\n\n    const length = pathRef.current?.getTotalLength()\n    if (!length) return\n    lengthRef.current = length\n\n    if (startTime.current === null && pathRef.current) {\n      startTime.current = time\n      const bbox = pathRef.current.getBBox()\n      const width = bbox.width\n      const rxPercentage = rx ? parseFloat(rx) / 100 : 0\n      const rxPixels = rxPercentage * width\n      startOffset.current = length / 2 + (width / 2 - rxPixels)\n    }\n\n    const elapsedTimeSinceMount = time - (startTime.current as number)\n    if (elapsedTimeSinceMount < delay) {\n      return\n    }\n    const elapsedTime = elapsedTimeSinceMount - delay\n\n    const effectiveDuration = duration * 0.5 // each travels 50% of path\n\n    if (elapsedTime >= effectiveDuration) {\n      progress.set(1)\n      isFinished.current = true\n      return\n    }\n\n    progress.set(elapsedTime / effectiveDuration)\n  })\n\n  const distance = useTransform(progress, (p) => p * lengthRef.current * 0.5)\n  const opacity = useTransform(progress, [-1, 0, 0.9, 1], [0, 1, 1, 0])\n\n  // Circle 1 (moves forward)\n  const progress1 = useTransform(distance, (d) => startOffset.current + d)\n  const x1 = useTransform(progress1, (val) => {\n    const l = lengthRef.current\n    if (!l || !pathRef.current) return 0\n    return pathRef.current.getPointAtLength(val % l).x\n  })\n  const y1 = useTransform(progress1, (val) => {\n    const l = lengthRef.current\n    if (!l || !pathRef.current) return 0\n    return pathRef.current.getPointAtLength(val % l).y\n  })\n  const transform1 = useMotionTemplate`translateX(${x1}px) translateY(${y1}px) translateX(-50%) translateY(-50%)`\n\n  // Circle 2 (moves backward)\n  const progress2 = useTransform(distance, (d) => startOffset.current - d)\n  const x2 = useTransform(progress2, (val) => {\n    const l = lengthRef.current\n    if (!l || !pathRef.current) return 0\n    return pathRef.current.getPointAtLength(((val % l) + l) % l).x\n  })\n  const y2 = useTransform(progress2, (val) => {\n    const l = lengthRef.current\n    if (!l || !pathRef.current) return 0\n    return pathRef.current.getPointAtLength(((val % l) + l) % l).y\n  })\n  const transform2 = useMotionTemplate`translateX(${x2}px) translateY(${y2}px) translateX(-50%) translateY(-50%)`\n\n  return (\n    <>\n      {/* biome-ignore lint/a11y/noSvgWithoutTitle: SVG Purely for cosmetic purpose */}\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        preserveAspectRatio=\"none\"\n        className=\"absolute h-full w-full\"\n        width=\"100%\"\n        height=\"100%\"\n        {...otherProps}\n      >\n        <rect\n          fill=\"none\"\n          width=\"100%\"\n          height=\"100%\"\n          rx={rx}\n          ry={ry}\n          ref={pathRef}\n        />\n      </svg>\n      <motion.div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          display: 'inline-block',\n          transform: transform1,\n          opacity: opacity,\n        }}\n      >\n        {children}\n      </motion.div>\n      <motion.div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          display: 'inline-block',\n          transform: transform2,\n          opacity: opacity,\n        }}\n      >\n        {React.cloneElement(children as React.ReactElement)}\n      </motion.div>\n    </>\n  )\n}\n\n/**\n * @public\n */\nexport const GlowingElement: FC = () => (\n  <div className=\"h-20 w-20 bg-[radial-gradient(var(--accent-orange)_40%,transparent_60%)] opacity-[0.8]\" />\n)\n","import { defineExtensionMessaging } from '@webext-core/messaging'\nimport type { SearchActionStorage } from '@/lib/search-actions/searchActionsStorage'\n\ntype OpenSidePanelWithSearchParams = {\n  open(props: SearchActionStorage): void\n}\n\n/**\n * @public\n */\nconst { sendMessage, onMessage } =\n  defineExtensionMessaging<OpenSidePanelWithSearchParams>()\n\nexport {\n  sendMessage as openSidePanelWithSearch,\n  onMessage as onOpenSidePanelWithSearch,\n}\n","import { Calendar, UserPen } from 'lucide-react'\nimport type { FC } from 'react'\nimport { NavLink } from 'react-router'\nimport { Button } from '@/components/ui/button'\nimport { Feature } from '@/lib/browseros/capabilities'\nimport { useCapabilities } from '@/lib/browseros/useCapabilities'\n\ninterface FooterLinksProps {\n  onOpenShortcuts: () => void\n}\n\nexport const FooterLinks: FC<FooterLinksProps> = ({ onOpenShortcuts }) => {\n  const { supports } = useCapabilities()\n\n  return (\n    <div className=\"flex items-center justify-center gap-4 pt-4\">\n      <a\n        href=\"/options.html#/scheduled\"\n        className=\"group inline-flex flex-row gap-2 text-muted-foreground text-xs transition-colors hover:text-foreground\"\n      >\n        <Calendar className=\"h-4 w-4 transition-colors group-hover:text-accent-orange\" />\n        Scheduler\n      </a>\n      <span className=\"text-muted-foreground\"></span>\n\n      {supports(Feature.PERSONALIZATION_SUPPORT) && (\n        <>\n          <NavLink\n            to=\"/personalize\"\n            className=\"group inline-flex flex-row gap-2 text-muted-foreground text-xs transition-colors hover:text-foreground\"\n          >\n            <UserPen className=\"h-4 w-4 transition-colors group-hover:text-accent-orange\" />\n            Personalize{' '}\n            <span className=\"text-accent-orange group-hover:text-accent-orange-bright\">\n              (new)\n            </span>\n          </NavLink>\n          <span className=\"text-muted-foreground\"></span>\n        </>\n      )}\n\n      {supports(Feature.MANAGED_MCP_SUPPORT) && (\n        <>\n          <a\n            href=\"/options.html#/connect-mcp\"\n            className=\"text-muted-foreground text-xs transition-colors hover:text-foreground\"\n          >\n            Connect MCP servers{' '}\n          </a>\n          <span className=\"text-muted-foreground\"></span>\n        </>\n      )}\n      <a\n        href=\"/options.html\"\n        className=\"text-muted-foreground text-xs transition-colors hover:text-foreground\"\n      >\n        Settings\n      </a>\n\n      <span className=\"text-muted-foreground\"></span>\n      <Button\n        variant=\"link\"\n        onClick={onOpenShortcuts}\n        className=\"hover:no-underline! px-0! text-muted-foreground text-xs transition-colors hover:text-foreground\"\n      >\n        Shortcuts\n      </Button>\n    </div>\n  )\n}\n","function isSymbol(value) {\n    return typeof value === 'symbol' || value instanceof Symbol;\n}\n\nexport { isSymbol };\n","import { isSymbol } from '../predicate/isSymbol.mjs';\n\nfunction toNumber(value) {\n    if (isSymbol(value)) {\n        return NaN;\n    }\n    return Number(value);\n}\n\nexport { toNumber };\n","import { toNumber } from './toNumber.mjs';\n\nfunction toFinite(value) {\n    if (!value) {\n        return value === 0 ? value : 0;\n    }\n    value = toNumber(value);\n    if (value === Infinity || value === -Infinity) {\n        const sign = value < 0 ? -1 : 1;\n        return sign * Number.MAX_VALUE;\n    }\n    return value === value ? value : 0;\n}\n\nexport { toFinite };\n","import { toFinite } from './toFinite.mjs';\n\nfunction toInteger(value) {\n    const finite = toFinite(value);\n    const remainder = finite % 1;\n    return remainder ? finite - remainder : finite;\n}\n\nexport { toInteger };\n","import { toInteger } from '../compat/util/toInteger.mjs';\n\nfunction take(arr, count, guard) {\n    count = guard || count === undefined ? 1 : toInteger(count);\n    return arr.slice(0, count);\n}\n\nexport { take };\n","import { compact } from 'es-toolkit/array'\nimport {\n  Bot,\n  FileText,\n  type LucideIcon,\n  MessagesSquare,\n  Scale,\n  Tags,\n} from 'lucide-react'\n\n/**\n * @public\n */\nexport type AITabSuggestion = {\n  name: string\n  icon: LucideIcon\n  minTabs: number\n  maxTabs: number\n  description: string\n}\n\nconst actions: AITabSuggestion[] = [\n  {\n    name: 'Summarize this Page',\n    icon: FileText,\n    minTabs: 1,\n    maxTabs: 1,\n    description: 'Generate a concise summary of the current webpage content.',\n  },\n  {\n    name: 'Summarize selected tabs',\n    icon: FileText,\n    minTabs: 2,\n    maxTabs: 5,\n    description:\n      'Generate a concise summary of the content from all selected tabs.',\n  },\n  {\n    name: 'What topics does this page talk about?',\n    icon: Tags,\n    minTabs: 1,\n    maxTabs: 1,\n    description:\n      'Identify and list the main topics discussed on the current webpage.',\n  },\n  {\n    name: 'Extract comments from this page',\n    icon: MessagesSquare,\n    minTabs: 1,\n    maxTabs: 1,\n    description:\n      'Extract user comments or feedback present on the current webpage.',\n  },\n  {\n    name: 'Compare selected tabs',\n    icon: Scale,\n    minTabs: 2,\n    maxTabs: 5,\n    description:\n      'Analyze and highlight the differences and similarities between the selected tabs.',\n  },\n]\n\n/**\n * @public\n */\nexport const useAITabSuggestions = ({\n  selectedTabs,\n  input,\n}: {\n  selectedTabs: chrome.tabs.Tab[]\n  input: string\n}) => {\n  const tabsLength = selectedTabs.length\n\n  const inputAction: AITabSuggestion | undefined = input\n    ? {\n        name: input,\n        icon: Bot,\n        description: '',\n        minTabs: 1,\n        maxTabs: Infinity,\n      }\n    : undefined\n\n  return compact([inputAction, ...actions]).filter(\n    (action) => tabsLength >= action.minTabs && tabsLength <= action.maxTabs,\n  )\n}\n","/**\n * @public\n */\nexport interface BrowserOSSuggestion {\n  mode: 'chat' | 'agent'\n  message: string\n}\n\n/**\n * @public\n */\nexport const useBrowserOSSuggestions = ({\n  query,\n}: {\n  query: string\n}): BrowserOSSuggestion[] => {\n  return [\n    {\n      mode: 'chat',\n      message: query,\n    },\n    // TODO: Temporarily removed agent mode on search suggestions\n    // {\n    //   mode: 'agent',\n    //   message: query,\n    // },\n  ]\n}\n","import type { SearchProviders } from './SearchProviders'\n\nconst getGoogleSuggestions = async (query: string): Promise<string[]> => {\n  const response = await fetch(\n    `https://suggestqueries.google.com/complete/search?client=chrome&q=${encodeURIComponent(query)}`,\n  )\n  const data = await response.json()\n  return data[1] || []\n}\n\nconst getBingSuggestions = async (query: string): Promise<string[]> => {\n  const response = await fetch(\n    `https://api.bing.com/osjson.aspx?query=${encodeURIComponent(query)}`,\n  )\n  const data = await response.json()\n  return data[1] || []\n}\n\ninterface YahooSuggestionItem {\n  key: string\n}\n\nconst getYahooIndiaSuggestions = async (query: string): Promise<string[]> => {\n  const response = await fetch(\n    `https://in.search.yahoo.com/sugg/gossip/gossip-in-loc/?command=${encodeURIComponent(query)}&output=json`,\n  )\n  const data = await response.json()\n  return data.gossip.results.map((item: YahooSuggestionItem) => item.key) || []\n}\n\nconst getDuckDuckGoSuggestions = async (query: string): Promise<string[]> => {\n  const response = await fetch(\n    `https://duckduckgo.com/ac/?q=${encodeURIComponent(query)}&type=list`,\n  )\n  const data = await response.json()\n  return data[1] || []\n}\n\nconst getYandexSuggestions = async (query: string): Promise<string[]> => {\n  const response = await fetch(\n    `https://suggest.yandex.com/suggest-ff.cgi?part=${encodeURIComponent(query)}&uil=en&v=3`,\n  )\n  const data = await response.json()\n  return data[1] || []\n}\n\n/**\n * TODO: Move search suggestions fetching to background script to avoid CORS issues\n */\nexport const getSearchSuggestions = async ([searchEngine, query]: [\n  searchEngine: SearchProviders,\n  query: string,\n]): Promise<string[]> => {\n  switch (searchEngine) {\n    case 'google':\n      return getGoogleSuggestions(query)\n    case 'bing':\n      return getBingSuggestions(query)\n    case 'yahoo':\n      return getYahooIndiaSuggestions(query)\n    case 'duckduckgo':\n      return getDuckDuckGoSuggestions(query)\n    case 'yandex':\n      return getYandexSuggestions(query)\n    default:\n      return []\n  }\n}\n","import { useEffect, useState } from 'react'\nimport useSWR from 'swr'\nimport { getSearchSuggestions } from './getSearchSuggestions'\nimport type { SearchProviders } from './SearchProviders'\n\ninterface useSearchSuggestionsArgs {\n  query: string\n  searchEngine: SearchProviders\n  debounceMs?: number\n}\n\n/**\n * @public\n */\nexport const useSearchSuggestions = ({\n  query,\n  searchEngine,\n  debounceMs = 300,\n}: useSearchSuggestionsArgs) => {\n  const [debouncedQuery, setDebouncedQuery] = useState(query)\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedQuery(query)\n    }, debounceMs)\n\n    return () => clearTimeout(timer)\n  }, [query, debounceMs])\n\n  return useSWR(\n    debouncedQuery ? [searchEngine, debouncedQuery] : null,\n    getSearchSuggestions,\n    { keepPreviousData: true },\n  )\n}\n","import { useMemo } from 'react'\nimport { useAITabSuggestions } from '../aiTabSuggestions/useAITabSuggestions'\nimport { useBrowserOSSuggestions } from '../browserOSSuggestions/useBrowserOSSuggestions'\nimport { useSearchSuggestions } from '../searchSuggestions/useSearchSuggestions'\nimport type {\n  AITabSuggestionItem,\n  BrowserOSSuggestionItem,\n  SearchSuggestionItem,\n  SuggestionItem,\n  SuggestionSection,\n} from './types'\n\ninterface UseSuggestionsArgs {\n  query: string\n  selectedTabs: chrome.tabs.Tab[]\n}\n\n/**\n * @public\n */\nexport const useSuggestions = ({ query, selectedTabs }: UseSuggestionsArgs) => {\n  const { data: searchResultsFromAPI } = useSearchSuggestions({\n    query,\n    searchEngine: 'google',\n  })\n\n  const searchResults: string[] = useMemo(() => {\n    const results = [...(searchResultsFromAPI ?? [])]\n    if (query && !results.includes(query)) {\n      results.unshift(query)\n    }\n    return results\n  }, [searchResultsFromAPI, query])\n\n  const aiTabResults = useAITabSuggestions({ selectedTabs, input: query })\n  const browserOSResults = useBrowserOSSuggestions({ query })\n\n  const sections = useMemo(() => {\n    const result: SuggestionSection[] = []\n\n    if (query && browserOSResults.length > 0) {\n      const browserOSItems: BrowserOSSuggestionItem[] = browserOSResults.map(\n        (item, index) => ({\n          id: `browseros-${index}`,\n          type: 'browseros' as const,\n          mode: item.mode,\n          message: item.message,\n        }),\n      )\n      result.push({\n        id: 'browseros',\n        // Removed title since browserOS result will only have 1 item\n        title: '',\n        items: browserOSItems,\n      })\n    }\n\n    if (selectedTabs.length > 0 && aiTabResults.length > 0) {\n      const aiItems: AITabSuggestionItem[] = aiTabResults.map(\n        (item, index) => ({\n          id: `ai-tab-${index}`,\n          type: 'ai-tab' as const,\n          name: item.name,\n          icon: item.icon,\n          description: item.description,\n          minTabs: item.minTabs,\n          maxTabs: item.maxTabs,\n        }),\n      )\n      result.push({\n        id: 'ai-actions',\n        title: 'AI Actions',\n        items: aiItems,\n      })\n    } else if (query && searchResults && searchResults.length > 0) {\n      const searchItems: SearchSuggestionItem[] = searchResults.map(\n        (item, index) => ({\n          id: `search-${index}`,\n          type: 'search' as const,\n          query: item,\n        }),\n      )\n      result.push({\n        id: 'google-search',\n        title: 'Google Search',\n        items: searchItems,\n      })\n    }\n\n    return result\n  }, [\n    query,\n    browserOSResults,\n    selectedTabs.length,\n    aiTabResults,\n    searchResults,\n  ])\n\n  const flatItems = useMemo(\n    () => sections.flatMap((section) => section.items),\n    [sections],\n  )\n\n  return { sections, flatItems }\n}\n\n/**\n * @public\n */\nexport const getSuggestionLabel = (item: SuggestionItem): string => {\n  switch (item.type) {\n    case 'search':\n      return item.query\n    case 'ai-tab':\n      return item.name\n    case 'browseros':\n      return item.message\n  }\n}\n","import { motion } from 'motion/react'\nimport type { FC } from 'react'\nimport ProductLogoSvg from '@/assets/product_logo.svg'\n\nexport const NewTabBranding: FC = () => {\n  return (\n    <div className=\"space-y-4 text-center\">\n      <div className=\"mb-2 flex items-center justify-center gap-3\">\n        <motion.div\n          layoutId=\"new-tab-branding\"\n          transition={{\n            type: 'keyframes',\n            damping: 20,\n            stiffness: 300,\n          }}\n          className=\"flex h-20 w-20 items-center justify-center rounded-xl bg-transparent\"\n        >\n          <img src={ProductLogoSvg} alt=\"BrowserOS\" className=\"h-20 w-20\" />\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n","import dayjs from 'dayjs'\nimport relativeTime from 'dayjs/plugin/relativeTime'\nimport {\n  Calendar,\n  CheckCircle2,\n  ChevronDown,\n  Clock,\n  Loader2,\n  XCircle,\n} from 'lucide-react'\nimport type { FC } from 'react'\nimport { useMemo, useState } from 'react'\nimport { RunResultDialog } from '@/components/ai-elements/run-result-dialog'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible'\nimport {\n  SCHEDULED_TASK_VIEW_MORE_IN_NEWTAB_EVENT,\n  SCHEDULED_TASK_VIEW_RESULTS_IN_NEWTAB_EVENT,\n} from '@/lib/constants/analyticsEvents'\nimport { track } from '@/lib/metrics/track'\nimport {\n  useScheduledJobRuns,\n  useScheduledJobs,\n} from '@/lib/schedules/scheduleStorage'\nimport type {\n  ScheduledJob,\n  ScheduledJobRun,\n} from '@/lib/schedules/scheduleTypes'\n\ndayjs.extend(relativeTime)\n\ninterface JobRunWithDetails extends ScheduledJobRun {\n  job: ScheduledJob | undefined\n}\n\nconst MAX_DISPLAY_COUNT = 3\n\nconst getStatusIcon = (status: JobRunWithDetails['status']) => {\n  switch (status) {\n    case 'completed':\n      return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n    case 'running':\n      return <Loader2 className=\"h-4 w-4 animate-spin text-accent-orange\" />\n    case 'failed':\n      return <XCircle className=\"h-4 w-4 text-destructive\" />\n  }\n}\n\nconst formatTimestamp = (dateString: string) => dayjs(dateString).fromNow()\n\nexport const ScheduleResults: FC = () => {\n  const [isOpen, setIsOpen] = useState(true)\n  const [viewingRun, setViewingRun] = useState<JobRunWithDetails | null>(null)\n\n  const { jobRuns } = useScheduledJobRuns()\n  const { jobs } = useScheduledJobs()\n\n  const runningCount = jobRuns.filter((r) => r.status === 'running').length\n\n  const displayedRuns: JobRunWithDetails[] = useMemo(() => {\n    const enrichWithJob = (run: ScheduledJobRun): JobRunWithDetails => ({\n      ...run,\n      job: jobs.find((j) => j.id === run.jobId),\n    })\n\n    const runningJobs = jobRuns\n      .filter((r) => r.status === 'running')\n      .map(enrichWithJob)\n\n    if (runningJobs.length >= MAX_DISPLAY_COUNT) {\n      return runningJobs\n    }\n\n    const completedOrFailed = jobRuns\n      .filter((r) => r.status === 'completed' || r.status === 'failed')\n      .sort(\n        (a, b) =>\n          new Date(b.startedAt).getTime() - new Date(a.startedAt).getTime(),\n      )\n      .slice(0, MAX_DISPLAY_COUNT - runningJobs.length)\n      .map(enrichWithJob)\n\n    return [...runningJobs, ...completedOrFailed]\n  }, [jobRuns, jobs])\n\n  const viewRun = (run: JobRunWithDetails) => {\n    track(SCHEDULED_TASK_VIEW_RESULTS_IN_NEWTAB_EVENT)\n    setViewingRun(run)\n  }\n\n  return (\n    <Collapsible\n      open={isOpen}\n      onOpenChange={setIsOpen}\n      className=\"mb-16 w-xl space-y-3 md:w-3xl\"\n    >\n      <CollapsibleTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className=\"group flex h-auto w-full items-center justify-between rounded-xl border border-border/50 bg-card/50 p-3 transition-all hover:border-border hover:bg-card\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"font-medium text-foreground text-sm\">\n              Scheduled Task Outputs\n            </span>\n            {runningCount > 0 && (\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {runningCount} running\n              </Badge>\n            )}\n          </div>\n          <ChevronDown\n            className={`h-4 w-4 text-muted-foreground transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n          />\n        </Button>\n      </CollapsibleTrigger>\n\n      <CollapsibleContent className=\"fade-in-0 slide-in-from-top-2 animate-in space-y-2 duration-200\">\n        {displayedRuns.map((run) => (\n          <Button\n            key={run.id}\n            variant=\"ghost\"\n            onClick={() => viewRun(run)}\n            className=\"h-auto w-full justify-start rounded-xl border border-border/50 bg-card p-4 text-left transition-all hover:border-border\"\n          >\n            <div className=\"flex w-full items-start gap-3\">\n              {getStatusIcon(run.status)}\n              <div className=\"min-w-0 flex-1\">\n                <div className=\"mb-1 flex items-center gap-2\">\n                  <span className=\"truncate font-medium text-foreground text-sm\">\n                    {run.job?.name}\n                  </span>\n                  <span className=\"flex items-center gap-1 text-muted-foreground text-xs\">\n                    <Clock className=\"h-3 w-3\" />\n                    {formatTimestamp(run.startedAt)}\n                  </span>\n                </div>\n                {run.result && (\n                  <p className=\"line-clamp-2 text-ellipsis text-muted-foreground text-xs\">\n                    {run.result}\n                  </p>\n                )}\n              </div>\n            </div>\n          </Button>\n        ))}\n        <Button variant=\"ghost\" asChild className=\"w-full\">\n          {/* biome-ignore lint/a11y/useValidAnchor: click handler is passive */}\n          <a\n            href=\"/options.html#/scheduled\"\n            onClick={() => track(SCHEDULED_TASK_VIEW_MORE_IN_NEWTAB_EVENT)}\n          >\n            View more\n          </a>\n        </Button>\n      </CollapsibleContent>\n\n      <RunResultDialog\n        run={viewingRun}\n        jobName={viewingRun?.job?.name}\n        onOpenChange={(open) => !open && setViewingRun(null)}\n      />\n    </Collapsible>\n  )\n}\n","import type { useCombobox } from 'downshift'\nimport { Bot, Search, Sparkles } from 'lucide-react'\nimport { motion } from 'motion/react'\nimport type { FC } from 'react'\nimport { cn } from '@/lib/utils'\nimport type { SuggestionItem, SuggestionSection } from './lib/suggestions/types'\n\ntype GetMenuProps = ReturnType<typeof useCombobox>['getMenuProps']\ntype GetItemProps = ReturnType<typeof useCombobox>['getItemProps']\n\ninterface SearchSuggestionsProps {\n  getMenuProps: GetMenuProps\n  getItemProps: GetItemProps\n  sections: SuggestionSection[]\n  highlightedIndex: number\n}\n\nconst SectionTitle: FC<{ title: string }> = ({ title }) =>\n  title ? (\n    <div className=\"mb-2 px-2 font-semibold text-muted-foreground text-xs uppercase tracking-wide\">\n      {title}\n    </div>\n  ) : null\n\nconst SuggestionItemRenderer: FC<{\n  item: SuggestionItem\n  isHighlighted: boolean\n  getItemProps: GetItemProps\n  index: number\n}> = ({ item, isHighlighted, getItemProps, index }) => {\n  const baseClassName = cn(\n    'ph-mask flex w-full items-center gap-3 rounded-lg p-3 text-left text-foreground text-sm transition-colors hover:bg-accent cursor-pointer',\n    isHighlighted && 'bg-accent',\n  )\n\n  switch (item.type) {\n    case 'search':\n      return (\n        <li className={baseClassName} {...getItemProps({ item, index })}>\n          <Search className=\"h-4 w-4 text-muted-foreground\" />\n          {item.query}\n        </li>\n      )\n\n    case 'ai-tab':\n      return (\n        <li className={baseClassName} {...getItemProps({ item, index })}>\n          <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-[var(--accent-orange)]/10 transition-colors group-hover:bg-[var(--accent-orange)]/20\">\n            <item.icon className=\"h-4 w-4 text-[var(--accent-orange)]\" />\n          </div>\n          <div className=\"flex-1 text-left\">\n            <div className=\"font-medium text-foreground text-sm\">\n              {item.name}\n            </div>\n            {item.description && (\n              <div className=\"text-muted-foreground text-xs\">\n                {item.description}\n              </div>\n            )}\n          </div>\n        </li>\n      )\n\n    case 'browseros':\n      return (\n        <li className={baseClassName} {...getItemProps({ item, index })}>\n          {item.mode === 'chat' ? (\n            <Sparkles className=\"h-4 w-4 text-muted-foreground\" />\n          ) : (\n            <Bot className=\"h-4 w-4 text-muted-foreground\" />\n          )}\n          <span className=\"font-semibold\">\n            {item.mode === 'chat' ? 'Ask BrowserOS:' : 'Run Agent:'}\n          </span>\n          {item.message || 'Type a message...'}\n        </li>\n      )\n  }\n}\n\nexport const SearchSuggestions: FC<SearchSuggestionsProps> = ({\n  getItemProps,\n  getMenuProps,\n  sections,\n  highlightedIndex,\n}) => {\n  let globalIndex = 0\n\n  return (\n    <motion.ul\n      {...getMenuProps()}\n      className=\"styled-scrollbar flex max-h-60 flex-col gap-2 overflow-y-auto px-2\"\n      transition={{ duration: 0.2 }}\n      initial={{ opacity: 0, height: 0 }}\n      animate={{ opacity: 1, height: 'auto' }}\n      exit={{ opacity: 0, height: 0 }}\n    >\n      {sections.map((section) => (\n        <div key={section.id} className=\"px-3\">\n          <SectionTitle title={section.title} />\n          {section.items.map((item) => {\n            const currentIndex = globalIndex++\n            return (\n              <SuggestionItemRenderer\n                key={item.id}\n                item={item}\n                isHighlighted={highlightedIndex === currentIndex}\n                getItemProps={getItemProps}\n                index={currentIndex}\n              />\n            )\n          })}\n        </div>\n      ))}\n    </motion.ul>\n  )\n}\n","/**\n * @public\n */\nexport const SHORTCUTS_LIST = [\n  {\n    key: 'A',\n    description: 'Toggle Agent',\n    modifier: {\n      windows: 'Alt',\n      mac: '',\n    },\n  },\n  {\n    key: 'K',\n    description: 'Toggle LLM Chat',\n    modifier: {\n      windows: 'Alt',\n      mac: '',\n    },\n  },\n  {\n    key: 'L',\n    description: 'Switch providers in LLM Chat',\n    modifier: {\n      windows: 'Alt',\n      mac: '',\n    },\n  },\n]\n","import { useEffect, useState } from 'react'\n\n/**\n * @public\n */\nexport const useIsMac = (): boolean | undefined => {\n  const [isMac, setIsMac] = useState<boolean | undefined>(undefined)\n\n  useEffect(() => {\n    setIsMac(navigator.platform.toUpperCase().indexOf('MAC') >= 0)\n  }, [])\n\n  return isMac\n}\n","import {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Kbd, KbdGroup } from '@/components/ui/kbd'\nimport { SHORTCUTS_LIST } from '@/lib/constants/shortcuts'\nimport { useIsMac } from '@/lib/useIsMac'\n\ninterface ShortcutsDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport const ShortcutsDialog = ({\n  open,\n  onOpenChange,\n}: ShortcutsDialogProps) => {\n  const isMac = useIsMac()\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"styled-scrollbar max-h-[80vh] max-w-xl overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"font-semibold text-2xl\">\n            Keyboard Shortcuts\n          </DialogTitle>\n          <DialogDescription>\n            Use these shortcuts to navigate BrowserOS faster\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"mt-8\">\n          <div className=\"space-y-1\">\n            {SHORTCUTS_LIST.map((shortcut, index) => (\n              <div\n                key={index.toString()}\n                className=\"group flex items-center justify-between rounded-md px-2 py-3 transition-colors hover:bg-accent/30\"\n              >\n                <span className=\"text-foreground text-sm group-hover:text-foreground/90\">\n                  {shortcut.description}\n                </span>\n                <div className=\"flex items-center gap-1.5\">\n                  <KbdGroup>\n                    <Kbd>\n                      {isMac\n                        ? shortcut.modifier.mac\n                        : shortcut.modifier.windows}\n                    </Kbd>\n                    <span>+</span>\n                    <Kbd>{shortcut.key}</Kbd>\n                  </KbdGroup>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mt-8 border-border/50 border-t pt-4 text-center text-muted-foreground text-xs\">\n          More shortcuts coming soon\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","/**\n * @public\n */\nexport const getFavicons = (host: string) => {\n  // return `https://icons.duckduckgo.com/ip3/${host}.ico`\n  return `https://www.google.com/s2/favicons?domain=${host}&sz=28`\n}\n","import { take } from 'es-toolkit/array'\nimport { useEffect, useState } from 'react'\nimport { getFavicons } from '@/lib/getFavicons'\n\ninterface TopSite {\n  name: string\n  icon?: string\n  url: string\n}\n\nexport const useTopSites = () => {\n  const [topSites, setTopSites] = useState<TopSite[]>([])\n\n  useEffect(() => {\n    chrome.topSites.get().then((urls) => {\n      const firstFive = take(urls, 5)\n      setTopSites(\n        firstFive.map((each) => {\n          let icon: string | undefined\n          try {\n            const host = new URL(each.url).host\n            icon = getFavicons(host)\n          } catch {\n            // invalid url - no action needed\n          }\n          return {\n            name: each.title,\n            url: each.url,\n            icon,\n          }\n        }),\n      )\n    })\n  }, [])\n\n  return topSites\n}\n","import { Globe } from 'lucide-react'\nimport { type FC, useState } from 'react'\nimport { useTopSites } from './useTopSites'\n\nconst TopSiteIcon: FC<{ src: string; alt: string }> = ({ src, alt }) => {\n  const [failed, setFailed] = useState(false)\n\n  if (failed) {\n    return <Globe className=\"h-7 w-7 text-foreground\" />\n  }\n\n  return (\n    <img\n      src={src}\n      alt={alt}\n      className=\"h-7 w-7 object-contain\"\n      onError={() => {\n        setFailed(true)\n      }}\n      onLoad={(e) => {\n        const img = e.currentTarget\n        if (img.naturalWidth === 0 || img.naturalHeight === 0) {\n          setFailed(true)\n        }\n      }}\n    />\n  )\n}\n\nexport const TopSites: FC = () => {\n  const topSites = useTopSites()\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"text-center\">\n        <h2 className=\"font-semibold text-muted-foreground text-xs uppercase tracking-wide\">\n          Top Sites\n        </h2>\n      </div>\n      <div className=\"flex items-center justify-center gap-6\">\n        {topSites.map((site, idx) => (\n          <a\n            key={idx.toString()}\n            href={site.url}\n            className=\"group flex flex-col items-center gap-2 transition-transform hover:scale-110\"\n          >\n            <div className=\"flex h-14 w-14 items-center justify-center rounded-2xl border border-border/50 bg-card shadow-sm transition-transform group-hover:border-[var(--accent-orange)]/30 group-hover:shadow-md\">\n              {site.icon ? (\n                <TopSiteIcon src={site.icon} alt={site.name} />\n              ) : (\n                <Globe className=\"h-7 w-7 text-foreground\" />\n              )}\n            </div>\n            <span className=\"line-clamp-1 max-w-18 text-muted-foreground text-xs transition-colors group-hover:text-foreground\">\n              {site.name}\n            </span>\n          </a>\n        ))}\n      </div>\n    </div>\n  )\n}\n","import { useCombobox } from 'downshift'\nimport {\n  ArrowRight,\n  File,\n  Globe,\n  ImageIcon,\n  Layers,\n  Search,\n  X,\n} from 'lucide-react'\nimport { AnimatePresence, motion } from 'motion/react'\nimport type React from 'react'\nimport { useEffect, useRef, useState } from 'react'\nimport {\n  GlowingBorder,\n  GlowingElement,\n} from '@/components/elements/glowing-border'\nimport { TabSelector } from '@/components/elements/tab-selector'\nimport { Button } from '@/components/ui/button'\nimport {\n  createAITabAction,\n  createBrowserOSAction,\n} from '@/lib/chat-actions/types'\nimport {\n  NEWTAB_AI_TRIGGERED_EVENT,\n  NEWTAB_SEARCH_EXECUTED_EVENT,\n} from '@/lib/constants/analyticsEvents'\nimport { openSidePanelWithSearch } from '@/lib/messaging/sidepanel/openSidepanelWithSearch'\nimport { track } from '@/lib/metrics/track'\nimport { cn } from '@/lib/utils'\nimport { FooterLinks } from './FooterLinks'\nimport type { SuggestionItem } from './lib/suggestions/types'\nimport {\n  getSuggestionLabel,\n  useSuggestions,\n} from './lib/suggestions/useSuggestions'\nimport { NewTabBranding } from './NewTabBranding'\nimport { ScheduleResults } from './ScheduleResults'\nimport { SearchSuggestions } from './SearchSuggestions'\nimport { ShortcutsDialog } from './ShortcutsDialog'\nimport { TopSites } from './TopSites'\n\ninterface SelectedFile {\n  name: string\n  size: number\n  type: string\n  preview?: string\n}\n\n/**\n * @public\n */\nexport const NewTab = () => {\n  const [inputValue, setInputValue] = useState('')\n  const [mounted, setMounted] = useState(false)\n  const [selectedFiles, setSelectedFiles] = useState<SelectedFile[]>([])\n  const inputRef = useRef<HTMLInputElement>(null)\n  // const fileInputRef = useRef<HTMLInputElement>(null)\n  const tabsDropdownRef = useRef<HTMLDivElement>(null)\n  const [selectedTabs, setSelectedTabs] = useState<chrome.tabs.Tab[]>([])\n  const [shortcutsDialogOpen, setShortcutsDialogOpen] = useState(false)\n\n  const toggleTab = (tab: chrome.tabs.Tab) => {\n    setSelectedTabs((prev) => {\n      const isSelected = prev.some((t) => t.id === tab.id)\n      if (isSelected) {\n        return prev.filter((t) => t.id !== tab.id)\n      }\n      return [...prev, tab]\n    })\n  }\n\n  const removeTab = (tabId?: number) => {\n    setSelectedTabs((prev) => prev.filter((t) => t.id !== tabId))\n  }\n\n  const { sections, flatItems } = useSuggestions({\n    query: inputValue,\n    selectedTabs,\n  })\n\n  const {\n    isOpen,\n    getMenuProps,\n    getInputProps,\n    highlightedIndex,\n    getItemProps,\n    reset,\n  } = useCombobox<SuggestionItem>({\n    items: flatItems,\n    inputValue,\n    itemToString: (item) => (item ? getSuggestionLabel(item) : ''),\n    onSelectedItemChange({ selectedItem }) {\n      if (selectedItem) {\n        runSelectedAction(selectedItem)\n      }\n    },\n    onStateChange: ({ type, inputValue, highlightedIndex, selectedItem }) => {\n      if (type === useCombobox.stateChangeTypes.InputKeyDownEnter) {\n        if (!selectedItem && !highlightedIndex && !inputValue) {\n          executeDefaultAction()\n        }\n      }\n    },\n    onInputValueChange({ inputValue: newValue }) {\n      setInputValue(newValue ?? '')\n    },\n  })\n\n  const handleSend = () => {\n    if (highlightedIndex > -1) {\n      const selectedItem = flatItems[highlightedIndex]\n      runSelectedAction(selectedItem)\n    } else {\n      executeDefaultAction()\n    }\n  }\n\n  const executeDefaultAction = () => {\n    const selectedItem = flatItems[0]\n    runSelectedAction(selectedItem)\n  }\n\n  const runSelectedAction = (item: SuggestionItem | undefined) => {\n    if (!item) return\n\n    switch (item.type) {\n      case 'search':\n        track(NEWTAB_SEARCH_EXECUTED_EVENT, { search_engine: 'google' })\n        window.open(\n          `https://www.google.com/search?q=${encodeURIComponent(item.query)}`,\n          '_self',\n        )\n        break\n      case 'ai-tab': {\n        track(NEWTAB_AI_TRIGGERED_EVENT, {\n          mode: 'agent',\n          tabs_count: selectedTabs.length,\n        })\n        const action = createAITabAction({\n          name: item.name,\n          description: item.description,\n          tabs: selectedTabs,\n        })\n        const searchQuery = `${item.name}${item.description ? ` - ${item.description}` : ''}}`\n        openSidePanelWithSearch('open', {\n          query: searchQuery,\n          mode: 'agent',\n          action,\n        })\n        break\n      }\n      case 'browseros': {\n        track(NEWTAB_AI_TRIGGERED_EVENT, {\n          mode: item.mode,\n          tabs_count: selectedTabs.length,\n        })\n        const action = createBrowserOSAction({\n          mode: item.mode,\n          message: item.message,\n          tabs: selectedTabs,\n        })\n        openSidePanelWithSearch('open', {\n          query: item.message,\n          mode: item.mode,\n          action,\n        })\n        break\n      }\n    }\n    reset()\n    setSelectedTabs([])\n  }\n\n  const isSuggestionsVisible =\n    // User is typing text into the input\n    (isOpen && inputValue.length) ||\n    // There are sections to display\n    (sections.length > 0 && inputValue.length) ||\n    // User has selected some active tabs\n    (isOpen && selectedTabs.length)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const _handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []).slice(0, 2) // Limit to 2 files\n    const fileData = files.map((file) => ({\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      preview: file.type.startsWith('image/')\n        ? URL.createObjectURL(file)\n        : undefined,\n    }))\n    setSelectedFiles(fileData)\n  }\n\n  useEffect(() => {\n    return () => {\n      selectedFiles.forEach((file) => {\n        if (file.preview) {\n          URL.revokeObjectURL(file.preview)\n        }\n      })\n    }\n  }, [selectedFiles])\n\n  const removeFile = (index: number) => {\n    setSelectedFiles((prev) => prev.filter((_, i) => i !== index))\n  }\n\n  return (\n    <div className=\"pt-[max(25vh,16px)]\">\n      {/* Main content */}\n      <div className={'relative w-full space-y-8 md:w-3xl'}>\n        {/* Logo and branding */}\n        <NewTabBranding />\n        {/* Search bar with context */}\n        <div\n          className={cn(\n            'relative overflow-hidden bg-border/50 p-[2px]',\n            isSuggestionsVisible ||\n              selectedTabs.length > 0 ||\n              selectedFiles.length > 0\n              ? 'bg-[var(--accent-orange)]/30 shadow-[var(--accent-orange)]/10'\n              : 'bg-border/50 hover:border-border',\n          )}\n          style={{ borderRadius: '1.5rem' }}\n        >\n          {mounted && (\n            <div\n              className=\"absolute inset-0\"\n              style={{ borderRadius: '1.5rem' }}\n            >\n              <GlowingBorder duration={2000} delay={0} rx=\"1.5rem\" ry=\"1.5rem\">\n                <GlowingElement />\n              </GlowingBorder>\n            </div>\n          )}\n          <div\n            className={cn(\n              'relative bg-card shadow-lg',\n              isSuggestionsVisible ||\n                selectedTabs.length > 0 ||\n                selectedFiles.length > 0\n                ? 'border-[var(--accent-orange)]/30 shadow-[var(--accent-orange)]/10'\n                : 'border-border/50 hover:border-border',\n            )}\n            style={{ borderRadius: 'calc(1.5rem - 2px)' }}\n          >\n            {/* Main search input */}\n            <div className=\"flex items-center gap-3 px-5 py-4\">\n              <Search className=\"h-5 w-5 flex-shrink-0 text-muted-foreground\" />\n\n              <input\n                ref={inputRef}\n                type=\"text\"\n                placeholder=\"Ask AI or search Google...\"\n                className=\"flex-1 border-none bg-transparent text-base text-foreground outline-none placeholder:text-muted-foreground\"\n                {...getInputProps()}\n              />\n\n              <Button\n                onClick={handleSend}\n                size=\"icon\"\n                className=\"h-10 w-10 flex-shrink-0 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90\"\n              >\n                <ArrowRight className=\"h-5 w-5\" />\n              </Button>\n            </div>\n\n            <AnimatePresence>\n              {(selectedTabs.length > 0 || selectedFiles.length > 0) && (\n                <motion.div\n                  className=\"overflow-clip px-5 pb-4\"\n                  transition={{ duration: 0.2 }}\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: 'auto' }}\n                  exit={{ opacity: 0, height: 0 }}\n                >\n                  <div className=\"styled-scrollbar flex gap-3 overflow-x-auto pb-2\">\n                    <AnimatePresence>\n                      {selectedTabs.map((selectedTab) => {\n                        if (!selectedTab) return null\n                        return (\n                          <motion.div\n                            key={selectedTab.id}\n                            className=\"group w-48 flex-shrink-0 overflow-clip rounded-lg border border-border bg-accent/50 p-3 transition-colors hover:bg-accent\"\n                            transition={{ duration: 0.2 }}\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: 'auto' }}\n                            exit={{ opacity: 0, height: 0 }}\n                          >\n                            <div className=\"flex items-start gap-3\">\n                              <div className=\"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg border border-border bg-background\">\n                                {selectedTab.favIconUrl ? (\n                                  <img\n                                    src={selectedTab.favIconUrl}\n                                    alt={selectedTab.title}\n                                    className=\"h-6 w-6\"\n                                  />\n                                ) : (\n                                  <Globe className=\"h-6 w-6\" />\n                                )}\n                              </div>\n                              <div className=\"min-w-0 flex-1\">\n                                <div className=\"mb-1 truncate font-medium text-foreground text-sm\">\n                                  {selectedTab.title}\n                                </div>\n                                <div className=\"text-muted-foreground text-xs\">\n                                  Tab\n                                </div>\n                              </div>\n                              <button\n                                type=\"button\"\n                                onClick={() => removeTab(selectedTab.id)}\n                                className=\"cursor-pointer rounded p-1 opacity-0 transition-opacity hover:bg-background group-hover:opacity-100\"\n                              >\n                                <X className=\"h-3 w-3\" />\n                              </button>\n                            </div>\n                          </motion.div>\n                        )\n                      })}\n\n                      {selectedFiles.map((file, index) => (\n                        <div\n                          key={index.toString()}\n                          className=\"group w-48 flex-shrink-0 rounded-lg border border-border bg-accent/50 p-3 transition-colors hover:bg-accent\"\n                        >\n                          <div className=\"flex items-start gap-3\">\n                            <div className=\"flex h-10 w-10 flex-shrink-0 items-center justify-center overflow-hidden rounded-lg border border-border bg-background\">\n                              {file.preview ? (\n                                <img\n                                  src={file.preview || '/placeholder.svg'}\n                                  alt={file.name}\n                                  className=\"h-full w-full object-cover\"\n                                />\n                              ) : file.type.startsWith('image/') ? (\n                                <ImageIcon className=\"h-5 w-5 text-muted-foreground\" />\n                              ) : (\n                                <File className=\"h-5 w-5 text-muted-foreground\" />\n                              )}\n                            </div>\n                            <div className=\"min-w-0 flex-1\">\n                              <div className=\"mb-1 truncate font-medium text-foreground text-sm\">\n                                {file.name}\n                              </div>\n                              <div className=\"text-muted-foreground text-xs\">\n                                {(file.size / 1024).toFixed(1)} KB\n                              </div>\n                            </div>\n                            <button\n                              type=\"button\"\n                              onClick={() => removeFile(index)}\n                              className=\"cursor-pointer rounded p-1 opacity-0 transition-opacity hover:bg-background group-hover:opacity-100\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </AnimatePresence>\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n\n            <AnimatePresence>\n              {isSuggestionsVisible && (\n                <SearchSuggestions\n                  getItemProps={getItemProps}\n                  getMenuProps={getMenuProps}\n                  highlightedIndex={highlightedIndex}\n                  sections={sections}\n                />\n              )}\n            </AnimatePresence>\n\n            {mounted && (\n              <div className=\"flex items-center justify-between border-border/50 border-t px-5 py-3\">\n                <div className=\"flex items-center gap-1\">\n                  <div className=\"relative\" ref={tabsDropdownRef}>\n                    <TabSelector\n                      selectedTabs={selectedTabs}\n                      onToggleTab={toggleTab}\n                    >\n                      <Button\n                        className={cn(\n                          'flex items-center gap-2 rounded-lg px-3 py-1.5 font-medium text-sm transition-all',\n                          selectedTabs.length > 0\n                            ? 'bg-[var(--accent-orange)]! text-white shadow-sm'\n                            : 'bg-transparent text-muted-foreground hover:bg-accent hover:text-accent-foreground',\n                          'data-[state=open]:bg-accent',\n                        )}\n                      >\n                        <Layers className=\"h-4 w-4\" />\n                        <span>Tabs</span>\n                      </Button>\n                    </TabSelector>\n                  </div>\n\n                  {/*<button\n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className={`flex items-center gap-2 rounded-lg px-3 py-1.5 font-medium text-sm transition-all ${\n                      selectedFiles.length > 0\n                        ? 'bg-[var(--accent-orange)] text-white shadow-sm'\n                        : 'bg-transparent text-muted-foreground hover:bg-accent hover:text-accent-foreground'\n                    }`}\n                  >\n                    <Upload className=\"h-4 w-4\" />\n                    <span>Files</span>\n                  </button>*/}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Top sites */}\n        {!isSuggestionsVisible && <TopSites />}\n\n        {!isSuggestionsVisible && (\n          <FooterLinks onOpenShortcuts={() => setShortcutsDialogOpen(true)} />\n        )}\n\n        {mounted && !isSuggestionsVisible && <ScheduleResults />}\n      </div>\n      {mounted && (\n        <ShortcutsDialog\n          open={shortcutsDialogOpen}\n          onOpenChange={setShortcutsDialogOpen}\n        />\n      )}\n    </div>\n  )\n}\n","import type { FC } from 'react'\n\nexport const NewTabFocusGrid: FC = () => {\n  return (\n    <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\n      <div className=\"absolute inset-0 bg-grid-pattern\"></div>\n      <div className=\"absolute inset-0 bg-gradient-radial-focus\"></div>\n    </div>\n  )\n}\n","import { LayoutGroup } from 'motion/react'\nimport type { FC } from 'react'\nimport { Outlet } from 'react-router'\nimport { ThemeToggle } from '@/components/elements/theme-toggle'\nimport { NewTabFocusGrid } from './NewTabFocusGrid'\n\nexport const NewTabLayout: FC = () => {\n  return (\n    <div className=\"relative flex min-h-screen flex-col items-center overflow-hidden bg-background px-6\">\n      {/* Subtle grid background */}\n      <NewTabFocusGrid />\n\n      <div className=\"fixed top-6 right-6 z-50\">\n        <ThemeToggle />\n      </div>\n\n      <LayoutGroup>\n        <Outlet />\n      </LayoutGroup>\n    </div>\n  )\n}\n","export const templates = {\n  aboutYou: {\n    template: `# About Me\n\n- **Name:** [Your name]\n- **Role:** [Your job title or role]\n- **Interests:** [Your hobbies and interests]\n- **Location:** [Your city/country]\n- **Background:** [Brief description of your background]`,\n    example: `**Example:**\n- **Name:** Alex Johnson\n- **Role:** Software Developer\n- **Interests:** Reading, hiking, photography\n- **Location:** San Francisco, CA\n- **Background:** I've been coding for 5 years and love building web applications`,\n  },\n\n  expectations: {\n    template: `## What I Expect from the Browser\n\n- **Primary use case:** [What you mainly use the browser for]\n- **Productivity needs:** [Tools and features that help you work]\n- **Privacy preferences:** [Your privacy and security expectations]\n- **Customization:** [How you like to personalize your experience]`,\n    example: `**Example:**\n- **Primary use case:** Research and development work\n- **Productivity needs:** Fast tab switching, quick search, AI assistance\n- **Privacy preferences:** Strong tracking protection, secure browsing\n- **Customization:** Dark mode, minimal UI, keyboard shortcuts`,\n  },\n\n  commonActions: {\n    template: `## Commonly Performed Actions\n\n- **Daily tasks:**\n  - [Task 1]\n  - [Task 2]\n  - [Task 3]\n\n- **Frequent websites:**\n  - [Website 1] - [Why you visit]\n  - [Website 2] - [Why you visit]\n\n- **Typical workflows:**\n  - [Workflow 1]\n  - [Workflow 2]`,\n    example: `**Example:**\n- **Daily tasks:**\n  - Checking emails and messages\n  - Reading tech news and articles\n  - Writing code and documentation\n\n- **Frequent websites:**\n  - GitHub - Code collaboration\n  - Stack Overflow - Problem solving\n  - Medium - Learning and reading\n\n- **Typical workflows:**\n  - Morning: Check email  Read news  Plan day\n  - Work: Code  Test  Review  Deploy\n  - Evening: Learn new tech  Read articles  Relax`,\n  },\n}\n","import { ArrowLeft, Check, ChevronDown, Copy } from 'lucide-react'\nimport { useEffect, useState } from 'react'\nimport { NavLink } from 'react-router'\nimport { Button } from '@/components/ui/button'\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { usePersonalization } from '@/lib/personalization/personalizationStorage'\nimport { cn } from '@/lib/utils'\nimport { NewTabBranding } from '../index/NewTabBranding'\nimport { templates } from './templates'\n\nconst sections = [\n  {\n    key: 'aboutYou' as const,\n    title: 'Add more info about you',\n    description: 'Help BrowserOS understand who you are',\n  },\n  {\n    key: 'expectations' as const,\n    title: 'What you expect from the browser',\n    description: 'Share your preferences and needs',\n  },\n  {\n    key: 'commonActions' as const,\n    title: 'Your commonly performed actions',\n    description: 'Describe your daily workflows',\n  },\n]\n\nexport const Personalize = () => {\n  const [mounted, setMounted] = useState(false)\n  const [expandedSection, setExpandedSection] = useState<string | null>(\n    sections[0].key,\n  )\n  const [copiedSection, setCopiedSection] = useState<string | null>(null)\n  const { personalization, setPersonalization } = usePersonalization()\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const copyTemplate = (templateKey: keyof typeof templates) => {\n    const template = templates[templateKey].template\n    navigator.clipboard.writeText(template)\n    setCopiedSection(templateKey)\n    setTimeout(() => setCopiedSection(null), 2000)\n  }\n\n  return (\n    <div className=\"pt-[max(5vh,16px)]\">\n      <div className=\"absolute top-6 left-6 z-10\">\n        <Button variant=\"outline\" asChild className=\"rounded-xl\">\n          <NavLink to=\"/\" className=\"gap-2\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back\n          </NavLink>\n        </Button>\n      </div>\n\n      <div className=\"relative flex min-h-screen items-center justify-center px-4 py-16 md:w-xl\">\n        <div className={`w-full max-w-3xl space-y-8 duration-700`}>\n          <NewTabBranding />\n\n          <div\n            className={cn(\n              'space-y-3 transition-transform',\n              mounted ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-0',\n            )}\n          >\n            <Label htmlFor=\"personalization\">Your Information</Label>\n            <Textarea\n              id=\"personalization\"\n              value={personalization}\n              autoFocus\n              onChange={(e) => setPersonalization(e.target.value)}\n              placeholder=\"Tell BrowserOS about yourself... (Supports Markdown)\"\n              className=\"styled-scrollbar h-96 resize-none rounded-2xl border-2 border-border/50 bg-card px-4 py-3 transition-transform placeholder:text-muted-foreground focus:border-[var(--accent-orange)]/30 focus:ring-4 focus:ring-[var(--accent-orange)]/10\"\n            />\n            <p className=\"text-muted-foreground text-xs\">\n              Your information is saved locally and never leaves your device.\n              Markdown formatting is supported.\n            </p>\n          </div>\n\n          <div\n            className={cn(\n              'space-y-3 transition-transform',\n              mounted ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-0',\n            )}\n          >\n            <h2 className=\"font-semibold text-muted-foreground text-sm uppercase tracking-wide\">\n              Need help getting started?\n            </h2>\n            <div className=\"space-y-2\">\n              {sections.map((section) => (\n                <Collapsible\n                  key={section.key}\n                  open={expandedSection === section.key}\n                  onOpenChange={(open) =>\n                    setExpandedSection(open ? section.key : null)\n                  }\n                  className=\"w-full rounded-xl border border-border/50 bg-card hover:border-border\"\n                >\n                  <CollapsibleTrigger asChild>\n                    <Button\n                      variant=\"ghost\"\n                      className=\"flex h-auto w-full items-center justify-between p-4 text-left hover:bg-accent/50\"\n                    >\n                      <div className=\"flex-1\">\n                        <h3 className=\"mb-1 font-medium text-foreground text-sm\">\n                          {section.title}\n                        </h3>\n                        <p className=\"text-muted-foreground text-xs\">\n                          {section.description}\n                        </p>\n                      </div>\n                      <ChevronDown\n                        className={`h-5 w-5 shrink-0 text-muted-foreground transition-transform duration-200 ${expandedSection === section.key ? 'rotate-180' : ''}`}\n                      />\n                    </Button>\n                  </CollapsibleTrigger>\n\n                  <CollapsibleContent className=\"overflow-hidden data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down\">\n                    <div className=\"space-y-3 px-4 pb-4\">\n                      <div>\n                        <p className=\"mb-2 font-medium text-muted-foreground text-xs\">\n                          Template (click to copy):\n                        </p>\n                        <div className=\"relative\">\n                          <pre className=\"styled-scrollbar overflow-x-auto whitespace-pre-wrap break-words rounded-lg border border-border bg-accent/50 p-4 text-foreground text-xs\">\n                            {templates[section.key].template}\n                          </pre>\n                          <Button\n                            variant=\"outline\"\n                            size=\"icon-sm\"\n                            onClick={() => copyTemplate(section.key)}\n                            className=\"absolute top-3 right-3\"\n                            title=\"Copy template\"\n                          >\n                            {copiedSection === section.key ? (\n                              <Check className=\"h-4 w-4 text-green-500\" />\n                            ) : (\n                              <Copy className=\"h-4 w-4 text-muted-foreground\" />\n                            )}\n                          </Button>\n                        </div>\n                      </div>\n\n                      <div>\n                        <p className=\"mb-2 font-medium text-muted-foreground text-xs\">\n                          Example:\n                        </p>\n                        <pre className=\"styled-scrollbar overflow-x-auto whitespace-pre-wrap break-words rounded-lg border border-border/30 bg-muted/30 p-4 text-muted-foreground text-xs\">\n                          {templates[section.key].example}\n                        </pre>\n                      </div>\n\n                      <p className=\"text-muted-foreground text-xs\">\n                        Click the copy button to add this template to your\n                        clipboard, then paste it into the text area above and\n                        customize it.\n                      </p>\n                    </div>\n                  </CollapsibleContent>\n                </Collapsible>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import type { FC } from 'react'\nimport { HashRouter, Route, Routes } from 'react-router'\nimport { NewTab } from './index/NewTab'\nimport { NewTabLayout } from './layout/NewTabLayout'\nimport { Personalize } from './personalize/Personalize'\n\nexport const App: FC = () => {\n  return (\n    <HashRouter>\n      <Routes>\n        <Route element={<NewTabLayout />}>\n          <Route index element={<NewTab />} />\n          <Route path=\"/personalize\" element={<Personalize />} />\n        </Route>\n      </Routes>\n    </HashRouter>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport '@/styles/global.css'\nimport { ThemeProvider } from '@/components/theme-provider.tsx'\nimport { Toaster } from '@/components/ui/sonner'\nimport { AnalyticsProvider } from '@/lib/analytics/AnalyticsProvider.tsx'\nimport { sentryRootErrorHandler } from '@/lib/sentry/sentryRootErrorHandler.ts'\nimport { App } from './App.tsx'\n\nconst $root = document.getElementById('root')\n\nif ($root) {\n  ReactDOM.createRoot($root, sentryRootErrorHandler).render(\n    <React.StrictMode>\n      <AnalyticsProvider>\n        <ThemeProvider>\n          <App />\n          <Toaster />\n        </ThemeProvider>\n      </AnalyticsProvider>\n    </React.StrictMode>,\n  )\n}\n"],"names":["__iconNode","Calendar","createLucideIcon","File","Image","MessagesSquare","Scale","Tags","UserPen","_extends","n","e","t","r","ReactPropTypesSecret","ReactPropTypesSecret_1","require$$0","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","props","propName","componentName","location","propFullName","secret","err","getShim","ReactPropTypes","propTypesModule","b","c","d","f","g","h","k","l","m","p","q","u","v","a","reactIs_production_min","reactIsModule","o","i","s","w","W","H","y","M","E","x","C","I","R","B","V","D","L","T","F","S","X","Y","idCounter","noop","scrollIntoView","node","menuNode","actions","compute","_ref","el","top","left","isOrContainsNode","parent","child","environment","result","debounce","fn","time","timeoutId","cancel","wrapper","_len","args","_key","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","handleRefs","_len4","refs","_key4","ref","generateId","getState","state","prevState","key","isControlledProp","normalizeArrowKey","keyCode","getHighlightedIndex","start","offset","items","isItemDisabled","circular","count","itemsLastIndex","current","highlightedIndex","getNonDisabledIndex","backwards","index","_index","targetWithinDownshift","target","downshiftElements","checkActiveElement","contextNode","cleanupStatus","documentProp","getStatusDiv","statusDiv","setStatus","status","div","cleanupStatusDiv","dropdownDefaultStateValues","callOnChangeProps","action","newState","type","changes","invokeOnChangeHandler","handler","capitalizeString","stateReducer","updateA11yStatus","document","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useElementIds","React","id","labelId","menuId","getItemId","toggleButtonId","inputId","reactId","elementIds","useMemo","_ref2","_ref2$id","getItemAndIndex","itemProp","indexProp","errorMessage","item","string","useLatestRef","val","useRef","useEnhancedReducer","reducer","createInitialState","isStateEqual","prevStateRef","actionRef","enhancedReducer","useCallback","_useReducer","useReducer","dispatch","propsRef","dispatchWithProps","shouldCallOnChangeProps","defaultProps$3","getDefaultValue$1","propKey","defaultStateValues","defaultValue","getInitialValue$1","value","initialValue","getInitialState$2","selectedItem","isOpen","getInitialHighlightedIndex","inputValue","getHighlightedIndexOnOpen","initialHighlightedIndex","defaultHighlightedIndex","itemToKey","useMouseAndTouchTracker","handleBlur","downshiftRefs","mouseAndTouchTrackersRef","getDownshiftElements","onMouseDown","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","useGetterPropsCalledChecker","useA11yMessageStatus","getA11yStatusMessage","options","dependencyArray","isInitialMount","useIsInitialMount","useScrollIntoView","_ref3","itemRefs","getItemNodeFromIndex","menuElement","scrollIntoViewProp","shouldScrollRef","getChangesOnSelection","_props$items","shouldSelect","isDropdownsStateEqual","isInitialMountRef","getDefaultHighlightedIndex","commonPropTypes","PropTypes","commonDropdownPropTypes","downshiftCommonReducer","stateChangeTypes","__assign","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownPageUp","InputKeyDownPageDown","InputKeyDownEnter","InputChange","InputBlur","InputClick","MenuMouseLeave","ItemMouseMove","ItemClick","ToggleButtonClick","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSelectItem","FunctionSetInputValue","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$1","getInitialState$1","initialState","useControlledReducer","previousSelectedItemRef","_useEnhancedReducer","shouldCallDispatch","defaultProps$1","downshiftUseComboboxReducer","altKey","_excluded$1","_excluded2$1","_excluded3","_excluded4","useCombobox","userProps","_useControlledReducer","menuRef","inputRef","toggleButtonRef","previousResultCountRef","latest","focusOnOpen","handleBlurInTracker","mouseAndTouchTrackers","setGetterPropCallInfo","_inputRef$current","inputKeyDownHandlers","latestState","getLabelProps","labelProps","getMenuProps","_temp","_temp2","_extends2","onMouseLeave","_ref$refKey","refKey","rest","_objectWithoutPropertiesLoose","getItemProps","_temp3","_extends3","_ref4","_ref3$refKey","onMouseMove","onClick","disabledProp","_latest$current","latestProps","_getItemAndIndex","disabled","onSelectKey","customClickHandler","itemHandleMouseMove","itemHandleClick","itemHandleMouseDown","itemNode","getToggleButtonProps","_temp4","_extends4","_ref5","_ref5$refKey","toggleButtonHandleClick","toggleButtonNode","getInputProps","_temp5","_temp6","_extends5","_ref6","onKeyDown","onChange","onInput","onBlur","_ref6$refKey","_ref7","inputHandleKeyDown","inputHandleChange","inputHandleBlur","isBlurByTabChange","inputHandleClick","onChangeKey","eventHandlers","_eventHandlers","inputNode","toggleMenu","closeMenu","openMenu","setHighlightedIndex","newHighlightedIndex","selectItem","newSelectedItem","setInputValue","newInputValue","reset","transform","useImmediate","argOffset","inputRange","outputRange","interpolator","interpolate","DeprecatedLayoutGroupContext","createContext","useIsMounted","isMounted","useForceUpdate","forcedRenderCount","setForcedRenderCount","useState","forceRender","frame","notify","nodeGroup","nodes","subscriptions","dirtyAll","unsubscribe","shouldInheritGroup","inherit","shouldInheritId","LayoutGroup","children","layoutGroupContext","useContext","LayoutGroupContext","deprecatedLayoutGroupContext","context","upstreamId","memoizedContext","jsx","useMotionValue","initial","useConstant","motionValue","isStatic","MotionConfigContext","setLatest","useCombineMotionValues","values","combineValues","updateValue","scheduleUpdate","cancelFrame","useMotionTemplate","fragments","numFragments","buildValue","output","isMotionValue","useComputed","collectMotionValues","useTransform","input","inputRangeOrTransformer","transformer","useListTransform","numValues","useAnimationFrame","callback","initialTimestamp","provideTimeSinceStart","timestamp","delta","GlowingBorder","duration","rx","ry","delay","otherProps","pathRef","progress","startTime","isFinished","startOffset","lengthRef","length","width","rxPixels","elapsedTimeSinceMount","elapsedTime","effectiveDuration","distance","opacity","progress1","x1","y1","transform1","progress2","x2","y2","transform2","jsxs","Fragment","motion","GlowingElement","sendMessage","defineExtensionMessaging","FooterLinks","onOpenShortcuts","supports","useCapabilities","Feature","NavLink","Button","isSymbol","toNumber","toFinite","toInteger","finite","remainder","take","arr","guard","FileText","useAITabSuggestions","selectedTabs","tabsLength","compact","Bot","useBrowserOSSuggestions","query","getGoogleSuggestions","getBingSuggestions","getYahooIndiaSuggestions","getDuckDuckGoSuggestions","getYandexSuggestions","getSearchSuggestions","searchEngine","useSearchSuggestions","debounceMs","debouncedQuery","setDebouncedQuery","timer","useSWR","useSuggestions","searchResultsFromAPI","searchResults","results","aiTabResults","browserOSResults","sections","browserOSItems","aiItems","searchItems","flatItems","section","getSuggestionLabel","NewTabBranding","ProductLogoSvg","dayjs","relativeTime","MAX_DISPLAY_COUNT","getStatusIcon","CheckCircle2","Loader2","XCircle","formatTimestamp","dateString","ScheduleResults","setIsOpen","viewingRun","setViewingRun","jobRuns","useScheduledJobRuns","jobs","useScheduledJobs","runningCount","displayedRuns","enrichWithJob","run","j","runningJobs","completedOrFailed","viewRun","track","SCHEDULED_TASK_VIEW_RESULTS_IN_NEWTAB_EVENT","Collapsible","CollapsibleTrigger","Badge","ChevronDown","CollapsibleContent","Clock","SCHEDULED_TASK_VIEW_MORE_IN_NEWTAB_EVENT","RunResultDialog","open","SectionTitle","title","SuggestionItemRenderer","isHighlighted","baseClassName","cn","Search","Sparkles","SearchSuggestions","globalIndex","currentIndex","SHORTCUTS_LIST","useIsMac","isMac","setIsMac","ShortcutsDialog","onOpenChange","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","shortcut","KbdGroup","Kbd","getFavicons","host","useTopSites","topSites","setTopSites","urls","firstFive","each","icon","TopSiteIcon","src","alt","failed","setFailed","Globe","img","TopSites","site","idx","NewTab","mounted","setMounted","selectedFiles","setSelectedFiles","tabsDropdownRef","setSelectedTabs","shortcutsDialogOpen","setShortcutsDialogOpen","toggleTab","tab","prev","removeTab","tabId","runSelectedAction","executeDefaultAction","newValue","handleSend","NEWTAB_SEARCH_EXECUTED_EVENT","NEWTAB_AI_TRIGGERED_EVENT","createAITabAction","searchQuery","openSidePanelWithSearch","createBrowserOSAction","isSuggestionsVisible","file","removeFile","_","ArrowRight","AnimatePresence","selectedTab","ImageIcon","TabSelector","Layers","NewTabFocusGrid","NewTabLayout","ThemeToggle","Outlet","templates","Personalize","expandedSection","setExpandedSection","copiedSection","setCopiedSection","personalization","setPersonalization","usePersonalization","copyTemplate","templateKey","template","ArrowLeft","Label","Textarea","Check","Copy","App","HashRouter","Routes","Route","$root","ReactDOM","sentryRootErrorHandler","AnalyticsProvider","ThemeProvider","Toaster"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,30,31,32,33,34]}